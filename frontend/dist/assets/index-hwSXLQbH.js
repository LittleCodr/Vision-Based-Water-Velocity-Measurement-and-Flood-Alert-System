var WP=Object.defineProperty;var HP=(t,e,n)=>e in t?WP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>HP(t,typeof e!="symbol"?e+"":e,n);function $P(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function qP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UE={exports:{}},qh={},zE={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl=Symbol.for("react.element"),YP=Symbol.for("react.portal"),GP=Symbol.for("react.fragment"),KP=Symbol.for("react.strict_mode"),QP=Symbol.for("react.profiler"),XP=Symbol.for("react.provider"),JP=Symbol.for("react.context"),ZP=Symbol.for("react.forward_ref"),eA=Symbol.for("react.suspense"),tA=Symbol.for("react.memo"),nA=Symbol.for("react.lazy"),mv=Symbol.iterator;function rA(t){return t===null||typeof t!="object"?null:(t=mv&&t[mv]||t["@@iterator"],typeof t=="function"?t:null)}var BE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WE=Object.assign,HE={};function jo(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||BE}jo.prototype.isReactComponent={};jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $E(){}$E.prototype=jo.prototype;function Xm(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||BE}var Jm=Xm.prototype=new $E;Jm.constructor=Xm;WE(Jm,jo.prototype);Jm.isPureReactComponent=!0;var gv=Array.isArray,qE=Object.prototype.hasOwnProperty,Zm={current:null},YE={key:!0,ref:!0,__self:!0,__source:!0};function GE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qE.call(e,r)&&!YE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Jl,type:t,key:i,ref:o,props:s,_owner:Zm.current}}function sA(t,e){return{$$typeof:Jl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jl}function iA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yv=/\/+/g;function lf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iA(""+t.key):e.toString(36)}function gu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jl:case YP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+lf(o,0):r,gv(s)?(n="",t!=null&&(n=t.replace(yv,"$&/")+"/"),gu(s,e,n,"",function(c){return c})):s!=null&&(eg(s)&&(s=sA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",gv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+lf(i,a);o+=gu(i,e,n,l,s)}else if(l=rA(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+lf(i,a++),o+=gu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cc(t,e,n){if(t==null)return t;var r=[],s=0;return gu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function oA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},yu={transition:null},aA={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:yu,ReactCurrentOwner:Zm};function KE(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Cc,forEach:function(t,e,n){Cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cc(t,function(){e++}),e},toArray:function(t){return Cc(t,function(e){return e})||[]},only:function(t){if(!eg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=jo;se.Fragment=GP;se.Profiler=QP;se.PureComponent=Xm;se.StrictMode=KP;se.Suspense=eA;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aA;se.act=KE;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=WE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Zm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)qE.call(e,l)&&!YE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jl,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:JP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XP,_context:t},t.Consumer=t};se.createElement=GE;se.createFactory=function(t){var e=GE.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:ZP,render:t}};se.isValidElement=eg;se.lazy=function(t){return{$$typeof:nA,_payload:{_status:-1,_result:t},_init:oA}};se.memo=function(t,e){return{$$typeof:tA,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=yu.transition;yu.transition={};try{t()}finally{yu.transition=e}};se.unstable_act=KE;se.useCallback=function(t,e){return Vt.current.useCallback(t,e)};se.useContext=function(t){return Vt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};se.useEffect=function(t,e){return Vt.current.useEffect(t,e)};se.useId=function(){return Vt.current.useId()};se.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Vt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};se.useRef=function(t){return Vt.current.useRef(t)};se.useState=function(t){return Vt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Vt.current.useTransition()};se.version="18.3.1";zE.exports=se;var O=zE.exports;const QE=qP(O),lA=$P({__proto__:null,default:QE},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA=O,uA=Symbol.for("react.element"),hA=Symbol.for("react.fragment"),dA=Object.prototype.hasOwnProperty,fA=cA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pA={key:!0,ref:!0,__self:!0,__source:!0};function XE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dA.call(e,r)&&!pA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:uA,type:t,key:i,ref:o,props:s,_owner:fA.current}}qh.Fragment=hA;qh.jsx=XE;qh.jsxs=XE;UE.exports=qh;var x=UE.exports,cp={},JE={exports:{}},rn={},ZE={exports:{}},eT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,K){var z=H.length;H.push(K);e:for(;0<z;){var ne=z-1>>>1,Z=H[ne];if(0<s(Z,K))H[ne]=K,H[z]=Z,z=ne;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var K=H[0],z=H.pop();if(z!==K){H[0]=z;e:for(var ne=0,Z=H.length,ge=Z>>>1;ne<ge;){var Ee=2*(ne+1)-1,Kt=H[Ee],rt=Ee+1,Dr=H[rt];if(0>s(Kt,z))rt<Z&&0>s(Dr,Kt)?(H[ne]=Dr,H[rt]=z,ne=rt):(H[ne]=Kt,H[Ee]=z,ne=Ee);else if(rt<Z&&0>s(Dr,z))H[ne]=Dr,H[rt]=z,ne=rt;else break e}}return K}function s(H,K){var z=H.sortIndex-K.sortIndex;return z!==0?z:H.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,v=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(H){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=H)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function R(H){if(E=!1,T(H),!v)if(n(l)!==null)v=!0,we(D);else{var K=n(c);K!==null&&Re(R,K.startTime-H)}}function D(H,K){v=!1,E&&(E=!1,y(_),_=-1),m=!0;var z=f;try{for(T(K),d=n(l);d!==null&&(!(d.expirationTime>K)||H&&!C());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,f=d.priorityLevel;var Z=ne(d.expirationTime<=K);K=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&r(l),T(K)}else r(l);d=n(l)}if(d!==null)var ge=!0;else{var Ee=n(c);Ee!==null&&Re(R,Ee.startTime-K),ge=!1}return ge}finally{d=null,f=z,m=!1}}var L=!1,I=null,_=-1,k=5,P=-1;function C(){return!(t.unstable_now()-P<k)}function N(){if(I!==null){var H=t.unstable_now();P=H;var K=!0;try{K=I(!0,H)}finally{K?A():(L=!1,I=null)}}else L=!1}var A;if(typeof w=="function")A=function(){w(N)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ce=ie.port2;ie.port1.onmessage=N,A=function(){ce.postMessage(null)}}else A=function(){b(N,0)};function we(H){I=H,L||(L=!0,A())}function Re(H,K){_=b(function(){H(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,we(D))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var z=f;f=K;try{return H()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var z=f;f=H;try{return K()}finally{f=z}},t.unstable_scheduleCallback=function(H,K,z){var ne=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ne+z:ne):z=ne,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,H={id:h++,callback:K,priorityLevel:H,startTime:z,expirationTime:Z,sortIndex:-1},z>ne?(H.sortIndex=z,e(c,H),n(l)===null&&H===n(c)&&(E?(y(_),_=-1):E=!0,Re(R,z-ne))):(H.sortIndex=Z,e(l,H),v||m||(v=!0,we(D))),H},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(H){var K=f;return function(){var z=f;f=K;try{return H.apply(this,arguments)}finally{f=z}}}})(eT);ZE.exports=eT;var mA=ZE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gA=O,nn=mA;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tT=new Set,ml={};function bi(t,e){xo(t,e),xo(t+"Capture",e)}function xo(t,e){for(ml[t]=e,t=0;t<e.length;t++)tT.add(e[t])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),up=Object.prototype.hasOwnProperty,yA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_v={},vv={};function _A(t){return up.call(vv,t)?!0:up.call(_v,t)?!1:yA.test(t)?vv[t]=!0:(_v[t]=!0,!1)}function vA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wA(t,e,n,r){if(e===null||typeof e>"u"||vA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new Ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new Ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new Ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new Ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new Ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new Ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new Ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new Ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new Ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var tg=/[\-:]([a-z])/g;function ng(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tg,ng);_t[e]=new Ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tg,ng);_t[e]=new Ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tg,ng);_t[e]=new Ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new Ft(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new Ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function rg(t,e,n,r){var s=_t.hasOwnProperty(e)?_t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wA(e,n,s,r)&&(n=null),r||s===null?_A(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cr=gA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),qi=Symbol.for("react.portal"),Yi=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),nT=Symbol.for("react.provider"),rT=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),dp=Symbol.for("react.suspense"),fp=Symbol.for("react.suspense_list"),og=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),sT=Symbol.for("react.offscreen"),wv=Symbol.iterator;function ga(t){return t===null||typeof t!="object"?null:(t=wv&&t[wv]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,cf;function Oa(t){if(cf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cf=e&&e[1]||""}return`
`+cf+t}var uf=!1;function hf(t,e){if(!t||uf)return"";uf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{uf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oa(t):""}function xA(t){switch(t.tag){case 5:return Oa(t.type);case 16:return Oa("Lazy");case 13:return Oa("Suspense");case 19:return Oa("SuspenseList");case 0:case 2:case 15:return t=hf(t.type,!1),t;case 11:return t=hf(t.type.render,!1),t;case 1:return t=hf(t.type,!0),t;default:return""}}function pp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yi:return"Fragment";case qi:return"Portal";case hp:return"Profiler";case sg:return"StrictMode";case dp:return"Suspense";case fp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rT:return(t.displayName||"Context")+".Consumer";case nT:return(t._context.displayName||"Context")+".Provider";case ig:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case og:return e=t.displayName||null,e!==null?e:pp(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return pp(t(e))}catch{}}return null}function EA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pp(e);case 8:return e===sg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TA(t){var e=iT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=TA(t))}function oT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mp(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aT(t,e){e=e.checked,e!=null&&rg(t,"checked",e,!1)}function gp(t,e){aT(t,e);var n=Es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yp(t,e.type,n):e.hasOwnProperty("defaultValue")&&yp(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ev(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yp(t,e,n){(e!=="number"||Wu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ma=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _p(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ma(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function lT(t,e){var n=Es(e.value),r=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dc,uT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dc=Dc||document.createElement("div"),Dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bA=["Webkit","ms","Moz","O"];Object.keys(qa).forEach(function(t){bA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qa[e]=qa[t]})});function hT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qa.hasOwnProperty(t)&&qa[t]?(""+e).trim():e+"px"}function dT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var IA=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wp(t,e){if(e){if(IA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function xp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ep=null;function ag(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tp=null,ao=null,lo=null;function Iv(t){if(t=tc(t)){if(typeof Tp!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Xh(e),Tp(t.stateNode,t.type,e))}}function fT(t){ao?lo?lo.push(t):lo=[t]:ao=t}function pT(){if(ao){var t=ao,e=lo;if(lo=ao=null,Iv(t),e)for(t=0;t<e.length;t++)Iv(e[t])}}function mT(t,e){return t(e)}function gT(){}var df=!1;function yT(t,e,n){if(df)return t(e,n);df=!0;try{return mT(t,e,n)}finally{df=!1,(ao!==null||lo!==null)&&(gT(),pT())}}function yl(t,e){var n=t.stateNode;if(n===null)return null;var r=Xh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var bp=!1;if(xr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){bp=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{bp=!1}function SA(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ya=!1,Hu=null,$u=!1,Ip=null,kA={onError:function(t){Ya=!0,Hu=t}};function PA(t,e,n,r,s,i,o,a,l){Ya=!1,Hu=null,SA.apply(kA,arguments)}function AA(t,e,n,r,s,i,o,a,l){if(PA.apply(this,arguments),Ya){if(Ya){var c=Hu;Ya=!1,Hu=null}else throw Error(B(198));$u||($u=!0,Ip=c)}}function Ii(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _T(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sv(t){if(Ii(t)!==t)throw Error(B(188))}function CA(t){var e=t.alternate;if(!e){if(e=Ii(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sv(s),t;if(i===r)return Sv(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function vT(t){return t=CA(t),t!==null?wT(t):null}function wT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wT(t);if(e!==null)return e;t=t.sibling}return null}var xT=nn.unstable_scheduleCallback,kv=nn.unstable_cancelCallback,RA=nn.unstable_shouldYield,NA=nn.unstable_requestPaint,Ye=nn.unstable_now,DA=nn.unstable_getCurrentPriorityLevel,lg=nn.unstable_ImmediatePriority,ET=nn.unstable_UserBlockingPriority,qu=nn.unstable_NormalPriority,OA=nn.unstable_LowPriority,TT=nn.unstable_IdlePriority,Yh=null,Gn=null;function MA(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Yh,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:FA,LA=Math.log,VA=Math.LN2;function FA(t){return t>>>=0,t===0?32:31-(LA(t)/VA|0)|0}var Oc=64,Mc=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=La(a):(i&=o,i!==0&&(r=La(i)))}else o=n&~s,o!==0?r=La(o):i!==0&&(r=La(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),s=1<<n,r|=t[n],e&=~s;return r}function jA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Sn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=jA(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Sp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bT(){var t=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),t}function ff(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function zA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function cg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function IT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ST,ug,kT,PT,AT,kp=!1,Lc=[],as=null,ls=null,cs=null,_l=new Map,vl=new Map,qr=[],BA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pv(t,e){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":_l.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(e.pointerId)}}function _a(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=tc(e),e!==null&&ug(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WA(t,e,n,r,s){switch(e){case"focusin":return as=_a(as,t,e,n,r,s),!0;case"dragenter":return ls=_a(ls,t,e,n,r,s),!0;case"mouseover":return cs=_a(cs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _l.set(i,_a(_l.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vl.set(i,_a(vl.get(i)||null,t,e,n,r,s)),!0}return!1}function CT(t){var e=ti(t.target);if(e!==null){var n=Ii(e);if(n!==null){if(e=n.tag,e===13){if(e=_T(n),e!==null){t.blockedOn=e,AT(t.priority,function(){kT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ep=r,n.target.dispatchEvent(r),Ep=null}else return e=tc(n),e!==null&&ug(e),t.blockedOn=n,!1;e.shift()}return!0}function Av(t,e,n){_u(t)&&n.delete(e)}function HA(){kp=!1,as!==null&&_u(as)&&(as=null),ls!==null&&_u(ls)&&(ls=null),cs!==null&&_u(cs)&&(cs=null),_l.forEach(Av),vl.forEach(Av)}function va(t,e){t.blockedOn===e&&(t.blockedOn=null,kp||(kp=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,HA)))}function wl(t){function e(s){return va(s,t)}if(0<Lc.length){va(Lc[0],t);for(var n=1;n<Lc.length;n++){var r=Lc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(as!==null&&va(as,t),ls!==null&&va(ls,t),cs!==null&&va(cs,t),_l.forEach(e),vl.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)CT(n),n.blockedOn===null&&qr.shift()}var co=Cr.ReactCurrentBatchConfig,Gu=!0;function $A(t,e,n,r){var s=ve,i=co.transition;co.transition=null;try{ve=1,hg(t,e,n,r)}finally{ve=s,co.transition=i}}function qA(t,e,n,r){var s=ve,i=co.transition;co.transition=null;try{ve=4,hg(t,e,n,r)}finally{ve=s,co.transition=i}}function hg(t,e,n,r){if(Gu){var s=Pp(t,e,n,r);if(s===null)Tf(t,e,r,Ku,n),Pv(t,r);else if(WA(s,t,e,n,r))r.stopPropagation();else if(Pv(t,r),e&4&&-1<BA.indexOf(t)){for(;s!==null;){var i=tc(s);if(i!==null&&ST(i),i=Pp(t,e,n,r),i===null&&Tf(t,e,r,Ku,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Tf(t,e,r,null,n)}}var Ku=null;function Pp(t,e,n,r){if(Ku=null,t=ag(r),t=ti(t),t!==null)if(e=Ii(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_T(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ku=t,null}function RT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DA()){case lg:return 1;case ET:return 4;case qu:case OA:return 16;case TT:return 536870912;default:return 16}default:return 16}}var Zr=null,dg=null,vu=null;function NT(){if(vu)return vu;var t,e=dg,n=e.length,r,s="value"in Zr?Zr.value:Zr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return vu=s.slice(t,1<r?1-r:void 0)}function wu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vc(){return!0}function Cv(){return!1}function sn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vc:Cv,this.isPropagationStopped=Cv,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vc)},persist:function(){},isPersistent:Vc}),e}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=sn(Uo),ec=Fe({},Uo,{view:0,detail:0}),YA=sn(ec),pf,mf,wa,Gh=Fe({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wa&&(wa&&t.type==="mousemove"?(pf=t.screenX-wa.screenX,mf=t.screenY-wa.screenY):mf=pf=0,wa=t),pf)},movementY:function(t){return"movementY"in t?t.movementY:mf}}),Rv=sn(Gh),GA=Fe({},Gh,{dataTransfer:0}),KA=sn(GA),QA=Fe({},ec,{relatedTarget:0}),gf=sn(QA),XA=Fe({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),JA=sn(XA),ZA=Fe({},Uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eC=sn(ZA),tC=Fe({},Uo,{data:0}),Nv=sn(tC),nC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sC[t])?!!e[t]:!1}function pg(){return iC}var oC=Fe({},ec,{key:function(t){if(t.key){var e=nC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pg,charCode:function(t){return t.type==="keypress"?wu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aC=sn(oC),lC=Fe({},Gh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dv=sn(lC),cC=Fe({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pg}),uC=sn(cC),hC=Fe({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),dC=sn(hC),fC=Fe({},Gh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pC=sn(fC),mC=[9,13,27,32],mg=xr&&"CompositionEvent"in window,Ga=null;xr&&"documentMode"in document&&(Ga=document.documentMode);var gC=xr&&"TextEvent"in window&&!Ga,DT=xr&&(!mg||Ga&&8<Ga&&11>=Ga),Ov=" ",Mv=!1;function OT(t,e){switch(t){case"keyup":return mC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gi=!1;function yC(t,e){switch(t){case"compositionend":return MT(e);case"keypress":return e.which!==32?null:(Mv=!0,Ov);case"textInput":return t=e.data,t===Ov&&Mv?null:t;default:return null}}function _C(t,e){if(Gi)return t==="compositionend"||!mg&&OT(t,e)?(t=NT(),vu=dg=Zr=null,Gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DT&&e.locale!=="ko"?null:e.data;default:return null}}var vC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vC[t.type]:e==="textarea"}function LT(t,e,n,r){fT(r),e=Qu(e,"onChange"),0<e.length&&(n=new fg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ka=null,xl=null;function wC(t){YT(t,0)}function Kh(t){var e=Xi(t);if(oT(e))return t}function xC(t,e){if(t==="change")return e}var VT=!1;if(xr){var yf;if(xr){var _f="oninput"in document;if(!_f){var Vv=document.createElement("div");Vv.setAttribute("oninput","return;"),_f=typeof Vv.oninput=="function"}yf=_f}else yf=!1;VT=yf&&(!document.documentMode||9<document.documentMode)}function Fv(){Ka&&(Ka.detachEvent("onpropertychange",FT),xl=Ka=null)}function FT(t){if(t.propertyName==="value"&&Kh(xl)){var e=[];LT(e,xl,t,ag(t)),yT(wC,e)}}function EC(t,e,n){t==="focusin"?(Fv(),Ka=e,xl=n,Ka.attachEvent("onpropertychange",FT)):t==="focusout"&&Fv()}function TC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kh(xl)}function bC(t,e){if(t==="click")return Kh(e)}function IC(t,e){if(t==="input"||t==="change")return Kh(e)}function SC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:SC;function El(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!up.call(e,s)||!Cn(t[s],e[s]))return!1}return!0}function jv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uv(t,e){var n=jv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jv(n)}}function jT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UT(){for(var t=window,e=Wu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wu(t.document)}return e}function gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kC(t){var e=UT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jT(n.ownerDocument.documentElement,n)){if(r!==null&&gg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Uv(n,i);var o=Uv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PC=xr&&"documentMode"in document&&11>=document.documentMode,Ki=null,Ap=null,Qa=null,Cp=!1;function zv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cp||Ki==null||Ki!==Wu(r)||(r=Ki,"selectionStart"in r&&gg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qa&&El(Qa,r)||(Qa=r,r=Qu(Ap,"onSelect"),0<r.length&&(e=new fg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ki)))}function Fc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},vf={},zT={};xr&&(zT=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Qh(t){if(vf[t])return vf[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zT)return vf[t]=e[n];return t}var BT=Qh("animationend"),WT=Qh("animationiteration"),HT=Qh("animationstart"),$T=Qh("transitionend"),qT=new Map,Bv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){qT.set(t,e),bi(e,[t])}for(var wf=0;wf<Bv.length;wf++){var xf=Bv[wf],AC=xf.toLowerCase(),CC=xf[0].toUpperCase()+xf.slice(1);Ds(AC,"on"+CC)}Ds(BT,"onAnimationEnd");Ds(WT,"onAnimationIteration");Ds(HT,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds($T,"onTransitionEnd");xo("onMouseEnter",["mouseout","mouseover"]);xo("onMouseLeave",["mouseout","mouseover"]);xo("onPointerEnter",["pointerout","pointerover"]);xo("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Va));function Wv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AA(r,e,void 0,t),t.currentTarget=null}function YT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Wv(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Wv(s,a,c),i=l}}}if($u)throw t=Ip,$u=!1,Ip=null,t}function ke(t,e){var n=e[Mp];n===void 0&&(n=e[Mp]=new Set);var r=t+"__bubble";n.has(r)||(GT(e,t,2,!1),n.add(r))}function Ef(t,e,n){var r=0;e&&(r|=4),GT(n,t,r,e)}var jc="_reactListening"+Math.random().toString(36).slice(2);function Tl(t){if(!t[jc]){t[jc]=!0,tT.forEach(function(n){n!=="selectionchange"&&(RC.has(n)||Ef(n,!1,t),Ef(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jc]||(e[jc]=!0,Ef("selectionchange",!1,e))}}function GT(t,e,n,r){switch(RT(e)){case 1:var s=$A;break;case 4:s=qA;break;default:s=hg}n=s.bind(null,e,n,t),s=void 0,!bp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Tf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ti(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}yT(function(){var c=i,h=ag(n),d=[];e:{var f=qT.get(t);if(f!==void 0){var m=fg,v=t;switch(t){case"keypress":if(wu(n)===0)break e;case"keydown":case"keyup":m=aC;break;case"focusin":v="focus",m=gf;break;case"focusout":v="blur",m=gf;break;case"beforeblur":case"afterblur":m=gf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=KA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=uC;break;case BT:case WT:case HT:m=JA;break;case $T:m=dC;break;case"scroll":m=YA;break;case"wheel":m=pC;break;case"copy":case"cut":case"paste":m=eC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Dv}var E=(e&4)!==0,b=!E&&t==="scroll",y=E?f!==null?f+"Capture":null:f;E=[];for(var w=c,T;w!==null;){T=w;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,y!==null&&(R=yl(w,y),R!=null&&E.push(bl(w,R,T)))),b)break;w=w.return}0<E.length&&(f=new m(f,v,null,n,h),d.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Ep&&(v=n.relatedTarget||n.fromElement)&&(ti(v)||v[Er]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?ti(v):null,v!==null&&(b=Ii(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(E=Rv,R="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=Dv,R="onPointerLeave",y="onPointerEnter",w="pointer"),b=m==null?f:Xi(m),T=v==null?f:Xi(v),f=new E(R,w+"leave",m,n,h),f.target=b,f.relatedTarget=T,R=null,ti(h)===c&&(E=new E(y,w+"enter",v,n,h),E.target=T,E.relatedTarget=b,R=E),b=R,m&&v)t:{for(E=m,y=v,w=0,T=E;T;T=Vi(T))w++;for(T=0,R=y;R;R=Vi(R))T++;for(;0<w-T;)E=Vi(E),w--;for(;0<T-w;)y=Vi(y),T--;for(;w--;){if(E===y||y!==null&&E===y.alternate)break t;E=Vi(E),y=Vi(y)}E=null}else E=null;m!==null&&Hv(d,f,m,E,!1),v!==null&&b!==null&&Hv(d,b,v,E,!0)}}e:{if(f=c?Xi(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=xC;else if(Lv(f))if(VT)D=IC;else{D=TC;var L=EC}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=bC);if(D&&(D=D(t,c))){LT(d,D,n,h);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&yp(f,"number",f.value)}switch(L=c?Xi(c):window,t){case"focusin":(Lv(L)||L.contentEditable==="true")&&(Ki=L,Ap=c,Qa=null);break;case"focusout":Qa=Ap=Ki=null;break;case"mousedown":Cp=!0;break;case"contextmenu":case"mouseup":case"dragend":Cp=!1,zv(d,n,h);break;case"selectionchange":if(PC)break;case"keydown":case"keyup":zv(d,n,h)}var I;if(mg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Gi?OT(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(DT&&n.locale!=="ko"&&(Gi||_!=="onCompositionStart"?_==="onCompositionEnd"&&Gi&&(I=NT()):(Zr=h,dg="value"in Zr?Zr.value:Zr.textContent,Gi=!0)),L=Qu(c,_),0<L.length&&(_=new Nv(_,t,null,n,h),d.push({event:_,listeners:L}),I?_.data=I:(I=MT(n),I!==null&&(_.data=I)))),(I=gC?yC(t,n):_C(t,n))&&(c=Qu(c,"onBeforeInput"),0<c.length&&(h=new Nv("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}YT(d,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yl(t,n),i!=null&&r.unshift(bl(t,i,s)),i=yl(t,e),i!=null&&r.push(bl(t,i,s))),t=t.return}return r}function Vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=yl(n,i),l!=null&&o.unshift(bl(n,l,a))):s||(l=yl(n,i),l!=null&&o.push(bl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var NC=/\r\n?/g,DC=/\u0000|\uFFFD/g;function $v(t){return(typeof t=="string"?t:""+t).replace(NC,`
`).replace(DC,"")}function Uc(t,e,n){if(e=$v(e),$v(t)!==e&&n)throw Error(B(425))}function Xu(){}var Rp=null,Np=null;function Dp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,OC=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,MC=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(t){return qv.resolve(null).then(t).catch(LC)}:Op;function LC(t){setTimeout(function(){throw t})}function bf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wl(e)}function us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+zo,Il="__reactProps$"+zo,Er="__reactContainer$"+zo,Mp="__reactEvents$"+zo,VC="__reactListeners$"+zo,FC="__reactHandles$"+zo;function ti(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Er]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yv(t);t!==null;){if(n=t[Hn])return n;t=Yv(t)}return e}t=n,n=t.parentNode}return null}function tc(t){return t=t[Hn]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Xh(t){return t[Il]||null}var Lp=[],Ji=-1;function Os(t){return{current:t}}function Ce(t){0>Ji||(t.current=Lp[Ji],Lp[Ji]=null,Ji--)}function be(t,e){Ji++,Lp[Ji]=t.current,t.current=e}var Ts={},Pt=Os(Ts),qt=Os(!1),hi=Ts;function Eo(t,e){var n=t.type.contextTypes;if(!n)return Ts;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Yt(t){return t=t.childContextTypes,t!=null}function Ju(){Ce(qt),Ce(Pt)}function Gv(t,e,n){if(Pt.current!==Ts)throw Error(B(168));be(Pt,e),be(qt,n)}function KT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,EA(t)||"Unknown",s));return Fe({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,hi=Pt.current,be(Pt,t),be(qt,qt.current),!0}function Kv(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=KT(t,e,hi),r.__reactInternalMemoizedMergedChildContext=t,Ce(qt),Ce(Pt),be(Pt,t)):Ce(qt),be(qt,n)}var pr=null,Jh=!1,If=!1;function QT(t){pr===null?pr=[t]:pr.push(t)}function jC(t){Jh=!0,QT(t)}function Ms(){if(!If&&pr!==null){If=!0;var t=0,e=ve;try{var n=pr;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pr=null,Jh=!1}catch(s){throw pr!==null&&(pr=pr.slice(t+1)),xT(lg,Ms),s}finally{ve=e,If=!1}}return null}var Zi=[],eo=0,eh=null,th=0,an=[],ln=0,di=null,gr=1,yr="";function Ks(t,e){Zi[eo++]=th,Zi[eo++]=eh,eh=t,th=e}function XT(t,e,n){an[ln++]=gr,an[ln++]=yr,an[ln++]=di,di=t;var r=gr;t=yr;var s=32-Sn(r)-1;r&=~(1<<s),n+=1;var i=32-Sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,gr=1<<32-Sn(e)+s|n<<s|r,yr=i+t}else gr=1<<i|n<<s|r,yr=t}function yg(t){t.return!==null&&(Ks(t,1),XT(t,1,0))}function _g(t){for(;t===eh;)eh=Zi[--eo],Zi[eo]=null,th=Zi[--eo],Zi[eo]=null;for(;t===di;)di=an[--ln],an[ln]=null,yr=an[--ln],an[ln]=null,gr=an[--ln],an[ln]=null}var en=null,Zt=null,Ne=!1,En=null;function JT(t,e){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,en=t,Zt=us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,en=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=di!==null?{id:gr,overflow:yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,en=t,Zt=null,!0):!1;default:return!1}}function Vp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fp(t){if(Ne){var e=Zt;if(e){var n=e;if(!Qv(t,e)){if(Vp(t))throw Error(B(418));e=us(n.nextSibling);var r=en;e&&Qv(t,e)?JT(r,n):(t.flags=t.flags&-4097|2,Ne=!1,en=t)}}else{if(Vp(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ne=!1,en=t}}}function Xv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;en=t}function zc(t){if(t!==en)return!1;if(!Ne)return Xv(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dp(t.type,t.memoizedProps)),e&&(e=Zt)){if(Vp(t))throw ZT(),Error(B(418));for(;e;)JT(t,e),e=us(e.nextSibling)}if(Xv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=en?us(t.stateNode.nextSibling):null;return!0}function ZT(){for(var t=Zt;t;)t=us(t.nextSibling)}function To(){Zt=en=null,Ne=!1}function vg(t){En===null?En=[t]:En.push(t)}var UC=Cr.ReactCurrentBatchConfig;function xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Bc(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jv(t){var e=t._init;return e(t._payload)}function eb(t){function e(y,w){if(t){var T=y.deletions;T===null?(y.deletions=[w],y.flags|=16):T.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=ps(y,w),y.index=0,y.sibling=null,y}function i(y,w,T){return y.index=T,t?(T=y.alternate,T!==null?(T=T.index,T<w?(y.flags|=2,w):T):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,T,R){return w===null||w.tag!==6?(w=Nf(T,y.mode,R),w.return=y,w):(w=s(w,T),w.return=y,w)}function l(y,w,T,R){var D=T.type;return D===Yi?h(y,w,T.props.children,R,T.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Hr&&Jv(D)===w.type)?(R=s(w,T.props),R.ref=xa(y,w,T),R.return=y,R):(R=ku(T.type,T.key,T.props,null,y.mode,R),R.ref=xa(y,w,T),R.return=y,R)}function c(y,w,T,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=Df(T,y.mode,R),w.return=y,w):(w=s(w,T.children||[]),w.return=y,w)}function h(y,w,T,R,D){return w===null||w.tag!==7?(w=li(T,y.mode,R,D),w.return=y,w):(w=s(w,T),w.return=y,w)}function d(y,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nf(""+w,y.mode,T),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rc:return T=ku(w.type,w.key,w.props,null,y.mode,T),T.ref=xa(y,null,w),T.return=y,T;case qi:return w=Df(w,y.mode,T),w.return=y,w;case Hr:var R=w._init;return d(y,R(w._payload),T)}if(Ma(w)||ga(w))return w=li(w,y.mode,T,null),w.return=y,w;Bc(y,w)}return null}function f(y,w,T,R){var D=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:a(y,w,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Rc:return T.key===D?l(y,w,T,R):null;case qi:return T.key===D?c(y,w,T,R):null;case Hr:return D=T._init,f(y,w,D(T._payload),R)}if(Ma(T)||ga(T))return D!==null?null:h(y,w,T,R,null);Bc(y,T)}return null}function m(y,w,T,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(T)||null,a(w,y,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Rc:return y=y.get(R.key===null?T:R.key)||null,l(w,y,R,D);case qi:return y=y.get(R.key===null?T:R.key)||null,c(w,y,R,D);case Hr:var L=R._init;return m(y,w,T,L(R._payload),D)}if(Ma(R)||ga(R))return y=y.get(T)||null,h(w,y,R,D,null);Bc(w,R)}return null}function v(y,w,T,R){for(var D=null,L=null,I=w,_=w=0,k=null;I!==null&&_<T.length;_++){I.index>_?(k=I,I=null):k=I.sibling;var P=f(y,I,T[_],R);if(P===null){I===null&&(I=k);break}t&&I&&P.alternate===null&&e(y,I),w=i(P,w,_),L===null?D=P:L.sibling=P,L=P,I=k}if(_===T.length)return n(y,I),Ne&&Ks(y,_),D;if(I===null){for(;_<T.length;_++)I=d(y,T[_],R),I!==null&&(w=i(I,w,_),L===null?D=I:L.sibling=I,L=I);return Ne&&Ks(y,_),D}for(I=r(y,I);_<T.length;_++)k=m(I,y,_,T[_],R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?_:k.key),w=i(k,w,_),L===null?D=k:L.sibling=k,L=k);return t&&I.forEach(function(C){return e(y,C)}),Ne&&Ks(y,_),D}function E(y,w,T,R){var D=ga(T);if(typeof D!="function")throw Error(B(150));if(T=D.call(T),T==null)throw Error(B(151));for(var L=D=null,I=w,_=w=0,k=null,P=T.next();I!==null&&!P.done;_++,P=T.next()){I.index>_?(k=I,I=null):k=I.sibling;var C=f(y,I,P.value,R);if(C===null){I===null&&(I=k);break}t&&I&&C.alternate===null&&e(y,I),w=i(C,w,_),L===null?D=C:L.sibling=C,L=C,I=k}if(P.done)return n(y,I),Ne&&Ks(y,_),D;if(I===null){for(;!P.done;_++,P=T.next())P=d(y,P.value,R),P!==null&&(w=i(P,w,_),L===null?D=P:L.sibling=P,L=P);return Ne&&Ks(y,_),D}for(I=r(y,I);!P.done;_++,P=T.next())P=m(I,y,_,P.value,R),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?_:P.key),w=i(P,w,_),L===null?D=P:L.sibling=P,L=P);return t&&I.forEach(function(N){return e(y,N)}),Ne&&Ks(y,_),D}function b(y,w,T,R){if(typeof T=="object"&&T!==null&&T.type===Yi&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Rc:e:{for(var D=T.key,L=w;L!==null;){if(L.key===D){if(D=T.type,D===Yi){if(L.tag===7){n(y,L.sibling),w=s(L,T.props.children),w.return=y,y=w;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Hr&&Jv(D)===L.type){n(y,L.sibling),w=s(L,T.props),w.ref=xa(y,L,T),w.return=y,y=w;break e}n(y,L);break}else e(y,L);L=L.sibling}T.type===Yi?(w=li(T.props.children,y.mode,R,T.key),w.return=y,y=w):(R=ku(T.type,T.key,T.props,null,y.mode,R),R.ref=xa(y,w,T),R.return=y,y=R)}return o(y);case qi:e:{for(L=T.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(y,w.sibling),w=s(w,T.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=Df(T,y.mode,R),w.return=y,y=w}return o(y);case Hr:return L=T._init,b(y,w,L(T._payload),R)}if(Ma(T))return v(y,w,T,R);if(ga(T))return E(y,w,T,R);Bc(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,T),w.return=y,y=w):(n(y,w),w=Nf(T,y.mode,R),w.return=y,y=w),o(y)):n(y,w)}return b}var bo=eb(!0),tb=eb(!1),nh=Os(null),rh=null,to=null,wg=null;function xg(){wg=to=rh=null}function Eg(t){var e=nh.current;Ce(nh),t._currentValue=e}function jp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){rh=t,wg=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function pn(t){var e=t._currentValue;if(wg!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(rh===null)throw Error(B(308));to=t,rh.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var ni=null;function Tg(t){ni===null?ni=[t]:ni.push(t)}function nb(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Tg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tr(t,r)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function bg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tr(t,n)}return s=r.interleaved,s===null?(e.next=e,Tg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tr(t,n)}function xu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cg(t,n)}}function Zv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sh(t,e,n,r){var s=t.updateQueue;$r=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,E=a;switch(f=e,m=n,E.tag){case 1:if(v=E.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=E.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=Fe({},d,f);break e;case 2:$r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);pi|=o,t.lanes=o,t.memoizedState=d}}function e0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var nc={},Kn=Os(nc),Sl=Os(nc),kl=Os(nc);function ri(t){if(t===nc)throw Error(B(174));return t}function Ig(t,e){switch(be(kl,e),be(Sl,t),be(Kn,nc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vp(e,t)}Ce(Kn),be(Kn,e)}function Io(){Ce(Kn),Ce(Sl),Ce(kl)}function sb(t){ri(kl.current);var e=ri(Kn.current),n=vp(e,t.type);e!==n&&(be(Sl,t),be(Kn,n))}function Sg(t){Sl.current===t&&(Ce(Kn),Ce(Sl))}var De=Os(0);function ih(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sf=[];function kg(){for(var t=0;t<Sf.length;t++)Sf[t]._workInProgressVersionPrimary=null;Sf.length=0}var Eu=Cr.ReactCurrentDispatcher,kf=Cr.ReactCurrentBatchConfig,fi=0,Le=null,it=null,ht=null,oh=!1,Xa=!1,Pl=0,zC=0;function xt(){throw Error(B(321))}function Pg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Ag(t,e,n,r,s,i){if(fi=i,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eu.current=t===null||t.memoizedState===null?$C:qC,t=n(r,s),Xa){i=0;do{if(Xa=!1,Pl=0,25<=i)throw Error(B(301));i+=1,ht=it=null,e.updateQueue=null,Eu.current=YC,t=n(r,s)}while(Xa)}if(Eu.current=ah,e=it!==null&&it.next!==null,fi=0,ht=it=Le=null,oh=!1,e)throw Error(B(300));return t}function Cg(){var t=Pl!==0;return Pl=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Le.memoizedState=ht=t:ht=ht.next=t,ht}function mn(){if(it===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=ht===null?Le.memoizedState:ht.next;if(e!==null)ht=e,it=t;else{if(t===null)throw Error(B(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ht===null?Le.memoizedState=ht=t:ht=ht.next=t}return ht}function Al(t,e){return typeof e=="function"?e(t):e}function Pf(t){var e=mn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=it,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((fi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Le.lanes|=h,pi|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Cn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Le.lanes|=i,pi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Af(t){var e=mn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Cn(i,e.memoizedState)||(Ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ib(){}function ob(t,e){var n=Le,r=mn(),s=e(),i=!Cn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ht=!0),r=r.queue,Rg(cb.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Cl(9,lb.bind(null,n,r,s,e),void 0,null),ft===null)throw Error(B(349));fi&30||ab(n,e,s)}return s}function ab(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lb(t,e,n,r){e.value=n,e.getSnapshot=r,ub(e)&&hb(t)}function cb(t,e,n){return n(function(){ub(e)&&hb(t)})}function ub(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function hb(t){var e=Tr(t,1);e!==null&&kn(e,t,1,-1)}function t0(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:t},e.queue=t,t=t.dispatch=HC.bind(null,Le,t),[e.memoizedState,t]}function Cl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function db(){return mn().memoizedState}function Tu(t,e,n,r){var s=Un();Le.flags|=t,s.memoizedState=Cl(1|e,n,void 0,r===void 0?null:r)}function Zh(t,e,n,r){var s=mn();r=r===void 0?null:r;var i=void 0;if(it!==null){var o=it.memoizedState;if(i=o.destroy,r!==null&&Pg(r,o.deps)){s.memoizedState=Cl(e,n,i,r);return}}Le.flags|=t,s.memoizedState=Cl(1|e,n,i,r)}function n0(t,e){return Tu(8390656,8,t,e)}function Rg(t,e){return Zh(2048,8,t,e)}function fb(t,e){return Zh(4,2,t,e)}function pb(t,e){return Zh(4,4,t,e)}function mb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gb(t,e,n){return n=n!=null?n.concat([t]):null,Zh(4,4,mb.bind(null,e,t),n)}function Ng(){}function yb(t,e){var n=mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _b(t,e){var n=mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vb(t,e,n){return fi&21?(Cn(n,e)||(n=bT(),Le.lanes|=n,pi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function BC(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=kf.transition;kf.transition={};try{t(!1),e()}finally{ve=n,kf.transition=r}}function wb(){return mn().memoizedState}function WC(t,e,n){var r=fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xb(t))Eb(e,n);else if(n=nb(t,e,n,r),n!==null){var s=Lt();kn(n,t,r,s),Tb(n,e,r)}}function HC(t,e,n){var r=fs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xb(t))Eb(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Cn(a,o)){var l=e.interleaved;l===null?(s.next=s,Tg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=nb(t,e,s,r),n!==null&&(s=Lt(),kn(n,t,r,s),Tb(n,e,r))}}function xb(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function Eb(t,e){Xa=oh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cg(t,n)}}var ah={readContext:pn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},$C={readContext:pn,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:pn,useEffect:n0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tu(4194308,4,mb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tu(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WC.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:t0,useDebugValue:Ng,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=t0(!1),e=t[0];return t=BC.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,s=Un();if(Ne){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),ft===null)throw Error(B(349));fi&30||ab(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,n0(cb.bind(null,r,i,t),[t]),r.flags|=2048,Cl(9,lb.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Un(),e=ft.identifierPrefix;if(Ne){var n=yr,r=gr;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qC={readContext:pn,useCallback:yb,useContext:pn,useEffect:Rg,useImperativeHandle:gb,useInsertionEffect:fb,useLayoutEffect:pb,useMemo:_b,useReducer:Pf,useRef:db,useState:function(){return Pf(Al)},useDebugValue:Ng,useDeferredValue:function(t){var e=mn();return vb(e,it.memoizedState,t)},useTransition:function(){var t=Pf(Al)[0],e=mn().memoizedState;return[t,e]},useMutableSource:ib,useSyncExternalStore:ob,useId:wb,unstable_isNewReconciler:!1},YC={readContext:pn,useCallback:yb,useContext:pn,useEffect:Rg,useImperativeHandle:gb,useInsertionEffect:fb,useLayoutEffect:pb,useMemo:_b,useReducer:Af,useRef:db,useState:function(){return Af(Al)},useDebugValue:Ng,useDeferredValue:function(t){var e=mn();return it===null?e.memoizedState=t:vb(e,it.memoizedState,t)},useTransition:function(){var t=Af(Al)[0],e=mn().memoizedState;return[t,e]},useMutableSource:ib,useSyncExternalStore:ob,useId:wb,unstable_isNewReconciler:!1};function wn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Up(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ed={isMounted:function(t){return(t=t._reactInternals)?Ii(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Lt(),s=fs(t),i=wr(r,s);i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(kn(e,t,s,r),xu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Lt(),s=fs(t),i=wr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(kn(e,t,s,r),xu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lt(),r=fs(t),s=wr(n,r);s.tag=2,e!=null&&(s.callback=e),e=hs(t,s,r),e!==null&&(kn(e,t,r,n),xu(e,t,r))}};function r0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!El(n,r)||!El(s,i):!0}function bb(t,e,n){var r=!1,s=Ts,i=e.contextType;return typeof i=="object"&&i!==null?i=pn(i):(s=Yt(e)?hi:Pt.current,r=e.contextTypes,i=(r=r!=null)?Eo(t,s):Ts),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ed,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function s0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ed.enqueueReplaceState(e,e.state,null)}function zp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=pn(i):(i=Yt(e)?hi:Pt.current,s.context=Eo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Up(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ed.enqueueReplaceState(s,s.state,null),sh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function So(t,e){try{var n="",r=e;do n+=xA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Cf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GC=typeof WeakMap=="function"?WeakMap:Map;function Ib(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ch||(ch=!0,Jp=r),Bp(t,e)},n}function Sb(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Bp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Bp(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function i0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=lR.bind(null,t,e,n),e.then(t,t))}function o0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function a0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var KC=Cr.ReactCurrentOwner,Ht=!1;function Ot(t,e,n,r){e.child=t===null?tb(e,null,n,r):bo(e,t.child,n,r)}function l0(t,e,n,r,s){n=n.render;var i=e.ref;return uo(e,s),r=Ag(t,e,n,r,i,s),n=Cg(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(Ne&&n&&yg(e),e.flags|=1,Ot(t,e,r,s),e.child)}function c0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ug(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,kb(t,e,i,r,s)):(t=ku(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:El,n(o,r)&&t.ref===e.ref)return br(t,e,s)}return e.flags|=1,t=ps(i,r),t.ref=e.ref,t.return=e,e.child=t}function kb(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(El(i,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,br(t,e,s)}return Wp(t,e,n,r,s)}function Pb(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(ro,Jt),Jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(ro,Jt),Jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(ro,Jt),Jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(ro,Jt),Jt|=r;return Ot(t,e,s,n),e.child}function Ab(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wp(t,e,n,r,s){var i=Yt(n)?hi:Pt.current;return i=Eo(e,i),uo(e,s),n=Ag(t,e,n,r,i,s),r=Cg(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(Ne&&r&&yg(e),e.flags|=1,Ot(t,e,n,s),e.child)}function u0(t,e,n,r,s){if(Yt(n)){var i=!0;Zu(e)}else i=!1;if(uo(e,s),e.stateNode===null)bu(t,e),bb(e,n,r),zp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=pn(c):(c=Yt(n)?hi:Pt.current,c=Eo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&s0(e,o,r,c),$r=!1;var f=e.memoizedState;o.state=f,sh(e,r,o,s),l=e.memoizedState,a!==r||f!==l||qt.current||$r?(typeof h=="function"&&(Up(e,n,h,r),l=e.memoizedState),(a=$r||r0(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:wn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=pn(l):(l=Yt(n)?hi:Pt.current,l=Eo(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&s0(e,o,r,l),$r=!1,f=e.memoizedState,o.state=f,sh(e,r,o,s);var v=e.memoizedState;a!==d||f!==v||qt.current||$r?(typeof m=="function"&&(Up(e,n,m,r),v=e.memoizedState),(c=$r||r0(e,n,c,r,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Hp(t,e,n,r,i,s)}function Hp(t,e,n,r,s,i){Ab(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Kv(e,n,!1),br(t,e,i);r=e.stateNode,KC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bo(e,t.child,null,i),e.child=bo(e,null,a,i)):Ot(t,e,a,i),e.memoizedState=r.state,s&&Kv(e,n,!0),e.child}function Cb(t){var e=t.stateNode;e.pendingContext?Gv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gv(t,e.context,!1),Ig(t,e.containerInfo)}function h0(t,e,n,r,s){return To(),vg(s),e.flags|=256,Ot(t,e,n,r),e.child}var $p={dehydrated:null,treeContext:null,retryLane:0};function qp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rb(t,e,n){var r=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(De,s&1),t===null)return Fp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rd(o,r,0,null),t=li(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qp(n),e.memoizedState=$p,t):Dg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return QC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ps(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ps(a,i):(i=li(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?qp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$p,r}return i=t.child,t=i.sibling,r=ps(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dg(t,e){return e=rd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wc(t,e,n,r){return r!==null&&vg(r),bo(e,t.child,null,n),t=Dg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Cf(Error(B(422))),Wc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=rd({mode:"visible",children:r.children},s,0,null),i=li(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bo(e,t.child,null,o),e.child.memoizedState=qp(o),e.memoizedState=$p,i);if(!(e.mode&1))return Wc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=Cf(i,r,void 0),Wc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ht||a){if(r=ft,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tr(t,s),kn(r,t,s,-1))}return jg(),r=Cf(Error(B(421))),Wc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=cR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Zt=us(s.nextSibling),en=e,Ne=!0,En=null,t!==null&&(an[ln++]=gr,an[ln++]=yr,an[ln++]=di,gr=t.id,yr=t.overflow,di=e),e=Dg(e,r.children),e.flags|=4096,e)}function d0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jp(t.return,e,n)}function Rf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Nb(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ot(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&d0(t,n,e);else if(t.tag===19)d0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ih(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ih(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rf(e,!0,n,null,i);break;case"together":Rf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XC(t,e,n){switch(e.tag){case 3:Cb(e),To();break;case 5:sb(e);break;case 1:Yt(e.type)&&Zu(e);break;case 4:Ig(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(nh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?Rb(t,e,n):(be(De,De.current&1),t=br(t,e,n),t!==null?t.sibling:null);be(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Nb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,Pb(t,e,n)}return br(t,e,n)}var Db,Yp,Ob,Mb;Db=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yp=function(){};Ob=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ri(Kn.current);var i=null;switch(n){case"input":s=mp(t,s),r=mp(t,r),i=[];break;case"select":s=Fe({},s,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":s=_p(t,s),r=_p(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xu)}wp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ml.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ml.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Mb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ea(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function JC(t,e,n){var r=e.pendingProps;switch(_g(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Yt(e.type)&&Ju(),Et(e),null;case 3:return r=e.stateNode,Io(),Ce(qt),Ce(Pt),kg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&(tm(En),En=null))),Yp(t,e),Et(e),null;case 5:Sg(e);var s=ri(kl.current);if(n=e.type,t!==null&&e.stateNode!=null)Ob(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Et(e),null}if(t=ri(Kn.current),zc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Hn]=e,r[Il]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<Va.length;s++)ke(Va[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":xv(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Tv(r,i),ke("invalid",r)}wp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Uc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Uc(r.textContent,a,t),s=["children",""+a]):ml.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":Nc(r),Ev(r,i,!0);break;case"textarea":Nc(r),bv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hn]=e,t[Il]=r,Db(t,e,!1,!1),e.stateNode=t;e:{switch(o=xp(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<Va.length;s++)ke(Va[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":xv(t,r),s=mp(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Fe({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Tv(t,r),s=_p(t,r),ke("invalid",t);break;default:s=r}wp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?dT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gl(t,l):typeof l=="number"&&gl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ml.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ke("scroll",t):l!=null&&rg(t,i,l,o))}switch(n){case"input":Nc(t),Ev(t,r,!1);break;case"textarea":Nc(t),bv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Es(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)Mb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ri(kl.current),ri(Kn.current),zc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(i=r.nodeValue!==n)&&(t=en,t!==null))switch(t.tag){case 3:Uc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return Et(e),null;case 13:if(Ce(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Zt!==null&&e.mode&1&&!(e.flags&128))ZT(),To(),e.flags|=98560,i=!1;else if(i=zc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Hn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),i=!1}else En!==null&&(tm(En),En=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?ot===0&&(ot=3):jg())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return Io(),Yp(t,e),t===null&&Tl(e.stateNode.containerInfo),Et(e),null;case 10:return Eg(e.type._context),Et(e),null;case 17:return Yt(e.type)&&Ju(),Et(e),null;case 19:if(Ce(De),i=e.memoizedState,i===null)return Et(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ea(i,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ih(t),o!==null){for(e.flags|=128,Ea(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>ko&&(e.flags|=128,r=!0,Ea(i,!1),e.lanes=4194304)}else{if(!r)if(t=ih(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ea(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return Et(e),null}else 2*Ye()-i.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,r=!0,Ea(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,n=De.current,be(De,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Fg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function ZC(t,e){switch(_g(e),e.tag){case 1:return Yt(e.type)&&Ju(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Io(),Ce(qt),Ce(Pt),kg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sg(e),null;case 13:if(Ce(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(De),null;case 4:return Io(),null;case 10:return Eg(e.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var Hc=!1,It=!1,eR=typeof WeakSet=="function"?WeakSet:Set,Y=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function Gp(t,e,n){try{n()}catch(r){ze(t,e,r)}}var f0=!1;function tR(t,e){if(Rp=Gu,t=UT(),gg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Np={focusedElem:t,selectionRange:n},Gu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var E=v.memoizedProps,b=v.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?E:wn(e.type,E),b);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(R){ze(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return v=f0,f0=!1,v}function Ja(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Gp(e,n,i)}s=s.next}while(s!==r)}}function td(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lb(t){var e=t.alternate;e!==null&&(t.alternate=null,Lb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[Il],delete e[Mp],delete e[VC],delete e[FC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vb(t){return t.tag===5||t.tag===3||t.tag===4}function p0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xu));else if(r!==4&&(t=t.child,t!==null))for(Qp(t,e,n),t=t.sibling;t!==null;)Qp(t,e,n),t=t.sibling}function Xp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xp(t,e,n),t=t.sibling;t!==null;)Xp(t,e,n),t=t.sibling}var pt=null,xn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)Fb(t,e,n),n=n.sibling}function Fb(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Yh,n)}catch{}switch(n.tag){case 5:It||no(n,e);case 6:var r=pt,s=xn;pt=null,Ur(t,e,n),pt=r,xn=s,pt!==null&&(xn?(t=pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(xn?(t=pt,n=n.stateNode,t.nodeType===8?bf(t.parentNode,n):t.nodeType===1&&bf(t,n),wl(t)):bf(pt,n.stateNode));break;case 4:r=pt,s=xn,pt=n.stateNode.containerInfo,xn=!0,Ur(t,e,n),pt=r,xn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Gp(n,e,o),s=s.next}while(s!==r)}Ur(t,e,n);break;case 1:if(!It&&(no(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ze(n,e,a)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Ur(t,e,n),It=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function m0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eR),e.forEach(function(r){var s=uR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:pt=a.stateNode,xn=!1;break e;case 3:pt=a.stateNode.containerInfo,xn=!0;break e;case 4:pt=a.stateNode.containerInfo,xn=!0;break e}a=a.return}if(pt===null)throw Error(B(160));Fb(i,o,s),pt=null,xn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ze(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jb(e,t),e=e.sibling}function jb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(e,t),Vn(t),r&4){try{Ja(3,t,t.return),td(3,t)}catch(E){ze(t,t.return,E)}try{Ja(5,t,t.return)}catch(E){ze(t,t.return,E)}}break;case 1:_n(e,t),Vn(t),r&512&&n!==null&&no(n,n.return);break;case 5:if(_n(e,t),Vn(t),r&512&&n!==null&&no(n,n.return),t.flags&32){var s=t.stateNode;try{gl(s,"")}catch(E){ze(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&aT(s,i),xp(a,o);var c=xp(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?dT(s,d):h==="dangerouslySetInnerHTML"?uT(s,d):h==="children"?gl(s,d):rg(s,h,d,c)}switch(a){case"input":gp(s,i);break;case"textarea":lT(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?oo(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?oo(s,!!i.multiple,i.defaultValue,!0):oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Il]=i}catch(E){ze(t,t.return,E)}}break;case 6:if(_n(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){ze(t,t.return,E)}}break;case 3:if(_n(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wl(e.containerInfo)}catch(E){ze(t,t.return,E)}break;case 4:_n(e,t),Vn(t);break;case 13:_n(e,t),Vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Lg=Ye())),r&4&&m0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(It=(c=It)||h,_n(e,t),It=c):_n(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Y=t,h=t.child;h!==null;){for(d=Y=h;Y!==null;){switch(f=Y,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ja(4,f,f.return);break;case 1:no(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(E){ze(r,n,E)}}break;case 5:no(f,f.return);break;case 22:if(f.memoizedState!==null){y0(d);continue}}m!==null?(m.return=f,Y=m):y0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hT("display",o))}catch(E){ze(t,t.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){ze(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_n(e,t),Vn(t),r&4&&m0(t);break;case 21:break;default:_n(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Vb(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gl(s,""),r.flags&=-33);var i=p0(t);Xp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=p0(t);Qp(t,a,o);break;default:throw Error(B(161))}}catch(l){ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nR(t,e,n){Y=t,Ub(t)}function Ub(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Hc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||It;a=Hc;var c=It;if(Hc=o,(It=l)&&!c)for(Y=s;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?_0(s):l!==null?(l.return=o,Y=l):_0(s);for(;i!==null;)Y=i,Ub(i),i=i.sibling;Y=s,Hc=a,It=c}g0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):g0(t)}}function g0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||td(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&e0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&wl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}It||e.flags&512&&Kp(e)}catch(f){ze(e,e.return,f)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function y0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function _0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{td(4,e)}catch(l){ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ze(e,s,l)}}var i=e.return;try{Kp(e)}catch(l){ze(e,i,l)}break;case 5:var o=e.return;try{Kp(e)}catch(l){ze(e,o,l)}}}catch(l){ze(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var rR=Math.ceil,lh=Cr.ReactCurrentDispatcher,Og=Cr.ReactCurrentOwner,fn=Cr.ReactCurrentBatchConfig,fe=0,ft=null,Ze=null,yt=0,Jt=0,ro=Os(0),ot=0,Rl=null,pi=0,nd=0,Mg=0,Za=null,zt=null,Lg=0,ko=1/0,fr=null,ch=!1,Jp=null,ds=null,$c=!1,es=null,uh=0,el=0,Zp=null,Iu=-1,Su=0;function Lt(){return fe&6?Ye():Iu!==-1?Iu:Iu=Ye()}function fs(t){return t.mode&1?fe&2&&yt!==0?yt&-yt:UC.transition!==null?(Su===0&&(Su=bT()),Su):(t=ve,t!==0||(t=window.event,t=t===void 0?16:RT(t.type)),t):1}function kn(t,e,n,r){if(50<el)throw el=0,Zp=null,Error(B(185));Zl(t,n,r),(!(fe&2)||t!==ft)&&(t===ft&&(!(fe&2)&&(nd|=n),ot===4&&Yr(t,yt)),Gt(t,r),n===1&&fe===0&&!(e.mode&1)&&(ko=Ye()+500,Jh&&Ms()))}function Gt(t,e){var n=t.callbackNode;UA(t,e);var r=Yu(t,t===ft?yt:0);if(r===0)n!==null&&kv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kv(n),e===1)t.tag===0?jC(v0.bind(null,t)):QT(v0.bind(null,t)),MC(function(){!(fe&6)&&Ms()}),n=null;else{switch(IT(r)){case 1:n=lg;break;case 4:n=ET;break;case 16:n=qu;break;case 536870912:n=TT;break;default:n=qu}n=Gb(n,zb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zb(t,e){if(Iu=-1,Su=0,fe&6)throw Error(B(327));var n=t.callbackNode;if(ho()&&t.callbackNode!==n)return null;var r=Yu(t,t===ft?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hh(t,r);else{e=r;var s=fe;fe|=2;var i=Wb();(ft!==t||yt!==e)&&(fr=null,ko=Ye()+500,ai(t,e));do try{oR();break}catch(a){Bb(t,a)}while(!0);xg(),lh.current=i,fe=s,Ze!==null?e=0:(ft=null,yt=0,e=ot)}if(e!==0){if(e===2&&(s=Sp(t),s!==0&&(r=s,e=em(t,s))),e===1)throw n=Rl,ai(t,0),Yr(t,r),Gt(t,Ye()),n;if(e===6)Yr(t,r);else{if(s=t.current.alternate,!(r&30)&&!sR(s)&&(e=hh(t,r),e===2&&(i=Sp(t),i!==0&&(r=i,e=em(t,i))),e===1))throw n=Rl,ai(t,0),Yr(t,r),Gt(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Qs(t,zt,fr);break;case 3:if(Yr(t,r),(r&130023424)===r&&(e=Lg+500-Ye(),10<e)){if(Yu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Lt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Op(Qs.bind(null,t,zt,fr),e);break}Qs(t,zt,fr);break;case 4:if(Yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rR(r/1960))-r,10<r){t.timeoutHandle=Op(Qs.bind(null,t,zt,fr),r);break}Qs(t,zt,fr);break;case 5:Qs(t,zt,fr);break;default:throw Error(B(329))}}}return Gt(t,Ye()),t.callbackNode===n?zb.bind(null,t):null}function em(t,e){var n=Za;return t.current.memoizedState.isDehydrated&&(ai(t,e).flags|=256),t=hh(t,e),t!==2&&(e=zt,zt=n,e!==null&&tm(e)),t}function tm(t){zt===null?zt=t:zt.push.apply(zt,t)}function sR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yr(t,e){for(e&=~Mg,e&=~nd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function v0(t){if(fe&6)throw Error(B(327));ho();var e=Yu(t,0);if(!(e&1))return Gt(t,Ye()),null;var n=hh(t,e);if(t.tag!==0&&n===2){var r=Sp(t);r!==0&&(e=r,n=em(t,r))}if(n===1)throw n=Rl,ai(t,0),Yr(t,e),Gt(t,Ye()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qs(t,zt,fr),Gt(t,Ye()),null}function Vg(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(ko=Ye()+500,Jh&&Ms())}}function mi(t){es!==null&&es.tag===0&&!(fe&6)&&ho();var e=fe;fe|=1;var n=fn.transition,r=ve;try{if(fn.transition=null,ve=1,t)return t()}finally{ve=r,fn.transition=n,fe=e,!(fe&6)&&Ms()}}function Fg(){Jt=ro.current,Ce(ro)}function ai(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OC(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(_g(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ju();break;case 3:Io(),Ce(qt),Ce(Pt),kg();break;case 5:Sg(r);break;case 4:Io();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:Eg(r.type._context);break;case 22:case 23:Fg()}n=n.return}if(ft=t,Ze=t=ps(t.current,null),yt=Jt=e,ot=0,Rl=null,Mg=nd=pi=0,zt=Za=null,ni!==null){for(e=0;e<ni.length;e++)if(n=ni[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ni=null}return t}function Bb(t,e){do{var n=Ze;try{if(xg(),Eu.current=ah,oh){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}oh=!1}if(fi=0,ht=it=Le=null,Xa=!1,Pl=0,Og.current=null,n===null||n.return===null){ot=1,Rl=e,Ze=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=o0(o);if(m!==null){m.flags&=-257,a0(m,o,a,i,e),m.mode&1&&i0(i,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var E=new Set;E.add(l),e.updateQueue=E}else v.add(l);break e}else{if(!(e&1)){i0(i,c,e),jg();break e}l=Error(B(426))}}else if(Ne&&a.mode&1){var b=o0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),a0(b,o,a,i,e),vg(So(l,a));break e}}i=l=So(l,a),ot!==4&&(ot=2),Za===null?Za=[i]:Za.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Ib(i,l,e);Zv(i,y);break e;case 1:a=l;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ds===null||!ds.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=Sb(i,a,e);Zv(i,R);break e}}i=i.return}while(i!==null)}$b(n)}catch(D){e=D,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function Wb(){var t=lh.current;return lh.current=ah,t===null?ah:t}function jg(){(ot===0||ot===3||ot===2)&&(ot=4),ft===null||!(pi&268435455)&&!(nd&268435455)||Yr(ft,yt)}function hh(t,e){var n=fe;fe|=2;var r=Wb();(ft!==t||yt!==e)&&(fr=null,ai(t,e));do try{iR();break}catch(s){Bb(t,s)}while(!0);if(xg(),fe=n,lh.current=r,Ze!==null)throw Error(B(261));return ft=null,yt=0,ot}function iR(){for(;Ze!==null;)Hb(Ze)}function oR(){for(;Ze!==null&&!RA();)Hb(Ze)}function Hb(t){var e=Yb(t.alternate,t,Jt);t.memoizedProps=t.pendingProps,e===null?$b(t):Ze=e,Og.current=null}function $b(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ZC(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,Ze=null;return}}else if(n=JC(n,e,Jt),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);ot===0&&(ot=5)}function Qs(t,e,n){var r=ve,s=fn.transition;try{fn.transition=null,ve=1,aR(t,e,n,r)}finally{fn.transition=s,ve=r}return null}function aR(t,e,n,r){do ho();while(es!==null);if(fe&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(zA(t,i),t===ft&&(Ze=ft=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$c||($c=!0,Gb(qu,function(){return ho(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fn.transition,fn.transition=null;var o=ve;ve=1;var a=fe;fe|=4,Og.current=null,tR(t,n),jb(n,t),kC(Np),Gu=!!Rp,Np=Rp=null,t.current=n,nR(n),NA(),fe=a,ve=o,fn.transition=i}else t.current=n;if($c&&($c=!1,es=t,uh=s),i=t.pendingLanes,i===0&&(ds=null),MA(n.stateNode),Gt(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ch)throw ch=!1,t=Jp,Jp=null,t;return uh&1&&t.tag!==0&&ho(),i=t.pendingLanes,i&1?t===Zp?el++:(el=0,Zp=t):el=0,Ms(),null}function ho(){if(es!==null){var t=IT(uh),e=fn.transition,n=ve;try{if(fn.transition=null,ve=16>t?16:t,es===null)var r=!1;else{if(t=es,es=null,uh=0,fe&6)throw Error(B(331));var s=fe;for(fe|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:Ja(8,h,i)}var d=h.child;if(d!==null)d.return=h,Y=d;else for(;Y!==null;){h=Y;var f=h.sibling,m=h.return;if(Lb(h),h===c){Y=null;break}if(f!==null){f.return=m,Y=f;break}Y=m}}}var v=i.alternate;if(v!==null){var E=v.child;if(E!==null){v.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ja(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break e}Y=i.return}}var w=t.current;for(Y=w;Y!==null;){o=Y;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Y=T;else e:for(o=w;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:td(9,a)}}catch(D){ze(a,a.return,D)}if(a===o){Y=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Y=R;break e}Y=a.return}}if(fe=s,Ms(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Yh,t)}catch{}r=!0}return r}finally{ve=n,fn.transition=e}}return!1}function w0(t,e,n){e=So(n,e),e=Ib(t,e,1),t=hs(t,e,1),e=Lt(),t!==null&&(Zl(t,1,e),Gt(t,e))}function ze(t,e,n){if(t.tag===3)w0(t,t,n);else for(;e!==null;){if(e.tag===3){w0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=So(n,t),t=Sb(e,t,1),e=hs(e,t,1),t=Lt(),e!==null&&(Zl(e,1,t),Gt(e,t));break}}e=e.return}}function lR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(yt&n)===n&&(ot===4||ot===3&&(yt&130023424)===yt&&500>Ye()-Lg?ai(t,0):Mg|=n),Gt(t,e)}function qb(t,e){e===0&&(t.mode&1?(e=Mc,Mc<<=1,!(Mc&130023424)&&(Mc=4194304)):e=1);var n=Lt();t=Tr(t,e),t!==null&&(Zl(t,e,n),Gt(t,n))}function cR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qb(t,n)}function uR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),qb(t,n)}var Yb;Yb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,XC(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,Ne&&e.flags&1048576&&XT(e,th,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bu(t,e),t=e.pendingProps;var s=Eo(e,Pt.current);uo(e,n),s=Ag(null,e,r,t,s,n);var i=Cg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(i=!0,Zu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bg(e),s.updater=ed,e.stateNode=s,s._reactInternals=e,zp(e,r,t,n),e=Hp(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&yg(e),Ot(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dR(r),t=wn(r,t),s){case 0:e=Wp(null,e,r,t,n);break e;case 1:e=u0(null,e,r,t,n);break e;case 11:e=l0(null,e,r,t,n);break e;case 14:e=c0(null,e,r,wn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),Wp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),u0(t,e,r,s,n);case 3:e:{if(Cb(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,rb(t,e),sh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=So(Error(B(423)),e),e=h0(t,e,r,n,s);break e}else if(r!==s){s=So(Error(B(424)),e),e=h0(t,e,r,n,s);break e}else for(Zt=us(e.stateNode.containerInfo.firstChild),en=e,Ne=!0,En=null,n=tb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(To(),r===s){e=br(t,e,n);break e}Ot(t,e,r,n)}e=e.child}return e;case 5:return sb(e),t===null&&Fp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Dp(r,s)?o=null:i!==null&&Dp(r,i)&&(e.flags|=32),Ab(t,e),Ot(t,e,o,n),e.child;case 6:return t===null&&Fp(e),null;case 13:return Rb(t,e,n);case 4:return Ig(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):Ot(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),l0(t,e,r,s,n);case 7:return Ot(t,e,e.pendingProps,n),e.child;case 8:return Ot(t,e,e.pendingProps.children,n),e.child;case 12:return Ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,be(nh,r._currentValue),r._currentValue=o,i!==null)if(Cn(i.value,o)){if(i.children===s.children&&!qt.current){e=br(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=wr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),jp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ot(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,uo(e,n),s=pn(s),r=r(s),e.flags|=1,Ot(t,e,r,n),e.child;case 14:return r=e.type,s=wn(r,e.pendingProps),s=wn(r.type,s),c0(t,e,r,s,n);case 15:return kb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),bu(t,e),e.tag=1,Yt(r)?(t=!0,Zu(e)):t=!1,uo(e,n),bb(e,r,s),zp(e,r,s,n),Hp(null,e,r,!0,t,n);case 19:return Nb(t,e,n);case 22:return Pb(t,e,n)}throw Error(B(156,e.tag))};function Gb(t,e){return xT(t,e)}function hR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,n,r){return new hR(t,e,n,r)}function Ug(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dR(t){if(typeof t=="function")return Ug(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ig)return 11;if(t===og)return 14}return 2}function ps(t,e){var n=t.alternate;return n===null?(n=hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ku(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ug(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yi:return li(n.children,s,i,e);case sg:o=8,s|=8;break;case hp:return t=hn(12,n,e,s|2),t.elementType=hp,t.lanes=i,t;case dp:return t=hn(13,n,e,s),t.elementType=dp,t.lanes=i,t;case fp:return t=hn(19,n,e,s),t.elementType=fp,t.lanes=i,t;case sT:return rd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nT:o=10;break e;case rT:o=9;break e;case ig:o=11;break e;case og:o=14;break e;case Hr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=hn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function li(t,e,n,r){return t=hn(7,t,r,e),t.lanes=n,t}function rd(t,e,n,r){return t=hn(22,t,r,e),t.elementType=sT,t.lanes=n,t.stateNode={isHidden:!1},t}function Nf(t,e,n){return t=hn(6,t,null,e),t.lanes=n,t}function Df(t,e,n){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ff(0),this.expirationTimes=ff(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ff(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zg(t,e,n,r,s,i,o,a,l){return t=new fR(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=hn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bg(i),t}function pR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Kb(t){if(!t)return Ts;t=t._reactInternals;e:{if(Ii(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Yt(n))return KT(t,n,e)}return e}function Qb(t,e,n,r,s,i,o,a,l){return t=zg(n,r,!0,t,s,i,o,a,l),t.context=Kb(null),n=t.current,r=Lt(),s=fs(n),i=wr(r,s),i.callback=e??null,hs(n,i,s),t.current.lanes=s,Zl(t,s,r),Gt(t,r),t}function sd(t,e,n,r){var s=e.current,i=Lt(),o=fs(s);return n=Kb(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(s,e,o),t!==null&&(kn(t,s,o,i),xu(t,s,o)),o}function dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bg(t,e){x0(t,e),(t=t.alternate)&&x0(t,e)}function mR(){return null}var Xb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wg(t){this._internalRoot=t}id.prototype.render=Wg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));sd(t,e,null,null)};id.prototype.unmount=Wg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mi(function(){sd(null,t,null,null)}),e[Er]=null}};function id(t){this._internalRoot=t}id.prototype.unstable_scheduleHydration=function(t){if(t){var e=PT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&CT(t)}};function Hg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function E0(){}function gR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=dh(o);i.call(c)}}var o=Qb(e,r,t,0,null,!1,!1,"",E0);return t._reactRootContainer=o,t[Er]=o.current,Tl(t.nodeType===8?t.parentNode:t),mi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=dh(l);a.call(c)}}var l=zg(t,0,!1,null,null,!1,!1,"",E0);return t._reactRootContainer=l,t[Er]=l.current,Tl(t.nodeType===8?t.parentNode:t),mi(function(){sd(e,l,n,r)}),l}function ad(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=dh(o);a.call(l)}}sd(e,o,t,s)}else o=gR(n,e,t,s,r);return dh(o)}ST=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=La(e.pendingLanes);n!==0&&(cg(e,n|1),Gt(e,Ye()),!(fe&6)&&(ko=Ye()+500,Ms()))}break;case 13:mi(function(){var r=Tr(t,1);if(r!==null){var s=Lt();kn(r,t,1,s)}}),Bg(t,1)}};ug=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=Lt();kn(e,t,134217728,n)}Bg(t,134217728)}};kT=function(t){if(t.tag===13){var e=fs(t),n=Tr(t,e);if(n!==null){var r=Lt();kn(n,t,e,r)}Bg(t,e)}};PT=function(){return ve};AT=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Tp=function(t,e,n){switch(e){case"input":if(gp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Xh(r);if(!s)throw Error(B(90));oT(r),gp(r,s)}}}break;case"textarea":lT(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};mT=Vg;gT=mi;var yR={usingClientEntryPoint:!1,Events:[tc,Xi,Xh,fT,pT,Vg]},Ta={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_R={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vT(t),t===null?null:t.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||mR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Yh=qc.inject(_R),Gn=qc}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yR;rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hg(e))throw Error(B(200));return pR(t,e,null,n)};rn.createRoot=function(t,e){if(!Hg(t))throw Error(B(299));var n=!1,r="",s=Xb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zg(t,1,!1,null,null,n,!1,r,s),t[Er]=e.current,Tl(t.nodeType===8?t.parentNode:t),new Wg(e)};rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=vT(e),t=t===null?null:t.stateNode,t};rn.flushSync=function(t){return mi(t)};rn.hydrate=function(t,e,n){if(!od(e))throw Error(B(200));return ad(null,t,e,!0,n)};rn.hydrateRoot=function(t,e,n){if(!Hg(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Xb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Qb(e,null,t,1,n??null,s,!1,i,o),t[Er]=e.current,Tl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new id(e)};rn.render=function(t,e,n){if(!od(e))throw Error(B(200));return ad(null,t,e,!1,n)};rn.unmountComponentAtNode=function(t){if(!od(t))throw Error(B(40));return t._reactRootContainer?(mi(function(){ad(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};rn.unstable_batchedUpdates=Vg;rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!od(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return ad(t,e,n,!1,r)};rn.version="18.3.1-next-f1338f8080-20240426";function Jb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jb)}catch(t){console.error(t)}}Jb(),JE.exports=rn;var vR=JE.exports,T0=vR;cp.createRoot=T0.createRoot,cp.hydrateRoot=T0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nl(){return Nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nl.apply(this,arguments)}var ts;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ts||(ts={}));const b0="popstate";function wR(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return nm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:fh(s)}return ER(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $g(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xR(){return Math.random().toString(36).substr(2,8)}function I0(t,e){return{usr:t.state,key:t.key,idx:e}}function nm(t,e,n,r){return n===void 0&&(n=null),Nl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bo(e):e,{state:n,key:e&&e.key||r||xR()})}function fh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ER(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ts.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Nl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=ts.Pop;let b=h(),y=b==null?null:b-c;c=b,l&&l({action:a,location:E.location,delta:y})}function f(b,y){a=ts.Push;let w=nm(E.location,b,y);c=h()+1;let T=I0(w,c),R=E.createHref(w);try{o.pushState(T,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(R)}i&&l&&l({action:a,location:E.location,delta:1})}function m(b,y){a=ts.Replace;let w=nm(E.location,b,y);c=h();let T=I0(w,c),R=E.createHref(w);o.replaceState(T,"",R),i&&l&&l({action:a,location:E.location,delta:0})}function v(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:fh(b);return w=w.replace(/ $/,"%20"),Ve(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let E={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(b0,d),l=b,()=>{s.removeEventListener(b0,d),l=null}},createHref(b){return e(s,b)},createURL:v,encodeLocation(b){let y=v(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(b){return o.go(b)}};return E}var S0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(S0||(S0={}));function TR(t,e,n){return n===void 0&&(n="/"),bR(t,e,n)}function bR(t,e,n,r){let s=typeof e=="string"?Bo(e):e,i=Po(s.pathname||"/",n);if(i==null)return null;let o=Zb(t);IR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=LR(i);a=OR(o[l],c)}return a}function Zb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ms([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Zb(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:NR(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of eI(i.path))s(i,o,l)}),e}function eI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=eI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function IR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SR=/^:[\w-]+$/,kR=3,PR=2,AR=1,CR=10,RR=-2,k0=t=>t==="*";function NR(t,e){let n=t.split("/"),r=n.length;return n.some(k0)&&(r+=RR),e&&(r+=PR),n.filter(s=>!k0(s)).reduce((s,i)=>s+(SR.test(i)?kR:i===""?AR:CR),r)}function DR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function OR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=rm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ms([i,d.pathname]),pathnameBase:zR(ms([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=ms([i,d.pathnameBase]))}return o}function rm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let E=a[d]||"";o=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const v=a[d];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function MR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$g(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function LR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $g(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Po(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const VR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FR=t=>VR.test(t);function jR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bo(t):t,i;if(n)if(FR(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),$g(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=P0(n.substring(1),"/"):i=P0(n,e)}else i=e;return{pathname:i,search:BR(r),hash:WR(s)}}function P0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Of(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qg(t,e){let n=UR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bo(t):(s=Nl({},t),Ve(!s.pathname||!s.pathname.includes("?"),Of("?","pathname","search",s)),Ve(!s.pathname||!s.pathname.includes("#"),Of("#","pathname","hash",s)),Ve(!s.search||!s.search.includes("#"),Of("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=jR(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ms=t=>t.join("/").replace(/\/\/+/g,"/"),zR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tI=["post","put","patch","delete"];new Set(tI);const $R=["get",...tI];new Set($R);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dl(){return Dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dl.apply(this,arguments)}const ld=O.createContext(null),nI=O.createContext(null),Rr=O.createContext(null),cd=O.createContext(null),Nr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),rI=O.createContext(null);function qR(t,e){let{relative:n}=e===void 0?{}:e;Wo()||Ve(!1);let{basename:r,navigator:s}=O.useContext(Rr),{hash:i,pathname:o,search:a}=ud(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ms([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Wo(){return O.useContext(cd)!=null}function Ho(){return Wo()||Ve(!1),O.useContext(cd).location}function sI(t){O.useContext(Rr).static||O.useLayoutEffect(t)}function Gg(){let{isDataRoute:t}=O.useContext(Nr);return t?aN():YR()}function YR(){Wo()||Ve(!1);let t=O.useContext(ld),{basename:e,future:n,navigator:r}=O.useContext(Rr),{matches:s}=O.useContext(Nr),{pathname:i}=Ho(),o=JSON.stringify(qg(s,n.v7_relativeSplatPath)),a=O.useRef(!1);return sI(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Yg(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ms([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}const GR=O.createContext(null);function KR(t){let e=O.useContext(Nr).outlet;return e&&O.createElement(GR.Provider,{value:t},e)}function ud(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Rr),{matches:s}=O.useContext(Nr),{pathname:i}=Ho(),o=JSON.stringify(qg(s,r.v7_relativeSplatPath));return O.useMemo(()=>Yg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function QR(t,e){return XR(t,e)}function XR(t,e,n,r){Wo()||Ve(!1);let{navigator:s}=O.useContext(Rr),{matches:i}=O.useContext(Nr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ho(),h;if(e){var d;let b=typeof e=="string"?Bo(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||Ve(!1),h=b}else h=c;let f=h.pathname||"/",m=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=TR(t,{pathname:m}),E=nN(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:ms([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:ms([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&E?O.createElement(cd.Provider,{value:{location:Dl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ts.Pop}},E):E}function JR(){let t=oN(),e=HR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const ZR=O.createElement(JR,null);class eN extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Nr.Provider,{value:this.props.routeContext},O.createElement(rI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tN(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(ld);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Nr.Provider,{value:e},r)}function nN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Ve(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:m}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,v=!1,E=null,b=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||ZR,l&&(c<0&&f===0?(lN("route-fallback"),v=!0,b=null):c===f&&(v=!0,b=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),w=()=>{let T;return m?T=E:v?T=b:d.route.Component?T=O.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=h,O.createElement(tN,{match:d,routeContext:{outlet:h,matches:y,isDataRoute:n!=null},children:T})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(eN,{location:n.location,revalidation:n.revalidation,component:E,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var iI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(iI||{}),oI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(oI||{});function rN(t){let e=O.useContext(ld);return e||Ve(!1),e}function sN(t){let e=O.useContext(nI);return e||Ve(!1),e}function iN(t){let e=O.useContext(Nr);return e||Ve(!1),e}function aI(t){let e=iN(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function oN(){var t;let e=O.useContext(rI),n=sN(),r=aI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aN(){let{router:t}=rN(iI.UseNavigateStable),e=aI(oI.UseNavigateStable),n=O.useRef(!1);return sI(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Dl({fromRouteId:e},i)))},[t,e])}const A0={};function lN(t,e,n){A0[t]||(A0[t]=!0)}function cN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function uN(t){let{to:e,replace:n,state:r,relative:s}=t;Wo()||Ve(!1);let{future:i,static:o}=O.useContext(Rr),{matches:a}=O.useContext(Nr),{pathname:l}=Ho(),c=Gg(),h=Yg(e,qg(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function hN(t){return KR(t.context)}function vn(t){Ve(!1)}function dN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ts.Pop,navigator:i,static:o=!1,future:a}=t;Wo()&&Ve(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:i,static:o,future:Dl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Bo(r));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:v="default"}=r,E=O.useMemo(()=>{let b=Po(h,l);return b==null?null:{location:{pathname:b,search:d,hash:f,state:m,key:v},navigationType:s}},[l,h,d,f,m,v,s]);return E==null?null:O.createElement(Rr.Provider,{value:c},O.createElement(cd.Provider,{children:n,value:E}))}function fN(t){let{children:e,location:n}=t;return QR(sm(e),n)}new Promise(()=>{});function sm(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,sm(r.props.children,i));return}r.type!==vn&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=sm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ph.apply(this,arguments)}function lI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mN(t,e){return t.button===0&&(!e||e==="_self")&&!pN(t)}const gN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_N="6";try{window.__reactRouterVersion=_N}catch{}const vN=O.createContext({isTransitioning:!1}),wN="startTransition",C0=lA[wN];function xN(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=wR({window:s,v5Compat:!0}));let o=i.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=O.useCallback(d=>{c&&C0?C0(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>cN(r),[r]),O.createElement(dN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const EN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bN=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=lI(e,gN),{basename:m}=O.useContext(Rr),v,E=!1;if(typeof c=="string"&&TN.test(c)&&(v=c,EN))try{let T=new URL(window.location.href),R=c.startsWith("//")?new URL(T.protocol+c):new URL(c),D=Po(R.pathname,m);R.origin===T.origin&&D!=null?c=D+R.search+R.hash:E=!0}catch{}let b=qR(c,{relative:s}),y=kN(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:d});function w(T){r&&r(T),T.defaultPrevented||y(T)}return O.createElement("a",ph({},f,{href:v||b,onClick:E||i?r:w,ref:n,target:l}))}),IN=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=lI(e,yN),f=ud(l,{relative:d.relative}),m=Ho(),v=O.useContext(nI),{navigator:E,basename:b}=O.useContext(Rr),y=v!=null&&PN(f)&&c===!0,w=E.encodeLocation?E.encodeLocation(f).pathname:f.pathname,T=m.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(T=T.toLowerCase(),R=R?R.toLowerCase():null,w=w.toLowerCase()),R&&b&&(R=Po(R,b)||R);const D=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let L=T===w||!o&&T.startsWith(w)&&T.charAt(D)==="/",I=R!=null&&(R===w||!o&&R.startsWith(w)&&R.charAt(w.length)==="/"),_={isActive:L,isPending:I,isTransitioning:y},k=L?r:void 0,P;typeof i=="function"?P=i(_):P=[i,L?"active":null,I?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let C=typeof a=="function"?a(_):a;return O.createElement(bN,ph({},d,{"aria-current":k,className:P,ref:n,style:C,to:l,viewTransition:c}),typeof h=="function"?h(_):h)});var im;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(im||(im={}));var R0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(R0||(R0={}));function SN(t){let e=O.useContext(ld);return e||Ve(!1),e}function kN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Gg(),c=Ho(),h=ud(t,{relative:o});return O.useCallback(d=>{if(mN(d,n)){d.preventDefault();let f=r!==void 0?r:fh(c)===fh(h);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function PN(t,e){e===void 0&&(e={});let n=O.useContext(vN);n==null&&Ve(!1);let{basename:r}=SN(im.useViewTransitionState),s=ud(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Po(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Po(n.nextLocation.pathname,r)||n.nextLocation.pathname;return rm(s.pathname,o)!=null||rm(s.pathname,i)!=null}const AN=()=>{};var N0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},CN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},uI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new RN;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NN=function(t){const e=cI(t);return uI.encodeByteArray(e,!0)},mh=function(t){return NN(t).replace(/\./g,"")},hI=function(t){try{return uI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=()=>DN().__FIREBASE_DEFAULTS__,MN=()=>{if(typeof process>"u"||typeof N0>"u")return;const t=N0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hI(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return AN()||ON()||MN()||LN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dI=t=>{var e,n;return(n=(e=hd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},fI=t=>{const e=dI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pI=()=>{var t;return(t=hd())==null?void 0:t.config},mI=t=>{var e;return(e=hd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[mh(JSON.stringify(n)),mh(JSON.stringify(o)),""].join(".")}const tl={};function FN(){const t={prod:[],emulator:[]};for(const e of Object.keys(tl))tl[e]?t.emulator.push(e):t.prod.push(e);return t}function jN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let D0=!1;function Qg(t,e){if(typeof window>"u"||typeof document>"u"||!Ls(window.location.host)||tl[t]===e||tl[t]||D0)return;tl[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=FN().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{D0=!0,o()},f}function h(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=jN(r),m=n("text"),v=document.getElementById(m)||document.createElement("span"),E=n("learnmore"),b=document.getElementById(E)||document.createElement("a"),y=n("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const T=f.element;a(T),h(b,E);const R=c();l(w,y),T.append(w,v,b,R),document.body.appendChild(T)}i?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function zN(){var e;const t=(e=hd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $N(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qN(){return!zN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YN(){try{return typeof indexedDB=="object"}catch{return!1}}function GN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KN,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?QN(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ar(s,a,r)}}function QN(t,e){return t.replace(XN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const XN=/\{\$([^}]+)}/g;function JN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(O0(i)&&O0(o)){if(!gi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function O0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ZN(t,e){const n=new eD(t,e);return n.subscribe.bind(n)}class eD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Mf),s.error===void 0&&(s.error=Mf),s.complete===void 0&&(s.complete=Mf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return t&&t._delegate?t._delegate:t}class bs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sD(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rD(t){return t===Xs?void 0:t}function sD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const oD={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},aD=oe.INFO,lD={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},cD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xg{constructor(e){this.name=e,this._logLevel=aD,this._logHandler=cD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const uD=(t,e)=>e.some(n=>t instanceof n);let M0,L0;function hD(){return M0||(M0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dD(){return L0||(L0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yI=new WeakMap,om=new WeakMap,_I=new WeakMap,Lf=new WeakMap,Jg=new WeakMap;function fD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&yI.set(n,t)}).catch(()=>{}),Jg.set(e,t),e}function pD(t){if(om.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});om.set(t,e)}let am={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return om.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_I.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mD(t){am=t(am)}function gD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vf(this),e,...n);return _I.set(r,e.sort?e.sort():[e]),gs(r)}:dD().includes(t)?function(...e){return t.apply(Vf(this),e),gs(yI.get(this))}:function(...e){return gs(t.apply(Vf(this),e))}}function yD(t){return typeof t=="function"?gD(t):(t instanceof IDBTransaction&&pD(t),uD(t,hD())?new Proxy(t,am):t)}function gs(t){if(t instanceof IDBRequest)return fD(t);if(Lf.has(t))return Lf.get(t);const e=yD(t);return e!==t&&(Lf.set(t,e),Jg.set(e,t)),e}const Vf=t=>Jg.get(t);function _D(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=gs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gs(o.result),l.oldVersion,l.newVersion,gs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const vD=["get","getKey","getAll","getAllKeys","count"],wD=["put","add","delete","clear"],Ff=new Map;function V0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ff.get(e))return Ff.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=wD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Ff.set(e,i),i}mD(t=>({...t,get:(e,n,r)=>V0(e,n)||t.get(e,n,r),has:(e,n)=>!!V0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ED(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ED(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lm="@firebase/app",F0="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Xg("@firebase/app"),TD="@firebase/app-compat",bD="@firebase/analytics-compat",ID="@firebase/analytics",SD="@firebase/app-check-compat",kD="@firebase/app-check",PD="@firebase/auth",AD="@firebase/auth-compat",CD="@firebase/database",RD="@firebase/data-connect",ND="@firebase/database-compat",DD="@firebase/functions",OD="@firebase/functions-compat",MD="@firebase/installations",LD="@firebase/installations-compat",VD="@firebase/messaging",FD="@firebase/messaging-compat",jD="@firebase/performance",UD="@firebase/performance-compat",zD="@firebase/remote-config",BD="@firebase/remote-config-compat",WD="@firebase/storage",HD="@firebase/storage-compat",$D="@firebase/firestore",qD="@firebase/ai",YD="@firebase/firestore-compat",GD="firebase",KD="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="[DEFAULT]",QD={[lm]:"fire-core",[TD]:"fire-core-compat",[ID]:"fire-analytics",[bD]:"fire-analytics-compat",[kD]:"fire-app-check",[SD]:"fire-app-check-compat",[PD]:"fire-auth",[AD]:"fire-auth-compat",[CD]:"fire-rtdb",[RD]:"fire-data-connect",[ND]:"fire-rtdb-compat",[DD]:"fire-fn",[OD]:"fire-fn-compat",[MD]:"fire-iid",[LD]:"fire-iid-compat",[VD]:"fire-fcm",[FD]:"fire-fcm-compat",[jD]:"fire-perf",[UD]:"fire-perf-compat",[zD]:"fire-rc",[BD]:"fire-rc-compat",[WD]:"fire-gcs",[HD]:"fire-gcs-compat",[$D]:"fire-fst",[YD]:"fire-fst-compat",[qD]:"fire-vertex","fire-js":"fire-js",[GD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Map,XD=new Map,um=new Map;function j0(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yi(t){const e=t.name;if(um.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;um.set(e,t);for(const n of Ol.values())j0(n,t);for(const n of XD.values())j0(n,t);return!0}function dd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new rc("app","Firebase",JD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=KD;function vI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:cm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ys.create("bad-app-name",{appName:String(s)});if(n||(n=pI()),!n)throw ys.create("no-options");const i=Ol.get(s);if(i){if(gi(n,i.options)&&gi(r,i.config))return i;throw ys.create("duplicate-app",{appName:s})}const o=new iD(s);for(const l of um.values())o.addComponent(l);const a=new ZD(n,r,o);return Ol.set(s,a),a}function Zg(t=cm){const e=Ol.get(t);if(!e&&t===cm&&pI())return vI();if(!e)throw ys.create("no-app",{appName:t});return e}function U0(){return Array.from(Ol.values())}function Qn(t,e,n){let r=QD[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(o.join(" "));return}yi(new bs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="firebase-heartbeat-database",t2=1,Ml="firebase-heartbeat-store";let jf=null;function wI(){return jf||(jf=_D(e2,t2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),jf}async function n2(t){try{const n=(await wI()).transaction(Ml),r=await n.objectStore(Ml).get(xI(t));return await n.done,r}catch(e){if(e instanceof ar)Ir.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(n.message)}}}async function z0(t,e){try{const r=(await wI()).transaction(Ml,"readwrite");await r.objectStore(Ml).put(e,xI(t)),await r.done}catch(n){if(n instanceof ar)Ir.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ir.warn(r.message)}}}function xI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1024,s2=30;class i2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=B0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>s2){const o=l2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B0(),{heartbeatsToSend:r,unsentEntries:s}=o2(this._heartbeatsCache.heartbeats),i=mh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ir.warn(n),""}}}function B0(){return new Date().toISOString().substring(0,10)}function o2(t,e=r2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),W0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),W0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YN()?GN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function W0(t){return mh(JSON.stringify({version:2,heartbeats:t})).length}function l2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){yi(new bs("platform-logger",e=>new xD(e),"PRIVATE")),yi(new bs("heartbeat",e=>new i2(e),"PRIVATE")),Qn(lm,F0,t),Qn(lm,F0,"esm2020"),Qn("fire-js","")}c2("");function EI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u2=EI,TI=new rc("auth","Firebase",EI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Xg("@firebase/auth");function h2(t,...e){gh.logLevel<=oe.WARN&&gh.warn(`Auth (${Si}): ${t}`,...e)}function Pu(t,...e){gh.logLevel<=oe.ERROR&&gh.error(`Auth (${Si}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw ey(t,...e)}function Xn(t,...e){return ey(t,...e)}function bI(t,e,n){const r={...u2(),[e]:n};return new rc("auth","Firebase",r).create(e,{appName:t.name})}function Jn(t){return bI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ey(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TI.create(t,...e)}function Q(t,e,...n){if(!t)throw ey(e,...n)}function _r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pu(e),new Error(e)}function Sr(t,e){t||_r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function d2(){return H0()==="http:"||H0()==="https:"}function H0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d2()||WN()||"connection"in navigator)?navigator.onLine:!0}function p2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=UN()||HN()}get(){return f2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y2=new ic(3e4,6e4);function Vs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fs(t,e,n,r,s={}){return SI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=sc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return BN()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ls(t.emulatorConfig.host)&&(c.credentials="include"),II.fetch()(await kI(t,t.config.apiHost,n,a),c)})}async function SI(t,e,n){t._canInitEmulator=!1;const r={...m2,...e};try{const s=new v2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Yc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Yc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Yc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw bI(t,h,c);Rn(t,h)}}catch(s){if(s instanceof ar)throw s;Rn(t,"network-request-failed",{message:String(s)})}}async function oc(t,e,n,r,s={}){const i=await Fs(t,e,n,r,s);return"mfaPendingCredential"in i&&Rn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function kI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?ty(t.config,s):`${t.config.apiScheme}://${s}`;return g2.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function _2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class v2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xn(this.auth,"network-request-failed")),y2.get())})}}function Yc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Xn(t,e,r);return s.customData._tokenResponse=n,s}function $0(t){return t!==void 0&&t.enterprise!==void 0}class w2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x2(t,e){return Fs(t,"GET","/v2/recaptchaConfig",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e){return Fs(t,"POST","/v1/accounts:delete",e)}async function yh(t,e){return Fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T2(t,e=!1){const n=nt(t),r=await n.getIdToken(e),s=ny(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:nl(Uf(s.auth_time)),issuedAtTime:nl(Uf(s.iat)),expirationTime:nl(Uf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Uf(t){return Number(t)*1e3}function ny(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const s=hI(n);return s?JSON.parse(s):(Pu("Failed to decode base64 JWT payload"),null)}catch(s){return Pu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function q0(t){const e=ny(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&b2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function b2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Ll(t,yh(e,{idToken:n}));Q(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(d=s.providerUserInfo)!=null&&d.length?PI(s.providerUserInfo):[],o=k2(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new dm(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function S2(t){const e=nt(t);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function PI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e){const n=await SI(t,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await kI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ls(t.emulatorConfig.host)&&(l.credentials="include"),II.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function A2(t,e){return Fs(t,"POST","/v2/accounts:revokeToken",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=q0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await P2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new fo;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return _r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new I2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T2(this,e)}reload(){return S2(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _h(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bt(this.auth.app))return Promise.reject(Jn(this.auth));const e=await this.getIdToken();return await Ll(this,E2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:m,providerData:v,stsTokenManager:E}=n;Q(d&&E,e,"internal-error");const b=fo.fromJSON(this.name,E);Q(typeof d=="string",e,"internal-error"),zr(r,e.name),zr(s,e.name),Q(typeof f=="boolean",e,"internal-error"),Q(typeof m=="boolean",e,"internal-error"),zr(i,e.name),zr(o,e.name),zr(a,e.name),zr(l,e.name),zr(c,e.name),zr(h,e.name);const y=new Tn({uid:d,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:h});return v&&Array.isArray(v)&&(y.providerData=v.map(w=>({...w}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(e,n,r=!1){const s=new fo;s.updateFromServerResponse(n);const i=new Tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await _h(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?PI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new fo;a.updateFromIdToken(r);const l=new Tn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new dm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map;function vr(t){Sr(t instanceof Function,"Expected a class definition");let e=Y0.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Y0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}AI.type="NONE";const G0=AI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class po{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Au(this.userKey,s.apiKey,i),this.fullPersistenceKey=Au("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yh(this.auth,{idToken:e}).catch(()=>{});return n?Tn._fromGetAccountInfoResponse(this.auth,n,e):null}return Tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new po(vr(G0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||vr(G0);const o=Au(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const f=await yh(e,{idToken:h}).catch(()=>{});if(!f)break;d=await Tn._fromGetAccountInfoResponse(e,f,h)}else d=Tn._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new po(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new po(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MI(e))return"Blackberry";if(LI(e))return"Webos";if(RI(e))return"Safari";if((e.includes("chrome/")||NI(e))&&!e.includes("edge/"))return"Chrome";if(OI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CI(t=At()){return/firefox\//i.test(t)}function RI(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NI(t=At()){return/crios\//i.test(t)}function DI(t=At()){return/iemobile/i.test(t)}function OI(t=At()){return/android/i.test(t)}function MI(t=At()){return/blackberry/i.test(t)}function LI(t=At()){return/webos/i.test(t)}function ry(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function C2(t=At()){var e;return ry(t)&&!!((e=window.navigator)!=null&&e.standalone)}function R2(){return $N()&&document.documentMode===10}function VI(t=At()){return ry(t)||OI(t)||LI(t)||MI(t)||/windows phone/i.test(t)||DI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e=[]){let n;switch(t){case"Browser":n=K0(At());break;case"Worker":n=`${K0(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Si}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e={}){return Fs(t,"GET","/v2/passwordPolicy",Vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=6;class M2{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??O2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Q0(this),this.idTokenSubscription=new Q0(this),this.beforeStateQueue=new N2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await po.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yh(this,{idToken:e}),r=await Tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Bt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bt(this.app))return Promise.reject(Jn(this));const n=e?nt(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bt(this.app)?Promise.reject(Jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bt(this.app)?Promise.reject(Jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D2(this),n=new M2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await A2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&h2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function js(t){return nt(t)}class Q0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZN(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V2(t){fd=t}function jI(t){return fd.loadJS(t)}function F2(){return fd.recaptchaEnterpriseScript}function j2(){return fd.gapiScript}function U2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class z2{constructor(){this.enterprise=new B2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class B2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const W2="recaptcha-enterprise",UI="NO_RECAPTCHA";class H2{constructor(e){this.type=W2,this.auth=js(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{x2(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new w2(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;$0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(UI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new z2().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&$0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=F2();l.length!==0&&(l+=a),jI(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function X0(t,e,n,r=!1,s=!1){const i=new H2(t);let o;if(s)o=UI;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function fm(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await X0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await X0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t,e){const n=dd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(gi(i,e??{}))return s;Rn(s,"already-initialized")}return n.initialize({options:e})}function q2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Y2(t,e,n){const r=js(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=zI(e),{host:o,port:a}=G2(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(gi(c,r.config.emulator)&&gi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ls(o)?(Kg(`${i}//${o}${l}`),Qg("Auth",!0)):K2()}function zI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function G2(t){const e=zI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:J0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:J0(o)}}}function J0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function K2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,n){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function Q2(t,e){return Fs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return oc(t,"POST","/v1/accounts:signInWithPassword",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t,e){return oc(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}async function Z2(t,e){return oc(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends sy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Vl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(e,n,"signInWithPassword",X2);case"emailLink":return J2(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(e,r,"signUpPassword",Q2);case"emailLink":return Z2(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t,e){return oc(t,"POST","/v1/accounts:signInWithIdp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="http://localhost";class _i extends sy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new _i(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mo(e,n)}buildRequest(){const e={requestUri:eO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nO(t){const e=Fa(ja(t)).link,n=e?Fa(ja(e)).deep_link_id:null,r=Fa(ja(t)).deep_link_id;return(r?Fa(ja(r)).link:null)||r||n||e||t}class iy{constructor(e){const n=Fa(ja(e)),r=n.apiKey??null,s=n.oobCode??null,i=tO(n.mode??null);Q(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=nO(e);try{return new iy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.providerId=$o.PROVIDER_ID}static credential(e,n){return Vl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=iy.parseLink(n);return Q(r,"argument-error"),Vl._fromEmailAndCode(e,r.code,r.tenantId)}}$o.PROVIDER_ID="password";$o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends BI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends ac{constructor(){super("facebook.com")}static credential(e){return _i._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _i._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Kr.credential(n,r)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends ac{constructor(){super("github.com")}static credential(e){return _i._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends ac{constructor(){super("twitter.com")}static credential(e,n){return _i._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,e){return oc(t,"POST","/v1/accounts:signUp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tn._fromIdTokenResponse(e,r,s),o=Z0(r);return new kr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Z0(r);return new kr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Z0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t){var s;if(Bt(t.app))return Promise.reject(Jn(t));const e=js(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new kr({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await WI(e,{returnSecureToken:!0}),r=await kr._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends ar{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new vh(e,n,r,s)}}function HI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(t,i,e,r):i})}async function sO(t,e,n=!1){const r=await Ll(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(t,e,n=!1){const{auth:r}=t;if(Bt(r.app))return Promise.reject(Jn(r));const s="reauthenticate";try{const i=await Ll(t,HI(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=ny(i.idToken);Q(o,r,"internal-error");const{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),kr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Rn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(t,e,n=!1){if(Bt(t.app))return Promise.reject(Jn(t));const r="signIn",s=await HI(t,r,e),i=await kr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function oO(t,e){return $I(js(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t){const e=js(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aO(t,e,n){if(Bt(t.app))return Promise.reject(Jn(t));const r=js(t),o=await fm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WI).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qI(t),l}),a=await kr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function lO(t,e,n){return Bt(t.app)?Promise.reject(Jn(t)):oO(nt(t),$o.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qI(t),r})}function cO(t,e,n,r){return nt(t).onIdTokenChanged(e,n,r)}function uO(t,e,n){return nt(t).beforeAuthStateChanged(e,n)}function hO(t,e,n,r){return nt(t).onAuthStateChanged(e,n,r)}function dO(t){return nt(t).signOut()}const wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=1e3,pO=10;class GI extends YI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);R2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pO):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}GI.type="LOCAL";const mO=GI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI extends YI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KI.type="SESSION";const QI=KI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await gO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=oy("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function _O(t){Zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function vO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function xO(){return XI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="firebaseLocalStorageDb",EO=1,xh="firebaseLocalStorage",ZI="fbase_key";class lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function md(t,e){return t.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function TO(){const t=indexedDB.deleteDatabase(JI);return new lc(t).toPromise()}function pm(){const t=indexedDB.open(JI,EO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xh,{keyPath:ZI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xh)?e(r):(r.close(),await TO(),e(await pm()))})})}async function ew(t,e,n){const r=md(t,!0).put({[ZI]:e,value:n});return new lc(r).toPromise()}async function bO(t,e){const n=md(t,!1).get(e),r=await new lc(n).toPromise();return r===void 0?null:r.value}function tw(t,e){const n=md(t,!0).delete(e);return new lc(n).toPromise()}const IO=800,SO=3;class e1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(xO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await vO(),!this.activeServiceWorker)return;this.sender=new yO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pm();return await ew(e,wh,"1"),await tw(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ew(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=md(s,!1).getAll();return new lc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e1.type="LOCAL";const kO=e1;new ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t,e){return e?vr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay extends sy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AO(t){return $I(t.auth,new ay(t),t.bypassAuthState)}function CO(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),iO(n,new ay(t),t.bypassAuthState)}async function RO(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),sO(n,new ay(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AO;case"linkViaPopup":case"linkViaRedirect":return RO;case"reauthViaPopup":case"reauthViaRedirect":return CO;default:Rn(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new ic(2e3,1e4);class so extends t1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=oy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NO.get())};e()}}so.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO="pendingRedirect",Cu=new Map;class OO extends t1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const r=await MO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MO(t,e){const n=FO(e),r=VO(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function LO(t,e){Cu.set(t._key(),e)}function VO(t){return vr(t._redirectPersistence)}function FO(t){return Au(DO,t.config.apiKey,t.name)}async function jO(t,e,n=!1){if(Bt(t.app))return Promise.reject(Jn(t));const r=js(t),s=PO(r,e),o=await new OO(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=10*60*1e3;class zO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!n1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UO&&this.cachedEventUids.clear(),this.cachedEventUids.has(nw(e))}saveEventToCache(e){this.cachedEventUids.add(nw(e)),this.lastProcessedEventTime=Date.now()}}function nw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(t,e={}){return Fs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$O=/^https?/;async function qO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WO(t);for(const n of e)try{if(YO(n))return}catch{}Rn(t,"unauthorized-domain")}function YO(t){const e=hm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$O.test(n))return!1;if(HO.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new ic(3e4,6e4);function rw(){const t=Zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KO(t){return new Promise((e,n)=>{var s,i,o;function r(){rw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rw(),n(Xn(t,"network-request-failed"))},timeout:GO.get()})}if((i=(s=Zn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Zn().gapi)!=null&&o.load)r();else{const a=U2("iframefcb");return Zn()[a]=()=>{gapi.load?r():n(Xn(t,"network-request-failed"))},jI(`${j2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function QO(t){return Ru=Ru||KO(t),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=new ic(5e3,15e3),JO="__/auth/iframe",ZO="emulator/auth/iframe",eM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nM(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ty(e,ZO):`https://${t.config.authDomain}/${JO}`,r={apiKey:e.apiKey,appName:t.name,v:Si},s=tM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${sc(r).slice(1)}`}async function rM(t){const e=await QO(t),n=Zn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:nM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Xn(t,"network-request-failed"),a=Zn().setTimeout(()=>{i(o)},XO.get());function l(){Zn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iM=500,oM=600,aM="_blank",lM="http://localhost";class sw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cM(t,e,n,r=iM,s=oM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...sM,width:r.toString(),height:s.toString(),top:i,left:o},c=At().toLowerCase();n&&(a=NI(c)?aM:n),CI(c)&&(e=e||lM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(C2(c)&&a!=="_self")return uM(e||"",a),new sw(null);const d=window.open(e||"",a,h);Q(d,t,"popup-blocked");try{d.focus()}catch{}return new sw(d)}function uM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="__/auth/handler",dM="emulator/auth/handler",fM=encodeURIComponent("fac");async function iw(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Si,eventId:s};if(e instanceof BI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof ac){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${fM}=${encodeURIComponent(l)}`:"";return`${pM(t)}?${sc(a).slice(1)}${c}`}function pM({config:t}){return t.emulator?ty(t,dM):`https://${t.authDomain}/${hM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="webStorageSupport";class mM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QI,this._completeRedirectFn=jO,this._overrideRedirectResult=LO}async _openPopup(e,n,r,s){var o;Sr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await iw(e,n,r,hm(),s);return cM(e,i,oy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await iw(e,n,r,hm(),s);return _O(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rM(e),r=new zO(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zf,{type:zf},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[zf];i!==void 0&&n(!!i),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VI()||RI()||ry()}}const gM=mM;var ow="@firebase/auth",aw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vM(t){yi(new bs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FI(t)},c=new L2(r,s,i,l);return q2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yi(new bs("auth-internal",e=>{const n=js(e.getProvider("auth").getImmediate());return(r=>new yM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(ow,aw,_M(t)),Qn(ow,aw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=5*60,xM=mI("authIdTokenMaxAge")||wM;let lw=null;const EM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xM)return;const s=n==null?void 0:n.token;lw!==s&&(lw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function TM(t=Zg()){const e=dd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$2(t,{popupRedirectResolver:gM,persistence:[kO,mO,QI]}),r=mI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=EM(i.toString());uO(n,o,()=>o(n.currentUser)),cO(n,a=>o(a))}}const s=dI("auth");return s&&Y2(n,`http://${s}`),n}function bM(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}V2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Xn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",bM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vM("Browser");var IM="firebase",SM="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(IM,SM,"app");var cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,r1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function k(){}k.prototype=_.prototype,I.F=_.prototype,I.prototype=new k,I.prototype.constructor=I,I.D=function(P,C,N){for(var A=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)A[ie-2]=arguments[ie];return _.prototype[C].apply(P,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,k){k||(k=0);const P=Array(16);if(typeof _=="string")for(var C=0;C<16;++C)P[C]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(C=0;C<16;++C)P[C]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=I.g[0],k=I.g[1],C=I.g[2];let N=I.g[3],A;A=_+(N^k&(C^N))+P[0]+3614090360&4294967295,_=k+(A<<7&4294967295|A>>>25),A=N+(C^_&(k^C))+P[1]+3905402710&4294967295,N=_+(A<<12&4294967295|A>>>20),A=C+(k^N&(_^k))+P[2]+606105819&4294967295,C=N+(A<<17&4294967295|A>>>15),A=k+(_^C&(N^_))+P[3]+3250441966&4294967295,k=C+(A<<22&4294967295|A>>>10),A=_+(N^k&(C^N))+P[4]+4118548399&4294967295,_=k+(A<<7&4294967295|A>>>25),A=N+(C^_&(k^C))+P[5]+1200080426&4294967295,N=_+(A<<12&4294967295|A>>>20),A=C+(k^N&(_^k))+P[6]+2821735955&4294967295,C=N+(A<<17&4294967295|A>>>15),A=k+(_^C&(N^_))+P[7]+4249261313&4294967295,k=C+(A<<22&4294967295|A>>>10),A=_+(N^k&(C^N))+P[8]+1770035416&4294967295,_=k+(A<<7&4294967295|A>>>25),A=N+(C^_&(k^C))+P[9]+2336552879&4294967295,N=_+(A<<12&4294967295|A>>>20),A=C+(k^N&(_^k))+P[10]+4294925233&4294967295,C=N+(A<<17&4294967295|A>>>15),A=k+(_^C&(N^_))+P[11]+2304563134&4294967295,k=C+(A<<22&4294967295|A>>>10),A=_+(N^k&(C^N))+P[12]+1804603682&4294967295,_=k+(A<<7&4294967295|A>>>25),A=N+(C^_&(k^C))+P[13]+4254626195&4294967295,N=_+(A<<12&4294967295|A>>>20),A=C+(k^N&(_^k))+P[14]+2792965006&4294967295,C=N+(A<<17&4294967295|A>>>15),A=k+(_^C&(N^_))+P[15]+1236535329&4294967295,k=C+(A<<22&4294967295|A>>>10),A=_+(C^N&(k^C))+P[1]+4129170786&4294967295,_=k+(A<<5&4294967295|A>>>27),A=N+(k^C&(_^k))+P[6]+3225465664&4294967295,N=_+(A<<9&4294967295|A>>>23),A=C+(_^k&(N^_))+P[11]+643717713&4294967295,C=N+(A<<14&4294967295|A>>>18),A=k+(N^_&(C^N))+P[0]+3921069994&4294967295,k=C+(A<<20&4294967295|A>>>12),A=_+(C^N&(k^C))+P[5]+3593408605&4294967295,_=k+(A<<5&4294967295|A>>>27),A=N+(k^C&(_^k))+P[10]+38016083&4294967295,N=_+(A<<9&4294967295|A>>>23),A=C+(_^k&(N^_))+P[15]+3634488961&4294967295,C=N+(A<<14&4294967295|A>>>18),A=k+(N^_&(C^N))+P[4]+3889429448&4294967295,k=C+(A<<20&4294967295|A>>>12),A=_+(C^N&(k^C))+P[9]+568446438&4294967295,_=k+(A<<5&4294967295|A>>>27),A=N+(k^C&(_^k))+P[14]+3275163606&4294967295,N=_+(A<<9&4294967295|A>>>23),A=C+(_^k&(N^_))+P[3]+4107603335&4294967295,C=N+(A<<14&4294967295|A>>>18),A=k+(N^_&(C^N))+P[8]+1163531501&4294967295,k=C+(A<<20&4294967295|A>>>12),A=_+(C^N&(k^C))+P[13]+2850285829&4294967295,_=k+(A<<5&4294967295|A>>>27),A=N+(k^C&(_^k))+P[2]+4243563512&4294967295,N=_+(A<<9&4294967295|A>>>23),A=C+(_^k&(N^_))+P[7]+1735328473&4294967295,C=N+(A<<14&4294967295|A>>>18),A=k+(N^_&(C^N))+P[12]+2368359562&4294967295,k=C+(A<<20&4294967295|A>>>12),A=_+(k^C^N)+P[5]+4294588738&4294967295,_=k+(A<<4&4294967295|A>>>28),A=N+(_^k^C)+P[8]+2272392833&4294967295,N=_+(A<<11&4294967295|A>>>21),A=C+(N^_^k)+P[11]+1839030562&4294967295,C=N+(A<<16&4294967295|A>>>16),A=k+(C^N^_)+P[14]+4259657740&4294967295,k=C+(A<<23&4294967295|A>>>9),A=_+(k^C^N)+P[1]+2763975236&4294967295,_=k+(A<<4&4294967295|A>>>28),A=N+(_^k^C)+P[4]+1272893353&4294967295,N=_+(A<<11&4294967295|A>>>21),A=C+(N^_^k)+P[7]+4139469664&4294967295,C=N+(A<<16&4294967295|A>>>16),A=k+(C^N^_)+P[10]+3200236656&4294967295,k=C+(A<<23&4294967295|A>>>9),A=_+(k^C^N)+P[13]+681279174&4294967295,_=k+(A<<4&4294967295|A>>>28),A=N+(_^k^C)+P[0]+3936430074&4294967295,N=_+(A<<11&4294967295|A>>>21),A=C+(N^_^k)+P[3]+3572445317&4294967295,C=N+(A<<16&4294967295|A>>>16),A=k+(C^N^_)+P[6]+76029189&4294967295,k=C+(A<<23&4294967295|A>>>9),A=_+(k^C^N)+P[9]+3654602809&4294967295,_=k+(A<<4&4294967295|A>>>28),A=N+(_^k^C)+P[12]+3873151461&4294967295,N=_+(A<<11&4294967295|A>>>21),A=C+(N^_^k)+P[15]+530742520&4294967295,C=N+(A<<16&4294967295|A>>>16),A=k+(C^N^_)+P[2]+3299628645&4294967295,k=C+(A<<23&4294967295|A>>>9),A=_+(C^(k|~N))+P[0]+4096336452&4294967295,_=k+(A<<6&4294967295|A>>>26),A=N+(k^(_|~C))+P[7]+1126891415&4294967295,N=_+(A<<10&4294967295|A>>>22),A=C+(_^(N|~k))+P[14]+2878612391&4294967295,C=N+(A<<15&4294967295|A>>>17),A=k+(N^(C|~_))+P[5]+4237533241&4294967295,k=C+(A<<21&4294967295|A>>>11),A=_+(C^(k|~N))+P[12]+1700485571&4294967295,_=k+(A<<6&4294967295|A>>>26),A=N+(k^(_|~C))+P[3]+2399980690&4294967295,N=_+(A<<10&4294967295|A>>>22),A=C+(_^(N|~k))+P[10]+4293915773&4294967295,C=N+(A<<15&4294967295|A>>>17),A=k+(N^(C|~_))+P[1]+2240044497&4294967295,k=C+(A<<21&4294967295|A>>>11),A=_+(C^(k|~N))+P[8]+1873313359&4294967295,_=k+(A<<6&4294967295|A>>>26),A=N+(k^(_|~C))+P[15]+4264355552&4294967295,N=_+(A<<10&4294967295|A>>>22),A=C+(_^(N|~k))+P[6]+2734768916&4294967295,C=N+(A<<15&4294967295|A>>>17),A=k+(N^(C|~_))+P[13]+1309151649&4294967295,k=C+(A<<21&4294967295|A>>>11),A=_+(C^(k|~N))+P[4]+4149444226&4294967295,_=k+(A<<6&4294967295|A>>>26),A=N+(k^(_|~C))+P[11]+3174756917&4294967295,N=_+(A<<10&4294967295|A>>>22),A=C+(_^(N|~k))+P[2]+718787259&4294967295,C=N+(A<<15&4294967295|A>>>17),A=k+(N^(C|~_))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.v=function(I,_){_===void 0&&(_=I.length);const k=_-this.blockSize,P=this.C;let C=this.h,N=0;for(;N<_;){if(C==0)for(;N<=k;)s(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<_;)if(P[C++]=I.charCodeAt(N++),C==this.blockSize){s(this,P),C=0;break}}else for(;N<_;)if(P[C++]=I[N++],C==this.blockSize){s(this,P),C=0;break}}this.h=C,this.o+=_},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;_=this.o*8;for(var k=I.length-8;k<I.length;++k)I[k]=_&255,_/=256;for(this.v(I),I=Array(16),_=0,k=0;k<4;++k)for(let P=0;P<32;P+=8)I[_++]=this.g[k]>>>P&255;return I};function i(I,_){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=_(I)}function o(I,_){this.h=_;const k=[];let P=!0;for(let C=I.length-1;C>=0;C--){const N=I[C]|0;P&&N==_||(k[C]=N,P=!1)}this.g=k}var a={};function l(I){return-128<=I&&I<128?i(I,function(_){return new o([_|0],_<0?-1:0)}):new o([I|0],I<0?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(I<0)return b(c(-I));const _=[];let k=1;for(let P=0;I>=k;P++)_[P]=I/k|0,k*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return b(h(I.substring(1),_));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=c(Math.pow(_,8));let P=d;for(let N=0;N<I.length;N+=8){var C=Math.min(8,I.length-N);const A=parseInt(I.substring(N,N+C),_);C<8?(C=c(Math.pow(_,C)),P=P.j(C).add(c(A))):(P=P.j(k),P=P.add(c(A)))}return P}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-b(this).m();let I=0,_=1;for(let k=0;k<this.g.length;k++){const P=this.i(k);I+=(P>=0?P:4294967296+P)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(E(this))return"-"+b(this).toString(I);const _=c(Math.pow(I,6));var k=this;let P="";for(;;){const C=R(k,_).g;k=y(k,C.j(_));let N=((k.g.length>0?k.g[0]:k.h)>>>0).toString(I);if(k=C,v(k))return N+P;for(;N.length<6;)N="0"+N;P=N+P}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(let _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function E(I){return I.h==-1}t.l=function(I){return I=y(this,I),E(I)?-1:v(I)?0:1};function b(I){const _=I.g.length,k=[];for(let P=0;P<_;P++)k[P]=~I.g[P];return new o(k,~I.h).add(f)}t.abs=function(){return E(this)?b(this):this},t.add=function(I){const _=Math.max(this.g.length,I.g.length),k=[];let P=0;for(let C=0;C<=_;C++){let N=P+(this.i(C)&65535)+(I.i(C)&65535),A=(N>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);P=A>>>16,N&=65535,A&=65535,k[C]=A<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function y(I,_){return I.add(b(_))}t.j=function(I){if(v(this)||v(I))return d;if(E(this))return E(I)?b(this).j(b(I)):b(b(this).j(I));if(E(I))return b(this.j(b(I)));if(this.l(m)<0&&I.l(m)<0)return c(this.m()*I.m());const _=this.g.length+I.g.length,k=[];for(var P=0;P<2*_;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(let C=0;C<I.g.length;C++){const N=this.i(P)>>>16,A=this.i(P)&65535,ie=I.i(C)>>>16,ce=I.i(C)&65535;k[2*P+2*C]+=A*ce,w(k,2*P+2*C),k[2*P+2*C+1]+=N*ce,w(k,2*P+2*C+1),k[2*P+2*C+1]+=A*ie,w(k,2*P+2*C+1),k[2*P+2*C+2]+=N*ie,w(k,2*P+2*C+2)}for(I=0;I<_;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=_;I<2*_;I++)k[I]=0;return new o(k,0)};function w(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function T(I,_){this.g=I,this.h=_}function R(I,_){if(v(_))throw Error("division by zero");if(v(I))return new T(d,d);if(E(I))return _=R(b(I),_),new T(b(_.g),b(_.h));if(E(_))return _=R(I,b(_)),new T(b(_.g),_.h);if(I.g.length>30){if(E(I)||E(_))throw Error("slowDivide_ only works with positive integers.");for(var k=f,P=_;P.l(I)<=0;)k=D(k),P=D(P);var C=L(k,1),N=L(P,1);for(P=L(P,2),k=L(k,2);!v(P);){var A=N.add(P);A.l(I)<=0&&(C=C.add(k),N=A),P=L(P,1),k=L(k,1)}return _=y(I,C.j(_)),new T(C,_)}for(C=d;I.l(_)>=0;){for(k=Math.max(1,Math.floor(I.m()/_.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),N=c(k),A=N.j(_);E(A)||A.l(I)>0;)k-=P,N=c(k),A=N.j(_);v(N)&&(N=f),C=C.add(N),I=y(I,A)}return new T(C,I)}t.B=function(I){return R(this,I).h},t.and=function(I){const _=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<_;P++)k[P]=this.i(P)&I.i(P);return new o(k,this.h&I.h)},t.or=function(I){const _=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<_;P++)k[P]=this.i(P)|I.i(P);return new o(k,this.h|I.h)},t.xor=function(I){const _=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<_;P++)k[P]=this.i(P)^I.i(P);return new o(k,this.h^I.h)};function D(I){const _=I.g.length+1,k=[];for(let P=0;P<_;P++)k[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(k,I.h)}function L(I,_){const k=_>>5;_%=32;const P=I.g.length-k,C=[];for(let N=0;N<P;N++)C[N]=_>0?I.i(N+k)>>>_|I.i(N+k+1)<<32-_:I.i(N+k);return new o(C,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,r1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,_s=o}).apply(typeof cw<"u"?cw:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s1,Ua,i1,Nu,mm,o1,a1,l1;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var M=u[S];if(!(M in g))break e;g=g[M]}u=u[u.length-1],S=g[u],p=p(S),p!=S&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var g=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&g.push([S,p[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function l(u,p,g){return u.call.apply(u.bind,arguments)}function c(u,p,g){return c=l,c.apply(null,arguments)}function h(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function d(u,p){function g(){}g.prototype=p.prototype,u.Z=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(S,M,V){for(var W=Array(arguments.length-2),re=2;re<arguments.length;re++)W[re-2]=arguments[re];return p.prototype[M].apply(S,W)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const p=u.length;if(p>0){const g=Array(p);for(let S=0;S<p;S++)g[S]=u[S];return g}return[]}function v(u,p){for(let S=1;S<arguments.length;S++){const M=arguments[S];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=u.length||0;const V=M.length||0;u.length=g+V;for(let W=0;W<V;W++)u[g+W]=M[W]}else u.push(M)}}class E{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function b(u){o.setTimeout(()=>{throw u},0)}function y(){var u=I;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class w{constructor(){this.h=this.g=null}add(p,g){const S=T.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var T=new E(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let D,L=!1,I=new w,_=()=>{const u=Promise.resolve(void 0);D=()=>{u.then(k)}};function k(){for(var u;u=y();){try{u.h.call(u.g)}catch(g){b(g)}var p=T;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}L=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,p),o.removeEventListener("test",g,p)}catch{}return u}();function A(u){return/^[\s\xa0]*$/.test(u)}function ie(u,p){C.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}d(ie,C),ie.prototype.init=function(u,p){const g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),we=0;function Re(u,p,g,S,M){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=M,this.key=++we,this.da=this.fa=!1}function H(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function K(u,p,g){for(const S in u)p.call(g,u[S],S,u)}function z(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function ne(u){const p={};for(const g in u)p[g]=u[g];return p}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(u,p){let g,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(g in S)u[g]=S[g];for(let V=0;V<Z.length;V++)g=Z[V],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,p,g,S,M){const V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);const W=rt(u,p,S,M);return W>-1?(p=u[W],g||(p.fa=!1)):(p=new Re(p,this.src,V,!!S,M),p.fa=g,u.push(p)),p};function Kt(u,p){const g=p.type;if(g in u.g){var S=u.g[g],M=Array.prototype.indexOf.call(S,p,void 0),V;(V=M>=0)&&Array.prototype.splice.call(S,M,1),V&&(H(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function rt(u,p,g,S){for(let M=0;M<u.length;++M){const V=u[M];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==S)return M}return-1}var Dr="closure_lm_"+(Math.random()*1e6|0),Ud={};function y_(u,p,g,S,M){if(Array.isArray(p)){for(let V=0;V<p.length;V++)y_(u,p[V],g,S,M);return null}return g=w_(g),u&&u[ce]?u.J(p,g,a(S)?!!S.capture:!1,M):pP(u,p,g,!1,S,M)}function pP(u,p,g,S,M,V){if(!p)throw Error("Invalid event type");const W=a(M)?!!M.capture:!!M;let re=Bd(u);if(re||(u[Dr]=re=new Ee(u)),g=re.add(p,g,S,W,V),g.proxy)return g;if(S=mP(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)N||(M=W),M===void 0&&(M=!1),u.addEventListener(p.toString(),S,M);else if(u.attachEvent)u.attachEvent(v_(p.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function mP(){function u(g){return p.call(u.src,u.listener,g)}const p=gP;return u}function __(u,p,g,S,M){if(Array.isArray(p))for(var V=0;V<p.length;V++)__(u,p[V],g,S,M);else S=a(S)?!!S.capture:!!S,g=w_(g),u&&u[ce]?(u=u.i,V=String(p).toString(),V in u.g&&(p=u.g[V],g=rt(p,g,S,M),g>-1&&(H(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete u.g[V],u.h--)))):u&&(u=Bd(u))&&(p=u.g[p.toString()],u=-1,p&&(u=rt(p,g,S,M)),(g=u>-1?p[u]:null)&&zd(g))}function zd(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ce])Kt(p.i,u);else{var g=u.type,S=u.proxy;p.removeEventListener?p.removeEventListener(g,S,u.capture):p.detachEvent?p.detachEvent(v_(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=Bd(p))?(Kt(g,u),g.h==0&&(g.src=null,p[Dr]=null)):H(u)}}}function v_(u){return u in Ud?Ud[u]:Ud[u]="on"+u}function gP(u,p){if(u.da)u=!0;else{p=new ie(p,this);const g=u.listener,S=u.ha||u.src;u.fa&&zd(u),u=g.call(S,p)}return u}function Bd(u){return u=u[Dr],u instanceof Ee?u:null}var Wd="__closure_events_fn_"+(Math.random()*1e9>>>0);function w_(u){return typeof u=="function"?u:(u[Wd]||(u[Wd]=function(p){return u.handleEvent(p)}),u[Wd])}function wt(){P.call(this),this.i=new Ee(this),this.M=this,this.G=null}d(wt,P),wt.prototype[ce]=!0,wt.prototype.removeEventListener=function(u,p,g,S){__(this,u,p,g,S)};function Rt(u,p){var g,S=u.G;if(S)for(g=[];S;S=S.G)g.push(S);if(u=u.M,S=p.type||p,typeof p=="string")p=new C(p,u);else if(p instanceof C)p.target=p.target||u;else{var M=p;p=new C(S,u),ge(p,M)}M=!0;let V,W;if(g)for(W=g.length-1;W>=0;W--)V=p.g=g[W],M=_c(V,S,!0,p)&&M;if(V=p.g=u,M=_c(V,S,!0,p)&&M,M=_c(V,S,!1,p)&&M,g)for(W=0;W<g.length;W++)V=p.g=g[W],M=_c(V,S,!1,p)&&M}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const g=u.g[p];for(let S=0;S<g.length;S++)H(g[S]);delete u.g[p],u.h--}}this.G=null},wt.prototype.J=function(u,p,g,S){return this.i.add(String(u),p,!1,g,S)},wt.prototype.K=function(u,p,g,S){return this.i.add(String(u),p,!0,g,S)};function _c(u,p,g,S){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let V=0;V<p.length;++V){const W=p[V];if(W&&!W.da&&W.capture==g){const re=W.listener,st=W.ha||W.src;W.fa&&Kt(u.i,W),M=re.call(st,S)!==!1&&M}}return M&&!S.defaultPrevented}function yP(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(u,p||0)}function x_(u){u.g=yP(()=>{u.g=null,u.i&&(u.i=!1,x_(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class _P extends P{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:x_(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ea(u){P.call(this),this.h=u,this.g={}}d(ea,P);var E_=[];function T_(u){K(u.g,function(p,g){this.g.hasOwnProperty(g)&&zd(p)},u),u.g={}}ea.prototype.N=function(){ea.Z.N.call(this),T_(this)},ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hd=o.JSON.stringify,vP=o.JSON.parse,wP=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function b_(){}function I_(){}var ta={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $d(){C.call(this,"d")}d($d,C);function qd(){C.call(this,"c")}d(qd,C);var zs={},S_=null;function vc(){return S_=S_||new wt}zs.Ia="serverreachability";function k_(u){C.call(this,zs.Ia,u)}d(k_,C);function na(u){const p=vc();Rt(p,new k_(p))}zs.STAT_EVENT="statevent";function P_(u,p){C.call(this,zs.STAT_EVENT,u),this.stat=p}d(P_,C);function Nt(u){const p=vc();Rt(p,new P_(p,u))}zs.Ja="timingevent";function A_(u,p){C.call(this,zs.Ja,u),this.size=p}d(A_,C);function ra(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},p)}function sa(){this.g=!0}sa.prototype.ua=function(){this.g=!1};function xP(u,p,g,S,M,V){u.info(function(){if(u.g)if(V){var W="",re=V.split("&");for(let xe=0;xe<re.length;xe++){var st=re[xe].split("=");if(st.length>1){const ct=st[0];st=st[1];const Ln=ct.split("_");W=Ln.length>=2&&Ln[1]=="type"?W+(ct+"="+st+"&"):W+(ct+"=redacted&")}}}else W=null;else W=V;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+p+`
`+g+`
`+W})}function EP(u,p,g,S,M,V,W){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+p+`
`+g+`
`+V+" "+W})}function Oi(u,p,g,S){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+bP(u,g)+(S?" "+S:"")})}function TP(u,p){u.info(function(){return"TIMEOUT: "+p})}sa.prototype.info=function(){};function bP(u,p){if(!u.g)return p;if(!p)return null;try{const V=JSON.parse(p);if(V){for(u=0;u<V.length;u++)if(Array.isArray(V[u])){var g=V[u];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var M=S[0];if(M!="noop"&&M!="stop"&&M!="close")for(let W=1;W<S.length;W++)S[W]=""}}}}return Hd(V)}catch{return p}}var wc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},C_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},R_;function Yd(){}d(Yd,b_),Yd.prototype.g=function(){return new XMLHttpRequest},R_=new Yd;function ia(u){return encodeURIComponent(String(u))}function IP(u){var p=1;u=u.split(":");const g=[];for(;p>0&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function Or(u,p,g,S){this.j=u,this.i=p,this.l=g,this.S=S||1,this.V=new ea(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new N_}function N_(){this.i=null,this.g="",this.h=!1}var D_={},Gd={};function Kd(u,p,g){u.M=1,u.A=Ec(Mn(p)),u.u=g,u.R=!0,O_(u,null)}function O_(u,p){u.F=Date.now(),xc(u),u.B=Mn(u.A);var g=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Y_(g.i,"t",S),u.C=0,g=u.j.L,u.h=new N_,u.g=hv(u.j,g?p:null,!u.u),u.P>0&&(u.O=new _P(c(u.Y,u,u.g),u.P)),p=u.V,g=u.g,S=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(E_[0]=M.toString()),M=E_);for(let V=0;V<M.length;V++){const W=y_(g,M[V],S||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=u.J?ne(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),na(),xP(u.i,u.v,u.B,u.l,u.S,u.u)}Or.prototype.ba=function(u){u=u.target;const p=this.O;p&&Vr(u)==3?p.j():this.Y(u)},Or.prototype.Y=function(u){try{if(u==this.g)e:{const re=Vr(this.g),st=this.g.ya(),xe=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||ev(this.g)))){this.K||re!=4||st==7||(st==8||xe<=0?na(3):na(2)),Qd(this);var p=this.g.ca();this.X=p;var g=SP(this);if(this.o=p==200,EP(this.i,this.v,this.B,this.l,this.S,re,p),this.o){if(this.U&&!this.L){t:{if(this.g){var S,M=this.g;if((S=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var V=S;break t}}V=null}if(u=V)Oi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xd(this,u);else{this.o=!1,this.m=3,Nt(12),Bs(this),oa(this);break e}}if(this.R){u=!0;let ct;for(;!this.K&&this.C<g.length;)if(ct=kP(this,g),ct==Gd){re==4&&(this.m=4,Nt(14),u=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==D_){this.m=4,Nt(15),Oi(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Oi(this.i,this.l,ct,null),Xd(this,ct);if(M_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||g.length!=0||this.h.h||(this.m=1,Nt(16),u=!1),this.o=this.o&&u,!u)Oi(this.i,this.l,g,"[Invalid Chunked Response]"),Bs(this),oa(this);else if(g.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),of(W),W.P=!0,Nt(11))}}else Oi(this.i,this.l,g,null),Xd(this,g);re==4&&Bs(this),this.o&&!this.K&&(re==4?av(this.j,this):(this.o=!1,xc(this)))}else zP(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),Bs(this),oa(this)}}}catch{}finally{}};function SP(u){if(!M_(u))return u.g.la();const p=ev(u.g);if(p==="")return"";let g="";const S=p.length,M=Vr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Bs(u),oa(u),"";u.h.i=new o.TextDecoder}for(let V=0;V<S;V++)u.h.h=!0,g+=u.h.i.decode(p[V],{stream:!(M&&V==S-1)});return p.length=0,u.h.g+=g,u.C=0,u.h.g}function M_(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function kP(u,p){var g=u.C,S=p.indexOf(`
`,g);return S==-1?Gd:(g=Number(p.substring(g,S)),isNaN(g)?D_:(S+=1,S+g>p.length?Gd:(p=p.slice(S,S+g),u.C=S+g,p)))}Or.prototype.cancel=function(){this.K=!0,Bs(this)};function xc(u){u.T=Date.now()+u.H,L_(u,u.H)}function L_(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ra(c(u.aa,u),p)}function Qd(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Or.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(TP(this.i,this.B),this.M!=2&&(na(),Nt(17)),Bs(this),this.m=2,oa(this)):L_(this,this.T-u)};function oa(u){u.j.I==0||u.K||av(u.j,u)}function Bs(u){Qd(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,T_(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Xd(u,p){try{var g=u.j;if(g.I!=0&&(g.g==u||Jd(g.h,u))){if(!u.L&&Jd(g.h,u)&&g.I==3){try{var S=g.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)kc(g),Ic(g);else break e;sf(g),Nt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ra(c(g.Va,g),6e3));j_(g.h)<=1&&g.ta&&(g.ta=void 0)}else Hs(g,11)}else if((u.L||g.g==u)&&kc(g),!A(p))for(M=g.Ba.g.parse(p),p=0;p<M.length;p++){let xe=M[p];const ct=xe[0];if(!(ct<=g.K))if(g.K=ct,xe=xe[1],g.I==2)if(xe[0]=="c"){g.M=xe[1],g.ba=xe[2];const Ln=xe[3];Ln!=null&&(g.ka=Ln,g.j.info("VER="+g.ka));const $s=xe[4];$s!=null&&(g.za=$s,g.j.info("SVER="+g.za));const Fr=xe[5];Fr!=null&&typeof Fr=="number"&&Fr>0&&(S=1.5*Fr,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const jr=u.g;if(jr){const Ac=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ac){var V=S.h;V.g||Ac.indexOf("spdy")==-1&&Ac.indexOf("quic")==-1&&Ac.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Zd(V,V.h),V.h=null))}if(S.G){const af=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;af&&(S.wa=af,Se(S.J,S.G,af))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var W=u;if(S.na=uv(S,S.L?S.ba:null,S.W),W.L){U_(S.h,W);var re=W,st=S.O;st&&(re.H=st),re.D&&(Qd(re),xc(re)),S.g=W}else iv(S);g.i.length>0&&Sc(g)}else xe[0]!="stop"&&xe[0]!="close"||Hs(g,7);else g.I==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Hs(g,7):rf(g):xe[0]!="noop"&&g.l&&g.l.qa(xe),g.A=0)}}na(4)}catch{}}var PP=class{constructor(u,p){this.g=u,this.map=p}};function V_(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function F_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function j_(u){return u.h?1:u.g?u.g.size:0}function Jd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Zd(u,p){u.g?u.g.add(p):u.h=p}function U_(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}V_.prototype.cancel=function(){if(this.i=z_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function z_(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.G);return p}return m(u.i)}var B_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AP(u,p){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const S=u[g].indexOf("=");let M,V=null;S>=0?(M=u[g].substring(0,S),V=u[g].substring(S+1)):M=u[g],p(M,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Mr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Mr?(this.l=u.l,aa(this,u.j),this.o=u.o,this.g=u.g,la(this,u.u),this.h=u.h,ef(this,G_(u.i)),this.m=u.m):u&&(p=String(u).match(B_))?(this.l=!1,aa(this,p[1]||"",!0),this.o=ca(p[2]||""),this.g=ca(p[3]||"",!0),la(this,p[4]),this.h=ca(p[5]||"",!0),ef(this,p[6]||"",!0),this.m=ca(p[7]||"")):(this.l=!1,this.i=new ha(null,this.l))}Mr.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(ua(p,W_,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ua(p,W_,!0),"@"),u.push(ia(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ua(g,g.charAt(0)=="/"?NP:RP,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ua(g,OP)),u.join("")},Mr.prototype.resolve=function(u){const p=Mn(this);let g=!!u.j;g?aa(p,u.j):g=!!u.o,g?p.o=u.o:g=!!u.g,g?p.g=u.g:g=u.u!=null;var S=u.h;if(g)la(p,u.u);else if(g=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var M=p.h.lastIndexOf("/");M!=-1&&(S=p.h.slice(0,M+1)+S)}if(M=S,M==".."||M==".")S="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){S=M.lastIndexOf("/",0)==0,M=M.split("/");const V=[];for(let W=0;W<M.length;){const re=M[W++];re=="."?S&&W==M.length&&V.push(""):re==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),S&&W==M.length&&V.push("")):(V.push(re),S=!0)}S=V.join("/")}else S=M}return g?p.h=S:g=u.i.toString()!=="",g?ef(p,G_(u.i)):g=!!u.m,g&&(p.m=u.m),p};function Mn(u){return new Mr(u)}function aa(u,p,g){u.j=g?ca(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function la(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function ef(u,p,g){p instanceof ha?(u.i=p,MP(u.i,u.l)):(g||(p=ua(p,DP)),u.i=new ha(p,u.l))}function Se(u,p,g){u.i.set(p,g)}function Ec(u){return Se(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ca(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ua(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,CP),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function CP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var W_=/[#\/\?@]/g,RP=/[#\?:]/g,NP=/[#\?]/g,DP=/[#\?@]/g,OP=/#/g;function ha(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ws(u){u.g||(u.g=new Map,u.h=0,u.i&&AP(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=ha.prototype,t.add=function(u,p){Ws(this),this.i=null,u=Mi(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function H_(u,p){Ws(u),p=Mi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function $_(u,p){return Ws(u),p=Mi(u,p),u.g.has(p)}t.forEach=function(u,p){Ws(this),this.g.forEach(function(g,S){g.forEach(function(M){u.call(p,M,S,this)},this)},this)};function q_(u,p){Ws(u);let g=[];if(typeof p=="string")$_(u,p)&&(g=g.concat(u.g.get(Mi(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)g=g.concat(u[p]);return g}t.set=function(u,p){return Ws(this),this.i=null,u=Mi(this,u),$_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=q_(this,u),u.length>0?String(u[0]):p):p};function Y_(u,p,g){H_(u,p),g.length>0&&(u.i=null,u.g.set(Mi(u,p),m(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var g=p[S];const M=ia(g);g=q_(this,g);for(let V=0;V<g.length;V++){let W=M;g[V]!==""&&(W+="="+ia(g[V])),u.push(W)}}return this.i=u.join("&")};function G_(u){const p=new ha;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Mi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function MP(u,p){p&&!u.j&&(Ws(u),u.i=null,u.g.forEach(function(g,S){const M=S.toLowerCase();S!=M&&(H_(this,S),Y_(this,M,g))},u)),u.j=p}function LP(u,p){const g=new sa;if(o.Image){const S=new Image;S.onload=h(Lr,g,"TestLoadImage: loaded",!0,p,S),S.onerror=h(Lr,g,"TestLoadImage: error",!1,p,S),S.onabort=h(Lr,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=h(Lr,g,"TestLoadImage: timeout",!1,p,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else p(!1)}function VP(u,p){const g=new sa,S=new AbortController,M=setTimeout(()=>{S.abort(),Lr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:S.signal}).then(V=>{clearTimeout(M),V.ok?Lr(g,"TestPingServer: ok",!0,p):Lr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Lr(g,"TestPingServer: error",!1,p)})}function Lr(u,p,g,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(g)}catch{}}function FP(){this.g=new wP}function tf(u){this.i=u.Sb||null,this.h=u.ab||!1}d(tf,b_),tf.prototype.g=function(){return new Tc(this.i,this.h)};function Tc(u,p){wt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Tc,wt),t=Tc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,fa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,da(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;K_(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function K_(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?da(this):fa(this),this.readyState==3&&K_(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,da(this))},t.Na=function(u){this.g&&(this.response=u,da(this))},t.ga=function(){this.g&&da(this)};function da(u){u.readyState=4,u.l=null,u.j=null,u.B=null,fa(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function fa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Q_(u){let p="";return K(u,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function nf(u,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Q_(g),typeof u=="string"?g!=null&&ia(g):Se(u,p,g))}function Ue(u){wt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Ue,wt);var jP=/^https?$/i,UP=["POST","PUT"];t=Ue.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():R_.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){X_(this,V);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)g.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(UP,p,void 0)>=0)||S||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of g)this.g.setRequestHeader(V,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(V){X_(this,V)}};function X_(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,J_(u),bc(u)}function J_(u){u.A||(u.A=!0,Rt(u,"complete"),Rt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Rt(this,"complete"),Rt(this,"abort"),bc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bc(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Z_(this):this.Xa())},t.Xa=function(){Z_(this)};function Z_(u){if(u.h&&typeof i<"u"){if(u.v&&Vr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Rt(u,"readystatechange"),Vr(u)==4){u.h=!1;try{const V=u.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=V===0){let W=String(u.D).match(B_)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),S=!jP.test(W?W.toLowerCase():"")}g=S}if(g)Rt(u,"complete"),Rt(u,"success");else{u.o=6;try{var M=Vr(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",J_(u)}}finally{bc(u)}}}}function bc(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,p||Rt(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Vr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Vr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),vP(p)}};function ev(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zP(u){const p={};u=(u.g&&Vr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(A(u[S]))continue;var g=IP(u[S]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[M]||[];p[M]=V,V.push(g)}z(p,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pa(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function tv(u){this.za=0,this.i=[],this.j=new sa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pa("baseRetryDelayMs",5e3,u),this.Za=pa("retryDelaySeedMs",1e4,u),this.Ta=pa("forwardChannelMaxRetries",2,u),this.va=pa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new V_(u&&u.concurrentRequestLimit),this.Ba=new FP,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=tv.prototype,t.ka=8,t.I=1,t.connect=function(u,p,g,S){Nt(0),this.W=u,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=uv(this,null,this.W),Sc(this)};function rf(u){if(nv(u),u.I==3){var p=u.V++,g=Mn(u.J);if(Se(g,"SID",u.M),Se(g,"RID",p),Se(g,"TYPE","terminate"),ma(u,g),p=new Or(u,u.j,p),p.M=2,p.A=Ec(Mn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=p.A,g=!0),g||(p.g=hv(p.j,null),p.g.ea(p.A)),p.F=Date.now(),xc(p)}cv(u)}function Ic(u){u.g&&(of(u),u.g.cancel(),u.g=null)}function nv(u){Ic(u),u.v&&(o.clearTimeout(u.v),u.v=null),kc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Sc(u){if(!F_(u.h)&&!u.m){u.m=!0;var p=u.Ea;D||_(),L||(D(),L=!0),I.add(p,u),u.D=0}}function BP(u,p){return j_(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ra(c(u.Ea,u,p),lv(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Or(this,this.j,u);let V=this.o;if(this.U&&(V?(V=ne(V),ge(V,this.U)):V=this.U),this.u!==null||this.R||(M.J=V,V=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=sv(this,M,p),g=Mn(this.J),Se(g,"RID",u),Se(g,"CVER",22),this.G&&Se(g,"X-HTTP-Session-Id",this.G),ma(this,g),V&&(this.R?p="headers="+ia(Q_(V))+"&"+p:this.u&&nf(g,this.u,V)),Zd(this.h,M),this.Ra&&Se(g,"TYPE","init"),this.S?(Se(g,"$req",p),Se(g,"SID","null"),M.U=!0,Kd(M,g,null)):Kd(M,g,p),this.I=2}}else this.I==3&&(u?rv(this,u):this.i.length==0||F_(this.h)||rv(this))};function rv(u,p){var g;p?g=p.l:g=u.V++;const S=Mn(u.J);Se(S,"SID",u.M),Se(S,"RID",g),Se(S,"AID",u.K),ma(u,S),u.u&&u.o&&nf(S,u.u,u.o),g=new Or(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),p&&(u.i=p.G.concat(u.i)),p=sv(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Zd(u.h,g),Kd(g,S,p)}function ma(u,p){u.H&&K(u.H,function(g,S){Se(p,S,g)}),u.l&&K({},function(g,S){Se(p,S,g)})}function sv(u,p,g){g=Math.min(u.i.length,g);const S=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let re=-1;for(;;){const st=["count="+g];re==-1?g>0?(re=M[0].g,st.push("ofs="+re)):re=0:st.push("ofs="+re);let xe=!0;for(let ct=0;ct<g;ct++){var V=M[ct].g;const Ln=M[ct].map;if(V-=re,V<0)re=Math.max(0,M[ct].g-100),xe=!1;else try{V="req"+V+"_"||"";try{var W=Ln instanceof Map?Ln:Object.entries(Ln);for(const[$s,Fr]of W){let jr=Fr;a(Fr)&&(jr=Hd(Fr)),st.push(V+$s+"="+encodeURIComponent(jr))}}catch($s){throw st.push(V+"type="+encodeURIComponent("_badmap")),$s}}catch{S&&S(Ln)}}if(xe){W=st.join("&");break e}}W=void 0}return u=u.i.splice(0,g),p.G=u,W}function iv(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;D||_(),L||(D(),L=!0),I.add(p,u),u.A=0}}function sf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ra(c(u.Da,u),lv(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,ov(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ra(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),Ic(this),ov(this))};function of(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function ov(u){u.g=new Or(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Mn(u.na);Se(p,"RID","rpc"),Se(p,"SID",u.M),Se(p,"AID",u.K),Se(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&Se(p,"TO",u.ia),Se(p,"TYPE","xmlhttp"),ma(u,p),u.u&&u.o&&nf(p,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Ec(Mn(p)),g.u=null,g.R=!0,O_(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Ic(this),sf(this),Nt(19))};function kc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function av(u,p){var g=null;if(u.g==p){kc(u),of(u),u.g=null;var S=2}else if(Jd(u.h,p))g=p.G,U_(u.h,p),S=1;else return;if(u.I!=0){if(p.o)if(S==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var M=u.D;S=vc(),Rt(S,new A_(S,g)),Sc(u)}else iv(u);else if(M=p.m,M==3||M==0&&p.X>0||!(S==1&&BP(u,p)||S==2&&sf(u)))switch(g&&g.length>0&&(p=u.h,p.i=p.i.concat(g)),M){case 1:Hs(u,5);break;case 4:Hs(u,10);break;case 3:Hs(u,6);break;default:Hs(u,2)}}}function lv(u,p){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*p}function Hs(u,p){if(u.j.info("Error code "+p),p==2){var g=c(u.bb,u),S=u.Ua;const M=!S;S=new Mr(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||aa(S,"https"),Ec(S),M?LP(S.toString(),g):VP(S.toString(),g)}else Nt(2);u.I=0,u.l&&u.l.pa(p),cv(u),nv(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function cv(u){if(u.I=0,u.ja=[],u.l){const p=z_(u.h);(p.length!=0||u.i.length!=0)&&(v(u.ja,p),v(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function uv(u,p,g){var S=g instanceof Mr?Mn(g):new Mr(g);if(S.g!="")p&&(S.g=p+"."+S.g),la(S,S.u);else{var M=o.location;S=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const V=new Mr(null);S&&aa(V,S),p&&(V.g=p),M&&la(V,M),g&&(V.h=g),S=V}return g=u.G,p=u.wa,g&&p&&Se(S,g,p),Se(S,"VER",u.ka),ma(u,S),S}function hv(u,p,g){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Ue(new tf({ab:g})):new Ue(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dv(){}t=dv.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Pc(){}Pc.prototype.g=function(u,p){return new Qt(u,p)};function Qt(u,p){wt.call(this),this.g=new tv(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!A(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Li(this)}d(Qt,wt),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){rf(this.g)},Qt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Hd(u),u=g);p.i.push(new PP(p.Ya++,u)),p.I==3&&Sc(p)},Qt.prototype.N=function(){this.g.l=null,delete this.j,rf(this.g),delete this.g,Qt.Z.N.call(this)};function fv(u){$d.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}d(fv,$d);function pv(){qd.call(this),this.status=1}d(pv,qd);function Li(u){this.g=u}d(Li,dv),Li.prototype.ra=function(){Rt(this.g,"a")},Li.prototype.qa=function(u){Rt(this.g,new fv(u))},Li.prototype.pa=function(u){Rt(this.g,new pv)},Li.prototype.oa=function(){Rt(this.g,"b")},Pc.prototype.createWebChannel=Pc.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,l1=function(){return new Pc},a1=function(){return vc()},o1=zs,mm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wc.NO_ERROR=0,wc.TIMEOUT=8,wc.HTTP_ERROR=6,Nu=wc,C_.COMPLETE="complete",i1=C_,I_.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Ua=I_,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,s1=Ue}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="12.9.0";function kM(t){qo=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Xg("@firebase/firestore");function zi(){return vi.logLevel}function q(t,...e){if(vi.logLevel<=oe.DEBUG){const n=e.map(ly);vi.debug(`Firestore (${qo}): ${t}`,...n)}}function Pr(t,...e){if(vi.logLevel<=oe.ERROR){const n=e.map(ly);vi.error(`Firestore (${qo}): ${t}`,...n)}}function wi(t,...e){if(vi.logLevel<=oe.WARN){const n=e.map(ly);vi.warn(`Firestore (${qo}): ${t}`,...n)}}function ly(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,c1(t,r,n)}function c1(t,e,n){let r=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Pr(r),new Error(r)}function me(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||c1(e,s,r)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class AM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CM{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new u1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class RM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class NM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new RM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){me(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=OM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function gm(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Bf(s)===Bf(i)?ae(s,i):Bf(s)?1:-1}return ae(t.length,e.length)}const MM=55296,LM=57343;function Bf(t){const e=t.charCodeAt(0);return e>=MM&&e<=LM}function Ao(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="__name__";class Bn{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Bn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=Bn.isNumericId(e),s=Bn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Bn.extractNumericId(e).compare(Bn.extractNumericId(n)):gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class Te extends Bn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const VM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends Bn{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return VM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hw}static keyField(){return new gt([hw])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new $(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new $(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Te.fromString(e))}static fromName(e){return new G(Te.fromString(e).popFirst(5))}static empty(){return new G(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t,e,n){if(!n)throw new $(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FM(t,e,n,r){if(e===!0&&r===!0)throw new $(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dw(t){if(!G.isDocumentKey(t))throw new $(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fw(t){if(G.isDocumentKey(t))throw new $(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function d1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Co(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gd(t);throw new $(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jM(t,e){if(e<=0)throw new $(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e){const n={typeString:t};return e&&(n.value=e),n}function cc(t,e){if(!d1(t))throw new $(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=-62135596800,mw=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*mw);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pw)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mw}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cc(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:tt("string",Ae._jsonSchemaVersion),seconds:tt("number"),nanoseconds:tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new Ae(0,0))}static max(){return new J(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=-1;function UM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Is(s,G.empty(),e)}function zM(t){return new Is(t.readTime,t.key,Fl)}class Is{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Is(J.min(),G.empty(),Fl)}static max(){return new Is(J.max(),G.empty(),Fl)}}function BM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==WM)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function $M(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=-1;function _d(t){return t==null}function Eh(t){return t===0&&1/t==-1/0}function qM(t){return typeof t=="number"&&Number.isInteger(t)&&!Eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="";function YM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gw(e)),e=GM(t.get(n),e);return gw(e)}function GM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case f1:n+="";break;default:n+=i}}return n}function gw(t){return t+f1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ki(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function p1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kc(this.root,e,this.comparator,!0)}}class Kc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??mt.RED,this.left=s??mt.EMPTY,this.right=i??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new mt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _w(this.data.getIterator())}getIteratorFrom(e){return new _w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class _w{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new lt(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new m1("Invalid base64 string: "+i):i}}(e);return new vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const KM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(me(!!t,39018),typeof t=="string"){let e=0;const n=KM.exec(t);if(me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ks(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="server_timestamp",y1="__type__",_1="__previous_value__",v1="__local_write_time__";function hy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[y1])==null?void 0:r.stringValue)===g1}function vd(t){const e=t.mapValue.fields[_1];return hy(e)?vd(e):e}function jl(t){const e=Ss(t.mapValue.fields[v1].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n,r,s,i,o,a,l,c,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h,this.apiKey=d}}const Th="(default)";class Ul{constructor(e,n){this.projectId=e,this.database=n||Th}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof Ul&&e.projectId===this.projectId&&e.database===this.database}}function XM(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="__type__",JM="__max__",Qc={mapValue:{}},x1="__vector__",bh="value";function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hy(t)?4:eL(t)?9007199254740991:ZM(t)?10:11:X(28295,{value:t})}function sr(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ss(s.timestampValue),a=Ss(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ks(s.bytesValue).isEqual(ks(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return qe(s.geoPointValue.latitude)===qe(i.geoPointValue.latitude)&&qe(s.geoPointValue.longitude)===qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return qe(s.integerValue)===qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=qe(s.doubleValue),a=qe(i.doubleValue);return o===a?Eh(o)===Eh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ao(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(yw(o)!==yw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!sr(o[l],a[l])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function zl(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function Ro(t,e){if(t===e)return 0;const n=Ps(t),r=Ps(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=qe(i.integerValue||i.doubleValue),l=qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return vw(t.timestampValue,e.timestampValue);case 4:return vw(jl(t),jl(e));case 5:return gm(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ks(i),l=ks(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ae(a[c],l[c]);if(h!==0)return h}return ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ae(qe(i.latitude),qe(o.latitude));return a!==0?a:ae(qe(i.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ww(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,v,E;const a=i.fields||{},l=o.fields||{},c=(f=a[bh])==null?void 0:f.arrayValue,h=(m=l[bh])==null?void 0:m.arrayValue,d=ae(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return d!==0?d:ww(c,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Qc.mapValue&&o===Qc.mapValue)return 0;if(i===Qc.mapValue)return 1;if(o===Qc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=gm(l[d],h[d]);if(f!==0)return f;const m=Ro(a[l[d]],c[h[d]]);if(m!==0)return m}return ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function vw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Ss(t),r=Ss(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function ww(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ro(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function No(t){return ym(t)}function ym(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ym(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ym(n.fields[o])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function Du(t){switch(Ps(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vd(t);return e?16+Du(e):16;case 5:return 2*t.stringValue.length;case 6:return ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Du(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ki(r.fields,(i,o)=>{s+=i.length+Du(o)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function xw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _m(t){return!!t&&"integerValue"in t}function dy(t){return!!t&&"arrayValue"in t}function Ew(t){return!!t&&"nullValue"in t}function Tw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ou(t){return!!t&&"mapValue"in t}function ZM(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[w1])==null?void 0:r.stringValue)===x1}function rl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=rl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rl(t.arrayValue.values[n]);return e}return{...t}}function eL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(n)}setAll(e){let n=gt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=rl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ou(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ki(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new cn(rl(this.value))}}function E1(t){const e=[];return ki(t.fields,(n,r)=>{const s=new gt([n]);if(Ou(r)){const i=E1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,J.min(),J.min(),J.min(),cn.empty(),0)}static newFoundDocument(e,n,r,s){return new St(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new St(e,2,n,J.min(),J.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,J.min(),J.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.position=e,this.inclusive=n}}function bw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Ro(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n="asc"){this.field=e,this.dir=n}}function tL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{}class et extends T1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rL(e,n,r):n==="array-contains"?new oL(e,r):n==="in"?new aL(e,r):n==="not-in"?new lL(e,r):n==="array-contains-any"?new cL(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sL(e,r):new iL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends T1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nn(e,n)}matches(e){return b1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b1(t){return t.op==="and"}function I1(t){return nL(t)&&b1(t)}function nL(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function vm(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+No(t.value);if(I1(t))return t.filters.map(e=>vm(e)).join(",");{const e=t.filters.map(n=>vm(n)).join(",");return`${t.op}(${e})`}}function S1(t,e){return t instanceof et?function(r,s){return s instanceof et&&r.op===s.op&&r.field.isEqual(s.field)&&sr(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&S1(o,s.filters[a]),!0):!1}(t,e):void X(19439)}function k1(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(k1).join(" ,")+"}"}(t):"Filter"}class rL extends et{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class sL extends et{constructor(e,n){super(e,"in",n),this.keys=P1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iL extends et{constructor(e,n){super(e,"not-in",n),this.keys=P1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class oL extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dy(n)&&zl(n.arrayValue,this.value)}}class aL extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class lL extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zl(this.value.arrayValue,n)}}class cL extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Sw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new uL(t,e,n,r,s,i,o)}function fy(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>No(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>No(r)).join(",")),e.Te=n}return e.Te}function py(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!S1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iw(t.startAt,e.startAt)&&Iw(t.endAt,e.endAt)}function wm(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function hL(t,e,n,r,s,i,o,a){return new Ko(t,e,n,r,s,i,o,a)}function A1(t){return new Ko(t)}function kw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dL(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function C1(t){return t.collectionGroup!==null}function sl(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(gt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Bl(i,r))}),n.has(gt.keyField().canonicalString())||e.Ie.push(new Bl(gt.keyField(),r))}return e.Ie}function er(t){const e=ee(t);return e.Ee||(e.Ee=fL(e,sl(t))),e.Ee}function fL(t,e){if(t.limitType==="F")return Sw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Bl(s.field,i)});const n=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return Sw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xm(t,e){const n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pL(t,e){const n=t.explicitOrderBy.concat([e]);return new Ko(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Sh(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return py(er(t),er(e))&&t.limitType===e.limitType}function R1(t){return`${fy(er(t))}|lt:${t.limitType}`}function Bi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>k1(s)).join(", ")}]`),_d(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>No(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>No(s)).join(",")),`Target(${r})`}(er(t))}; limitType=${t.limitType})`}function xd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of sl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=bw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,sl(r),s)||r.endAt&&!function(o,a,l){const c=bw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,sl(r),s))}(t,e)}function mL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function N1(t){return(e,n)=>{let r=!1;for(const s of sl(t)){const i=gL(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function gL(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ro(l,c):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return p1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new je(G.comparator);function Ar(){return yL}const D1=new je(G.comparator);function za(...t){let e=D1;for(const n of t)e=e.insert(n.key,n);return e}function O1(t){let e=D1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function si(){return il()}function M1(){return il()}function il(){return new Pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const _L=new je(G.comparator),vL=new lt(G.comparator);function le(...t){let e=vL;for(const n of t)e=e.add(n);return e}const wL=new lt(ae);function xL(){return wL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function L1(t){return{integerValue:""+t}}function EL(t,e){return qM(e)?L1(e):my(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this._=void 0}}function TL(t,e,n){return t instanceof kh?function(s,i){const o={fields:{[y1]:{stringValue:g1},[v1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hy(i)&&(i=vd(i)),i&&(o.fields[_1]=i),{mapValue:o}}(n,e):t instanceof Wl?F1(t,e):t instanceof Hl?j1(t,e):function(s,i){const o=V1(s,i),a=Pw(o)+Pw(s.Ae);return _m(o)&&_m(s.Ae)?L1(a):my(s.serializer,a)}(t,e)}function bL(t,e,n){return t instanceof Wl?F1(t,e):t instanceof Hl?j1(t,e):n}function V1(t,e){return t instanceof Ph?function(r){return _m(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class kh extends Ed{}class Wl extends Ed{constructor(e){super(),this.elements=e}}function F1(t,e){const n=U1(e);for(const r of t.elements)n.some(s=>sr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hl extends Ed{constructor(e){super(),this.elements=e}}function j1(t,e){let n=U1(e);for(const r of t.elements)n=n.filter(s=>!sr(s,r));return{arrayValue:{values:n}}}class Ph extends Ed{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Pw(t){return qe(t.integerValue||t.doubleValue)}function U1(t){return dy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function IL(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wl&&s instanceof Wl||r instanceof Hl&&s instanceof Hl?Ao(r.elements,s.elements,sr):r instanceof Ph&&s instanceof Ph?sr(r.Ae,s.Ae):r instanceof kh&&s instanceof kh}(t.transform,e.transform)}class SL{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Td{}function z1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new W1(t.key,tr.none()):new uc(t.key,t.data,tr.none());{const n=t.data,r=cn.empty();let s=new lt(gt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ai(t.key,r,new bn(s.toArray()),tr.none())}}function kL(t,e,n){t instanceof uc?function(s,i,o){const a=s.value.clone(),l=Cw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ai?function(s,i,o){if(!Mu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Cw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(B1(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ol(t,e,n,r){return t instanceof uc?function(i,o,a,l){if(!Mu(i.precondition,o))return a;const c=i.value.clone(),h=Rw(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ai?function(i,o,a,l){if(!Mu(i.precondition,o))return a;const c=Rw(i.fieldTransforms,l,o),h=o.data;return h.setAll(B1(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Mu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function PL(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=V1(r.transform,s||null);i!=null&&(n===null&&(n=cn.empty()),n.set(r.field,i))}return n||null}function Aw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ao(r,s,(i,o)=>IL(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uc extends Td{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ai extends Td{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function B1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Cw(t,e,n){const r=new Map;me(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,bL(o,a,n[s]))}return r}function Rw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,TL(i,o,e))}return r}class W1 extends Td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AL extends Td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&kL(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ol(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ol(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=M1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=z1(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(n,r)=>Aw(n,r))&&Ao(this.baseMutations,e.baseMutations,(n,r)=>Aw(n,r))}}class gy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return _L}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new gy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,he;function DL(t){switch(t){case F.OK:return X(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function H1(t){if(t===void 0)return Pr("GRPC error has no .code"),F.UNKNOWN;switch(t){case Je.OK:return F.OK;case Je.CANCELLED:return F.CANCELLED;case Je.UNKNOWN:return F.UNKNOWN;case Je.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Je.INTERNAL:return F.INTERNAL;case Je.UNAVAILABLE:return F.UNAVAILABLE;case Je.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Je.NOT_FOUND:return F.NOT_FOUND;case Je.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Je.ABORTED:return F.ABORTED;case Je.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Je.DATA_LOSS:return F.DATA_LOSS;default:return X(39323,{code:t})}}(he=Je||(Je={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=new _s([4294967295,4294967295],0);function Nw(t){const e=OL().encode(t),n=new r1;return n.update(e),new Uint8Array(n.digest())}function Dw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _s([n,r],0),new _s([s,i],0)]}class yy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ba(`Invalid padding: ${n}`);if(r<0)throw new Ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=_s.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(_s.fromNumber(r)));return s.compare(ML)===1&&(s=new _s([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Nw(e),[r,s]=Dw(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new yy(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Nw(e),[r,s]=Dw(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bd(J.min(),s,new je(ae),Ar(),le())}}class hc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hc(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class $1{constructor(e,n){this.targetId=e,this.Ce=n}}class q1{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ow{constructor(){this.ve=0,this.Fe=Mw(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X(38017,{changeType:i})}}),new hc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Mw()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class LL{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ar(),this.He=Xc(),this.Je=Xc(),this.Ze=new je(ae)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(wm(i))if(r===0){const o=new G(i.path);this.et(n,o,St.newNoDocument(o,J.min()))}else me(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ks(r).toUint8Array()}catch(l){if(l instanceof m1)return wi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new yy(o,s,i)}catch(l){return wi(l instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&wm(a.target)){const l=new G(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,St.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=le();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new bd(e,n,this.Ze,this.je,r);return this.je=Ar(),this.He=Xc(),this.Je=Xc(),this.Ze=new je(ae),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Ow,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new lt(ae),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new lt(ae),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ow),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xc(){return new je(G.comparator)}function Mw(){return new je(G.comparator)}const VL={asc:"ASCENDING",desc:"DESCENDING"},FL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jL={and:"AND",or:"OR"};class UL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Em(t,e){return t.useProto3Json||_d(e)?e:{value:e}}function Ah(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zL(t,e){return Ah(t,e.toTimestamp())}function nr(t){return me(!!t,49232),J.fromTimestamp(function(n){const r=Ss(n);return new Ae(r.seconds,r.nanos)}(t))}function _y(t,e){return Tm(t,e).canonicalString()}function Tm(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function G1(t){const e=Te.fromString(t);return me(Z1(e),10190,{key:e.toString()}),e}function bm(t,e){return _y(t.databaseId,e.path)}function Wf(t,e){const n=G1(e);if(n.get(1)!==t.databaseId.projectId)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Q1(n))}function K1(t,e){return _y(t.databaseId,e)}function BL(t){const e=G1(t);return e.length===4?Te.emptyPath():Q1(e)}function Im(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q1(t){return me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Lw(t,e,n){return{name:bm(t,e),fields:n.value.mapValue.fields}}function WL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(me(h===void 0||typeof h=="string",58123),vt.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:H1(c.code);return new $(h,c.message||"")}(o);n=new q1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wf(t,r.document.name),i=nr(r.document.updateTime),o=r.document.createTime?nr(r.document.createTime):J.min(),a=new cn({mapValue:{fields:r.document.fields}}),l=St.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Lu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wf(t,r.document),i=r.readTime?nr(r.readTime):J.min(),o=St.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Lu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wf(t,r.document),i=r.removedTargetIds||[];n=new Lu([],i,s,null)}else{if(!("filter"in e))return X(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new NL(s,i),a=r.targetId;n=new $1(a,o)}}return n}function HL(t,e){let n;if(e instanceof uc)n={update:Lw(t,e.key,e.value)};else if(e instanceof W1)n={delete:bm(t,e.key)};else if(e instanceof Ai)n={update:Lw(t,e.key,e.data),updateMask:ZL(e.fieldMask)};else{if(!(e instanceof AL))return X(16599,{dt:e.type});n={verify:bm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof kh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ph)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:zL(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X(27497)}(t,e.precondition)),n}function $L(t,e){return t&&t.length>0?(me(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?nr(s.updateTime):nr(i);return o.isEqual(J.min())&&(o=nr(i)),new SL(o,s.transformResults||[])}(n,e))):[]}function qL(t,e){return{documents:[K1(t,e.path)]}}function YL(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=K1(t,s);const i=function(c){if(c.length!==0)return J1(Nn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Wi(f.field),direction:QL(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Em(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function GL(t){let e=BL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const f=X1(d);return f instanceof Nn&&I1(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new Bl(Hi(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,_d(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Ih(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new Ih(m,f)}(n.endAt)),hL(e,s,o,i,a,"F",l,c)}function KL(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function X1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hi(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hi(n.unaryFilter.field);return et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hi(n.unaryFilter.field);return et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hi(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return et.create(Hi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>X1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function QL(t){return VL[t]}function XL(t){return FL[t]}function JL(t){return jL[t]}function Wi(t){return{fieldPath:t.canonicalString()}}function Hi(t){return gt.fromServerFormat(t.fieldPath)}function J1(t){return t instanceof et?function(n){if(n.op==="=="){if(Tw(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NAN"}};if(Ew(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tw(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NOT_NAN"}};if(Ew(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wi(n.field),op:XL(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>J1(s));return r.length===1?r[0]:{compositeFilter:{op:JL(n.op),filters:r}}}(t):X(54877,{filter:t})}function ZL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Z1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function eS(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,r,s,i=J.min(),o=J.min(),a=vt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.yt=e}}function tV(t){const e=GL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.Sn=new rV}addToCollectionParentIndex(e,n){return this.Sn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Is.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class rV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tS=41943040;class Ut{static withCacheSize(e){return new Ut(e,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(tS,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Do(0)}static ar(){return new Do(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="LruGarbageCollector",sV=1048576;function jw([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class iV{constructor(e){this.Pr=e,this.buffer=new lt(jw),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){q(Fw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Go(n)?q(Fw,"Ignoring IndexedDB error during garbage collection: ",n):await Yo(n)}await this.Ar(3e5)})}}class aV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(yd.ce);const r=new iV(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Vw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vw):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),zi()<=oe.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function lV(t,e){return new aV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.changes=new Pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ol(r.mutation,s,bn.empty(),Ae.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const s=si();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=za();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ar();const o=il(),a=function(){return il()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ai)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ol(h.mutation,c,h.mutation.getFieldMask(),Ae.now())):o.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new uV(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=il();let s=new je((o,a)=>o-a),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||bn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||le()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=M1();h.forEach(f=>{if(!i.has(f)){const m=z1(n.get(f),r.get(f));m!==null&&d.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return dL(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(si());let a=Fl,l=i;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,le())).next(h=>({batchId:a,changes:O1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=za();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=za();return this.indexManager.getCollectionParents(e,i).next(a=>j.forEach(a,l=>{const c=function(d,f){return new Ko(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,St.newInvalidDocument(h)))});let a=za();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&ol(h.mutation,c,bn.empty(),Ae.now()),xd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return j.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nr(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:tV(s.bundledQuery),readTime:nr(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.overlays=new je(G.comparator),this.Lr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=si();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=si(),i=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=si(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=si(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return j.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new RL(n,r));let i=this.Lr.get(n);i===void 0&&(i=le(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.kr=new lt(ut.Kr),this.qr=new lt(ut.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ut(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new G(new Te([])),r=new ut(n,e),s=new ut(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new G(new Te([])),r=new ut(n,e),s=new ut(n,e+1);let i=le();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ut(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return G.comparator(e.key,n.key)||ae(e.Hr,n.Hr)}static Ur(e,n){return ae(e.Hr,n.Hr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new lt(ut.Kr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CL(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new ut(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?uy:this.Yn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(ae);return n.forEach(s=>{const i=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),j.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new ut(new G(i),0);let a=new lt(ae);return this.Jr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),j.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return j.forEach(n.mutations,s=>{const i=new ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new ut(n,0),s=this.Jr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.ti=e,this.docs=function(){return new je(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():St.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ar();const o=n.path,a=new G(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||BM(zM(h),r)<=0||(s.has(h.key)||xd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X(9500)}ni(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yV(this)}getSize(e){return j.resolve(this.size)}}class yV extends cV{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.persistence=e,this.ri=new Pi(n=>fy(n),py),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ii=0,this.si=new vy,this.targetCount=0,this.oi=Do._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),j.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.lr(n),j.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this._i={},this.overlays={},this.ai=new yd(0),this.ui=!1,this.ui=!0,this.ci=new pV,this.referenceDelegate=e(this),this.li=new _V(this),this.indexManager=new nV,this.remoteDocumentCache=function(s){return new gV(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new eV(n),this.Pi=new dV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new mV(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new vV(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return j.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class vV extends HM{constructor(e){super(),this.currentSequenceNumber=e}}class wy{constructor(e){this.persistence=e,this.Ri=new vy,this.Ai=null}static Vi(e){return new wy(e)}get di(){if(this.Ai)return this.Ai;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,r=>{const s=G.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.fi=new Pi(r=>YM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=lV(this,n)}static Vi(e,n){return new Ch(e,n)}Ti(){}Ii(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return j.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?j.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,J.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),j.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Du(e.data.value)),n}wr(e,n,r){return j.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=le(),s=le();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return qN()?8:$M(At())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new wV;return this.ys(e,n,o).next(a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(zi()<=oe.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(zi()<=oe.DEBUG&&q("QueryEngine","Query:",Bi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(zi()<=oe.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(n))):j.resolve())}gs(e,n){if(kw(n))return j.resolve(null);let r=er(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sh(n,null,"F"),r=er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=le(...i);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ss(n,c,o,l.readTime)?this.gs(e,Sh(n,null,"F")):this.Ds(e,c,n,l)}))})))}ps(e,n,r,s){return kw(n)||s.isEqual(J.min())?j.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?j.resolve(null):(zi()<=oe.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bi(n)),this.Ds(e,o,n,UM(s,Fl)).next(a=>a))})}bs(e,n){let r=new lt(N1(e));return n.forEach((s,i)=>{xd(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return zi()<=oe.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.fs.getDocumentsMatchingQuery(e,n,Is.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="LocalStore",EV=3e8;class TV{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new je(ae),this.Fs=new Pi(i=>fy(i),py),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hV(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function bV(t,e,n,r){return new TV(t,e,n,r)}async function rS(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=le();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ns:c,removedBatchIds:o,addedBatchIds:a}))})})}function IV(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=j.resolve();return f.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(E=>{const b=c.docVersions.get(v);me(b!==null,48541),E.version.compareTo(b)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=le();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function sS(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function SV(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach((h,d)=>{const f=s.get(d);if(!f)return;a.push(n.li.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,d)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(vt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),function(E,b,y){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=EV?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,m,h)&&a.push(n.li.updateTargetData(i,m))});let l=Ar(),c=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(kV(i,o,e.documentUpdates).next(h=>{l=h.Bs,c=h.Ls})),!r.isEqual(J.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(d=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.vs=s,i))}function kV(t,e,n){let r=le(),s=le();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ar();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q(Ey,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Bs:o,Ls:s}})}function PV(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=uy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AV(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new ns(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Sm(t,e,n){const r=ee(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Go(o))throw o;q(Ey,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Uw(t,e,n){const r=ee(t);let s=J.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ee(l),f=d.Fs.get(h);return f!==void 0?j.resolve(d.vs.get(f)):d.li.getTargetData(c,h)}(r,o,er(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:le())).next(a=>(CV(r,mL(e),a),{documents:a,ks:i})))}function CV(t,e,n){let r=t.Ms.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class zw{constructor(){this.activeTargetIds=xL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RV{constructor(){this.vo=new zw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new zw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="ConnectivityMonitor";class Ww{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){q(Bw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){q(Bw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function km(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="RestConnection",DV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class OV{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Th?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=km(),a=this.Qo(e,n.toUriEncodedString());q(Hf,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,s,i);const{host:c}=new URL(a),h=Ls(c);return this.zo(e,a,l,r,h).then(d=>(q(Hf,`Received RPC '${e}' ${o}: `,d),d),d=>{throw wi(Hf,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=DV[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection",ba=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class go extends OV{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!go.c_){const e=a1();ba(e,o1.STAT_EVENT,n=>{n.stat===mm.PROXY?q(Tt,"STAT_EVENT: detected buffering proxy"):n.stat===mm.NOPROXY&&q(Tt,"STAT_EVENT: detected no buffering proxy")}),go.c_=!0}}zo(e,n,r,s,i){const o=km();return new Promise((a,l)=>{const c=new s1;c.setWithCredentials(!0),c.listenOnce(i1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nu.NO_ERROR:const d=c.getResponseJson();q(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Nu.TIMEOUT:q(Tt,`RPC '${e}' ${o} timed out`),l(new $(F.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:const f=c.getStatus();if(q(Tt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const E=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(v.status);l(new $(E,v.message))}else l(new $(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new $(F.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{q(Tt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);q(Tt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}T_(e,n,r){const s=km(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=i.join("");q(Tt,`Creating RPC '${e}' stream ${s}: ${c}`,a);const h=o.createWebChannel(c,a);this.I_(h);let d=!1,f=!1;const m=new MV({Ho:v=>{f?q(Tt,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(d||(q(Tt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),q(Tt,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Jo:()=>h.close()});return ba(h,Ua.EventType.OPEN,()=>{f||(q(Tt,`RPC '${e}' stream ${s} transport opened.`),m.i_())}),ba(h,Ua.EventType.CLOSE,()=>{f||(f=!0,q(Tt,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(h))}),ba(h,Ua.EventType.ERROR,v=>{f||(f=!0,wi(Tt,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),m.o_(new $(F.UNAVAILABLE,"The operation could not be completed")))}),ba(h,Ua.EventType.MESSAGE,v=>{var E;if(!f){const b=v.data[0];me(!!b,16349);const y=b,w=(y==null?void 0:y.error)||((E=y[0])==null?void 0:E.error);if(w){q(Tt,`RPC '${e}' stream ${s} received error:`,w);const T=w.status;let R=function(I){const _=Je[I];if(_!==void 0)return H1(_)}(T),D=w.message;T==="NOT_FOUND"&&D.includes("database")&&D.includes("does not exist")&&D.includes(this.databaseId.database)&&wi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),R===void 0&&(R=F.INTERNAL,D="Unknown error status: "+T+" with message "+w.message),f=!0,m.o_(new $(R,D)),h.close()}else q(Tt,`RPC '${e}' stream ${s} received:`,b),m.__(b)}}),go.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return l1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){return new go(t)}function $f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){return new UL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */go.c_=!1;class iS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="PersistentStream";class oS{constructor(e,n,r,s,i,o,a,l){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Pr(n.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(Hw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(q(Hw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VV extends oS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=WL(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?nr(o.readTime):J.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Im(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=wm(l)?{documents:qL(i,l)}:{query:YL(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Y1(i,o.resumeToken);const c=Em(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Ah(i,o.snapshotVersion.toTimestamp());const c=Em(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=KL(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Im(this.serializer),n.removeTarget=e,this.K_(n)}}class FV extends oS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$L(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Im(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>HL(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{}class UV extends jV{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Tm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(F.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,Tm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function zV(t,e,n,r){return new UV(t,e,n,r)}class BV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pr(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="RemoteStore";class WV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Ci(this)&&(q(xi,"Restarting streams for network reachability change."),await async function(l){const c=ee(l);c.Ea.add(4),await dc(c),c.Va.set("Unknown"),c.Ea.delete(4),await Sd(c)}(this))})}),this.Va=new BV(r,s)}}async function Sd(t){if(Ci(t))for(const e of t.Ra)await e(!0)}async function dc(t){for(const e of t.Ra)await e(!1)}function aS(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sy(n)?Iy(n):Qo(n).O_()&&by(n,e))}function Ty(t,e){const n=ee(t),r=Qo(n);n.Ia.delete(e),r.O_()&&lS(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ci(n)&&n.Va.set("Unknown"))}function by(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qo(t).Z_(e)}function lS(t,e){t.da.$e(e),Qo(t).X_(e)}function Iy(t){t.da=new LL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qo(t).start(),t.Va.ua()}function Sy(t){return Ci(t)&&!Qo(t).x_()&&t.Ia.size>0}function Ci(t){return ee(t).Ea.size===0}function cS(t){t.da=void 0}async function HV(t){t.Va.set("Online")}async function $V(t){t.Ia.forEach((e,n)=>{by(t,e)})}async function qV(t,e){cS(t),Sy(t)?(t.Va.ha(e),Iy(t)):t.Va.set("Unknown")}async function YV(t,e,n){if(t.Va.set("Online"),e instanceof q1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))}(t,e)}catch(r){q(xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rh(t,r)}else if(e instanceof Lu?t.da.Xe(e):e instanceof $1?t.da.st(e):t.da.tt(e),!n.isEqual(J.min()))try{const r=await sS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),lS(i,l);const d=new ns(h.target,l,c,h.sequenceNumber);by(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q(xi,"Failed to raise snapshot:",r),await Rh(t,r)}}async function Rh(t,e,n){if(!Go(e))throw e;t.Ea.add(1),await dc(t),t.Va.set("Offline"),n||(n=()=>sS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(xi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Sd(t)})}function uS(t,e){return e().catch(n=>Rh(t,n,e))}async function kd(t){const e=ee(t),n=As(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:uy;for(;GV(e);)try{const s=await PV(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,KV(e,s)}catch(s){await Rh(e,s)}hS(e)&&dS(e)}function GV(t){return Ci(t)&&t.Ta.length<10}function KV(t,e){t.Ta.push(e);const n=As(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function hS(t){return Ci(t)&&!As(t).x_()&&t.Ta.length>0}function dS(t){As(t).start()}async function QV(t){As(t).ra()}async function XV(t){const e=As(t);for(const n of t.Ta)e.ea(n.mutations)}async function JV(t,e,n){const r=t.Ta.shift(),s=gy.from(r,e,n);await uS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await kd(t)}async function ZV(t,e){e&&As(t).Y_&&await async function(r,s){if(function(o){return DL(o)&&o!==F.ABORTED}(s.code)){const i=r.Ta.shift();As(r).B_(),await uS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await kd(r)}}(t,e),hS(t)&&dS(t)}async function $w(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),q(xi,"RemoteStore received new credentials");const r=Ci(n);n.Ea.add(3),await dc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sd(n)}async function eF(t,e){const n=ee(t);e?(n.Ea.delete(2),await Sd(n)):e||(n.Ea.add(2),await dc(n),n.Va.set("Unknown"))}function Qo(t){return t.ma||(t.ma=function(n,r,s){const i=ee(n);return i.sa(),new VV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:HV.bind(null,t),Yo:$V.bind(null,t),t_:qV.bind(null,t),J_:YV.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Sy(t)?Iy(t):t.Va.set("Unknown")):(await t.ma.stop(),cS(t))})),t.ma}function As(t){return t.fa||(t.fa=function(n,r,s){const i=ee(n);return i.sa(),new FV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:QV.bind(null,t),t_:ZV.bind(null,t),ta:XV.bind(null,t),na:JV.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await kd(t)):(await t.fa.stop(),t.Ta.length>0&&(q(xi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ky(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(t,e){if(Pr("AsyncQueue",`${e}: ${t}`),Go(t))return new $(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=za(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.ga=new je(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Oo(e,n,yo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class nF{constructor(){this.queries=Yw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=Yw(),i.forEach((o,a)=>{for(const l of a.ba)l.onError(r)})})(this,new $(F.ABORTED,"Firestore shutting down"))}}function Yw(){return new Pi(t=>R1(t),wd)}async function rF(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new tF,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Py(o,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Ay(n)}async function sF(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iF(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&Ay(n)}function oF(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Ay(t){t.Ca.forEach(e=>{e.next()})}var Pm,Gw;(Gw=Pm||(Pm={})).Ma="default",Gw.Cache="cache";class aF{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.key=e}}class pS{constructor(e){this.key=e}}class lF{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=le(),this.mutatedKeys=le(),this.eu=N1(e),this.tu=new yo(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new qw,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const f=s.get(h),m=xd(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),E=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;f&&m?f.data.isEqual(m.data)?v!==E&&(r.track({type:3,doc:m}),b=!0):this.su(f,m)||(r.track({type:2,doc:m}),b=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),b=!0):f&&!m&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(m?(o=o.add(m),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(m,v){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Vt:b})}};return E(m)-E(v)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Ya.size===0&&this.current&&!s?1:0,c=l!==this.Xa;return this.Xa=l,o.length!==0||c?{snapshot:new Oo(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new pS(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new fS(r))}),n}cu(e){this.Za=e.ks,this.Ya=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Cy="SyncEngine";class cF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uF{constructor(e){this.key=e,this.hu=!1}}class hF{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Pi(a=>R1(a),wd),this.Iu=new Map,this.Eu=new Set,this.Ru=new je(G.comparator),this.Au=new Map,this.Vu=new vy,this.du={},this.mu=new Map,this.fu=Do.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dF(t,e,n=!0){const r=wS(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await mS(r,e,n,!0),s}async function fF(t,e){const n=wS(t);await mS(n,e,!0,!1)}async function mS(t,e,n,r){const s=await AV(t.localStore,er(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await pF(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&aS(t.remoteStore,s),a}async function pF(t,e,n,r,s){t.pu=(d,f,m)=>async function(E,b,y,w){let T=b.view.ru(y);T.Ss&&(T=await Uw(E.localStore,b.query,!1).then(({documents:I})=>b.view.ru(I,T)));const R=w&&w.targetChanges.get(b.targetId),D=w&&w.targetMismatches.get(b.targetId)!=null,L=b.view.applyChanges(T,E.isPrimaryClient,R,D);return Qw(E,b.targetId,L.au),L.snapshot}(t,d,f,m);const i=await Uw(t.localStore,e,!0),o=new lF(e,i.ks),a=o.ru(i.documents),l=hc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Qw(t,n,c.au);const h=new cF(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function mF(t,e,n){const r=ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!wd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ty(r.remoteStore,s.targetId),Am(r,s.targetId)}).catch(Yo)):(Am(r,s.targetId),await Sm(r.localStore,s.targetId,!0))}async function gF(t,e){const n=ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ty(n.remoteStore,r.targetId))}async function yF(t,e,n){const r=bF(t);try{const s=await function(o,a){const l=ee(o),c=Ae.now(),h=a.reduce((m,v)=>m.add(v.key),le());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Ar(),E=le();return l.xs.getEntries(m,h).next(b=>{v=b,v.forEach((y,w)=>{w.isValidDocument()||(E=E.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(b=>{d=b;const y=[];for(const w of a){const T=PL(w,d.get(w.key).overlayedDocument);T!=null&&y.push(new Ai(w.key,T,E1(T.value.mapValue),tr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,y,a)}).next(b=>{f=b;const y=b.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(m,b.batchId,y)})}).then(()=>({batchId:f.batchId,changes:O1(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.du[o.currentUser.toKey()];c||(c=new je(ae)),c=c.insert(a,l),o.du[o.currentUser.toKey()]=c}(r,s.batchId,n),await fc(r,s.changes),await kd(r.remoteStore)}catch(s){const i=Py(s,"Failed to persist write");n.reject(i)}}async function gS(t,e){const n=ee(t);try{const r=await SV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?me(o.hu,14607):s.removedDocuments.size>0&&(me(o.hu,42227),o.hu=!1))}),await fc(n,r,e)}catch(r){await Yo(r)}}function Kw(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.ba)f.va(a)&&(c=!0)}),c&&Ay(l)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _F(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new je(G.comparator);o=o.insert(i,St.newNoDocument(i,J.min()));const a=le().add(i),l=new bd(J.min(),new Map,new je(ae),o,a);await gS(r,l),r.Ru=r.Ru.remove(i),r.Au.delete(e),Ry(r)}else await Sm(r.localStore,e,!1).then(()=>Am(r,e,n)).catch(Yo)}async function vF(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await IV(n.localStore,e);_S(n,r,null),yS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fc(n,s)}catch(s){await Yo(s)}}async function wF(t,e,n){const r=ee(t);try{const s=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(me(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);_S(r,e,n),yS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fc(r,s)}catch(s){await Yo(s)}}function yS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function _S(t,e,n){const r=ee(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Am(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||vS(t,r)})}function vS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Ty(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Ry(t))}function Qw(t,e,n){for(const r of n)r instanceof fS?(t.Vu.addReference(r.key,e),xF(t,r)):r instanceof pS?(q(Cy,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||vS(t,r.key)):X(19791,{wu:r})}function xF(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(q(Cy,"New document in limbo: "+n),t.Eu.add(r),Ry(t))}function Ry(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new uF(n)),t.Ru=t.Ru.insert(n,r),aS(t.remoteStore,new ns(er(A1(n.path)),r,"TargetPurposeLimboResolution",yd.ce))}}async function fc(t,e,n){const r=ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=xy.Es(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(l,c){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,f=>j.forEach(f.Ts,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>j.forEach(f.Is,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Go(d))throw d;q(Ey,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.vs.get(f),v=m.snapshotVersion,E=m.withLastLimboFreeSnapshotVersion(v);h.vs=h.vs.insert(f,E)}}}(r.localStore,i))}async function EF(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){q(Cy,"User change. New user:",e.toKey());const r=await rS(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new $(F.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fc(n,r.Ns)}}function TF(t,e){const n=ee(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let s=le();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function wS(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_F.bind(null,e),e.Pu.J_=iF.bind(null,e.eventManager),e.Pu.yu=oF.bind(null,e.eventManager),e}function bF(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wF.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bV(this.persistence,new xV,e.initialUser,this.serializer)}Cu(e){return new nS(wy.Vi,this.serializer)}Du(e){return new RV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class IF extends Nh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){me(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new nS(r=>Ch.Vi(r,n),this.serializer)}}class Cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EF.bind(null,this.syncEngine),await eF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nF}()}createDatastore(e){const n=Id(e.databaseInfo.databaseId),r=LV(e.databaseInfo);return zV(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new WV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Kw(this.syncEngine,n,0),function(){return Ww.v()?new Ww:new NV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new hF(s,i,o,a,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);q(xi,"RemoteStore shutting down."),i.Ea.add(5),await dc(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Cm.provider={build:()=>new Cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class kF{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=cy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(Cs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(Cs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Py(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qf(t,e){t.asyncQueue.verifyOperationInProgress(),q(Cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PF(t);q(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$w(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$w(e.remoteStore,s)),t._onlineComponents=e}async function PF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Cs,"Using user provided OfflineComponentProvider");try{await qf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),await qf(t,new Nh)}}else q(Cs,"Using default OfflineComponentProvider"),await qf(t,new IF(void 0));return t._offlineComponents}async function xS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Cs,"Using user provided OnlineComponentProvider"),await Xw(t,t._uninitializedComponentsProvider._online)):(q(Cs,"Using default OnlineComponentProvider"),await Xw(t,new Cm))),t._onlineComponents}function AF(t){return xS(t).then(e=>e.syncEngine)}async function CF(t){const e=await xS(t),n=e.eventManager;return n.onListen=dF.bind(null,e.syncEngine),n.onUnlisten=mF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gF.bind(null,e.syncEngine),n}function RF(t,e,n={}){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new SF({next:f=>{h.Nu(),o.enqueueAndForget(()=>sF(i,d)),f.fromCache&&l.source==="server"?c.reject(new $(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new aF(a,h,{includeMetadataChanges:!0,Ka:!0});return rF(i,d)}(await CF(t),t.asyncQueue,e,n,r)),r.promise}function NF(t,e){const n=new vs;return t.asyncQueue.enqueueAndForget(async()=>yF(await AF(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF="ComponentProvider",Jw=new Map;function OF(t,e,n,r,s){return new QM(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,ES(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="firestore.googleapis.com",Zw=!0;class ex{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TS,this.ssl=Zw}else this.host=e.host,this.ssl=e.ssl??Zw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sV)throw new $(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ES(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ex({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ex(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PM;switch(r.type){case"firstParty":return new NM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jw.get(n);r&&(q(DF,"Removing Datastore"),Jw.delete(n),r.terminate())}(this),Promise.resolve()}}function MF(t,e,n,r={}){var c;t=Co(t,Pd);const s=Ls(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Kg(`https://${a}`),Qg("Firestore",!0)),i.host!==TS&&i.host!==a&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!gi(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=bt.MOCK_USER;else{h=gI(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new $(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new bt(f)}t._authCredentials=new AM(new u1(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(cc(n,at._jsonSchema))return new at(e,r||null,new G(Te.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:tt("string",at._jsonSchemaVersion),referencePath:tt("string")};class ws extends Us{constructor(e,n,r){super(e,n,A1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new G(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function Xe(t,e,...n){if(t=nt(t),h1("collection","path",e),t instanceof Pd){const r=Te.fromString(e,...n);return fw(r),new ws(t,null,r)}{if(!(t instanceof at||t instanceof ws))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return fw(r),new ws(t.firestore,null,r)}}function Rm(t,e,...n){if(t=nt(t),arguments.length===1&&(e=cy.newId()),h1("doc","path",e),t instanceof Pd){const r=Te.fromString(e,...n);return dw(r),new at(t,null,new G(r))}{if(!(t instanceof at||t instanceof ws))throw new $(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return dw(r),new at(t.firestore,t instanceof ws?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="AsyncQueue";class nx{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iS(this,"async_queue_retry"),this._c=()=>{const r=$f();r&&q(tx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=$f();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new vs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Go(e))throw e;q(tx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Pr("INTERNAL UNHANDLED ERROR: ",rx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ky.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:rx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ad extends Pd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new nx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nx(e),this._firestoreClient=void 0,await e}}}function LF(t,e){const n=typeof t=="object"?t:Zg(),r=typeof t=="string"?t:Th,s=dd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=fI("firestore");i&&MF(s,...i)}return s}function bS(t){if(t._terminated)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VF(t),t._firestoreClient}function VF(t){var r,s,i,o;const e=t._freezeSettings(),n=OF(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new kF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new un(vt.fromBase64String(e))}catch(n){throw new $(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new un(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cc(e,un._jsonSchema))return un.fromBase64String(e.bytes)}}un._jsonSchemaVersion="firestore/bytes/1.0",un._jsonSchema={type:tt("string",un._jsonSchemaVersion),bytes:tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rr._jsonSchemaVersion}}static fromJSON(e){if(cc(e,rr._jsonSchema))return new rr(e.latitude,e.longitude)}}rr._jsonSchemaVersion="firestore/geoPoint/1.0",rr._jsonSchema={type:tt("string",rr._jsonSchemaVersion),latitude:tt("number"),longitude:tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cc(e,Pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pn(e.vectorValues);throw new $(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:tt("string",Pn._jsonSchemaVersion),vectorValues:tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=/^__.*__$/;class jF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,n,this.fieldTransforms):new uc(e,this.data,n,this.fieldTransforms)}}function kS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{dataSource:t})}}class Ny{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ny({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Dh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(kS(this.dataSource)&&FF.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class UF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Id(e)}createContext(e,n,r,s=!1){return new Ny({dataSource:e,methodName:n,targetDoc:r,path:gt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dy(t){const e=t._freezeSettings(),n=Id(t._databaseId);return new UF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PS(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);RS("Data must be an object, but it was:",o,r);const a=AS(r,o);let l,c;if(i.merge)l=new bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=Cd(e,d,n);if(!o.contains(f))throw new $(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);HF(h,f)||h.push(f)}l=new bn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new jF(new cn(a),l,c)}function zF(t,e,n,r=!1){return Oy(n,t.createContext(r?4:3,e))}function Oy(t,e){if(CS(t=nt(t)))return RS("Unsupported field value:",e,t),AS(t,e);if(t instanceof SS)return function(r,s){if(!kS(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Oy(a,s.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EL(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ae.fromDate(r);return{timestampValue:Ah(s.serializer,i)}}if(r instanceof Ae){const i=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(s.serializer,i)}}if(r instanceof rr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof un)return{bytesValue:Y1(s.serializer,r._byteString)};if(r instanceof at){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_y(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pn)return function(o,a){const l=o instanceof Pn?o.toArray():o;return{mapValue:{fields:{[w1]:{stringValue:x1},[bh]:{arrayValue:{values:l.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return my(a.serializer,h)})}}}}}}(r,s);if(eS(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${gd(r)}`)}(t,e)}function AS(t,e){const n={};return p1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(t,(r,s)=>{const i=Oy(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function CS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof rr||t instanceof un||t instanceof at||t instanceof SS||t instanceof Pn||eS(t))}function RS(t,e,n){if(!CS(n)||!d1(n)){const r=gd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Cd(t,e,n){if((e=nt(e))instanceof IS)return e._internalPath;if(typeof e=="string")return WF(t,e);throw Dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const BF=new RegExp("[~\\*/\\[\\]]");function WF(t,e,n){if(e.search(BF)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new IS(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new $(F.INVALID_ARGUMENT,a+t+l)}function HF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ki(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[bh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>qe(o.doubleValue));return new Pn(n)}convertGeoPoint(e){return new rr(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);me(Z1(r),9688,{name:e});const s=new Ul(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Pr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF extends $F{constructor(e){super(),this.firestore=e}convertBytes(e){return new un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}const sx="@firebase/firestore",ix="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Cd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class YF extends NS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class My{}class Ly extends My{}function lr(t,e,...n){let r=[];e instanceof My&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Fy).length,a=i.filter(l=>l instanceof Vy).length;if(o>1||o>0&&a>0)throw new $(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Vy extends Ly{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vy(e,n,r)}_apply(e){const n=this._parse(e);return DS(e._query,n),new Us(e.firestore,e.converter,xm(e._query,n))}_parse(e){const n=Dy(e.firestore);return function(i,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ax(d,h);const v=[];for(const E of d)v.push(ox(l,i,E));f={arrayValue:{values:v}}}else f=ox(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ax(d,h),f=zF(a,o,d,h==="in"||h==="not-in");return et.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Fy extends My{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)DS(o,l),o=xm(o,l)}(e._query,n),new Us(e.firestore,e.converter,xm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jy extends Ly{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bl(i,o)}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,pL(e._query,n))}}function cr(t,e="asc"){const n=e,r=Cd("orderBy",t);return jy._create(r,n)}class Uy extends Ly{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Uy(e,n,r)}_apply(e){return new Us(e.firestore,e.converter,Sh(e._query,this._limit,this._limitType))}}function Xo(t){return jM("limit",t),Uy._create("limit",t,"F")}function ox(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new $(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C1(e)&&n.indexOf("/")!==-1)throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!G.isDocumentKey(r))throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xw(t,new G(r))}if(n instanceof at)return xw(t,n._key);throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(n)}.`)}function ax(t,e){if(!Array.isArray(t)||t.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function OS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Zc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends NS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_o._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:tt("string",_o._jsonSchemaVersion),bundleSource:tt("string","DocumentSnapshot"),bundleName:tt("string"),bundle:tt("string")};class Vu extends _o{data(e={}){return super.data(e)}}class vo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Zc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vu(this._firestore,this._userDataWriter,r.key,r,new Zc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Vu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Vu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:KF(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:tt("string",vo._jsonSchemaVersion),bundleSource:tt("string","QuerySnapshot"),bundleName:tt("string"),bundle:tt("string")};function Dn(t){t=Co(t,Us);const e=Co(t.firestore,Ad),n=bS(e),r=new qF(e);return GF(t._query),RF(n,t._query).then(s=>new vo(e,r,t,s))}function lx(t,e,n){t=Co(t,at);const r=Co(t.firestore,Ad),s=OS(t.converter,e),i=Dy(r);return MS(r,[PS(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,tr.none())])}function ir(t,e){const n=Co(t.firestore,Ad),r=Rm(t),s=OS(t.converter,e),i=Dy(t.firestore);return MS(n,[PS(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}function MS(t,e){const n=bS(t);return NF(n,e)}(function(e,n=!0){kM(Si),yi(new bs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ad(new CM(r.getProvider("auth-internal")),new DM(o,r.getProvider("app-check-internal")),XM(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Qn(sx,ix,e),Qn(sx,ix,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firebasestorage.googleapis.com",VS="storageBucket",QF=2*60*1e3,XF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e extends ar{constructor(e,n,r=0){super(Yf(e),`Firebase Storage: ${n} (${Yf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$e.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Be||(Be={}));function Yf(t){return"storage/"+t}function zy(){const t="An unknown error occurred, please check the error payload for server response.";return new $e(Be.UNKNOWN,t)}function JF(t){return new $e(Be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ZF(t){return new $e(Be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $e(Be.UNAUTHENTICATED,t)}function t4(){return new $e(Be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n4(t){return new $e(Be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function r4(){return new $e(Be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s4(){return new $e(Be.CANCELED,"User canceled the upload/download.")}function i4(t){return new $e(Be.INVALID_URL,"Invalid URL '"+t+"'.")}function o4(t){return new $e(Be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function a4(){return new $e(Be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VS+"' property when initializing the app?")}function l4(){return new $e(Be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function c4(){return new $e(Be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function u4(t){return new $e(Be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Nm(t){return new $e(Be.INVALID_ARGUMENT,t)}function FS(){return new $e(Be.APP_DELETED,"The Firebase app was deleted.")}function h4(t){return new $e(Be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function al(t,e){return new $e(Be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ia(t){throw new $e(Be.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Mt.makeFromUrl(e,n)}catch{return new Mt(e,"")}if(r.path==="")return r;throw o4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},E=n===LS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",y=new RegExp(`^https?://${E}/${s}/${b}`,"i"),T=[{regex:a,indices:l,postModify:i},{regex:m,indices:v,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<T.length;R++){const D=T[R],L=D.regex.exec(e);if(L){const I=L[D.indices.bucket];let _=L[D.indices.path];_||(_=""),r=new Mt(I,_),D.postModify(r);break}}if(r==null)throw i4(e);return r}}class d4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...b){c||(c=!0,e.apply(null,b))}function d(b){s=setTimeout(()=>{s=null,t(m,l())},b)}function f(){i&&clearTimeout(i)}function m(b,...y){if(c){f();return}if(b){f(),h.call(null,b,...y);return}if(l()||o){f(),h.call(null,b,...y);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,d(T)}let v=!1;function E(b){v||(v=!0,f(),!c&&(s!==null?(b||(a=2),clearTimeout(s),d(0)):b||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function p4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){return t!==void 0}function g4(t){return typeof t=="object"&&!Array.isArray(t)}function By(t){return typeof t=="string"||t instanceof String}function cx(t){return Wy()&&t instanceof Blob}function Wy(){return typeof Blob<"u"}function Dm(t,e,n,r){if(r<e)throw Nm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Nm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ci;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ci||(ci={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,r,s,i,o,a,l,c,h,d,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,E)=>{this.resolve_=v,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new eu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ci.NO_ERROR,l=i.getStatus();if(!a||y4(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ci.ABORT;r(!1,new eu(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new eu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());m4(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=zy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?FS():s4();o(l)}else{const l=r4();o(l)}};this.canceled_?n(!1,new eu(!1,null,!0)):this.backoffId_=f4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&p4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class eu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function v4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function w4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function x4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function E4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function T4(t,e,n,r,s,i,o=!0,a=!1){const l=jS(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return x4(h,e),v4(h,n),w4(h,i),E4(h,r),new _4(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function I4(...t){const e=b4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Wy())return new Blob(t);throw new $e(Be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function S4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){if(typeof atob>"u")throw u4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gf{constructor(e,n){this.data=e,this.contentType=n||null}}function P4(t,e){switch(t){case Yn.RAW:return new Gf(US(e));case Yn.BASE64:case Yn.BASE64URL:return new Gf(zS(t,e));case Yn.DATA_URL:return new Gf(C4(e),R4(e))}throw zy()}function US(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function A4(t){let e;try{e=decodeURIComponent(t)}catch{throw al(Yn.DATA_URL,"Malformed data URL.")}return US(e)}function zS(t,e){switch(t){case Yn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw al(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Yn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw al(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=k4(e)}catch(s){throw s.message.includes("polyfill")?s:al(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class BS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw al(Yn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=N4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function C4(t){const e=new BS(t);return e.base64?zS(Yn.BASE64,e.rest):A4(e.rest)}function R4(t){return new BS(t).contentType}function N4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){let r=0,s="";cx(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(cx(this.data_)){const r=this.data_,s=S4(r,e,n);return s===null?null:new Jr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Jr(r,!0)}}static getBlob(...e){if(Wy()){const n=e.map(r=>r instanceof Jr?r.data_:r);return new Jr(I4.apply(null,n))}else{const n=e.map(o=>By(o)?P4(Yn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Jr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t){let e;try{e=JSON.parse(t)}catch{return null}return g4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function O4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function WS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t,e){return e}class Dt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||M4}}let tu=null;function L4(t){return!By(t)||t.length<2?t:WS(t)}function HS(){if(tu)return tu;const t=[];t.push(new Dt("bucket")),t.push(new Dt("generation")),t.push(new Dt("metageneration")),t.push(new Dt("name","fullPath",!0));function e(i,o){return L4(o)}const n=new Dt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Dt("size");return s.xform=r,t.push(s),t.push(new Dt("timeCreated")),t.push(new Dt("updated")),t.push(new Dt("md5Hash",null,!0)),t.push(new Dt("cacheControl",null,!0)),t.push(new Dt("contentDisposition",null,!0)),t.push(new Dt("contentEncoding",null,!0)),t.push(new Dt("contentLanguage",null,!0)),t.push(new Dt("contentType",null,!0)),t.push(new Dt("metadata","customMetadata",!0)),tu=t,tu}function V4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Mt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function F4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return V4(r,t),r}function $S(t,e,n){const r=Hy(e);return r===null?null:F4(t,r,n)}function j4(t,e,n,r){const s=Hy(e);if(s===null||!By(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=Rd(f,n,r),v=jS({alt:"media",token:c});return m+v})[0]}function U4(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="prefixes",hx="items";function z4(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ux])for(const s of n[ux]){const i=s.replace(/\/$/,""),o=t._makeStorageReference(new Mt(e,i));r.prefixes.push(o)}if(n[hx])for(const s of n[hx]){const i=t._makeStorageReference(new Mt(e,s.name));r.items.push(i)}return r}function B4(t,e,n){const r=Hy(n);return r===null?null:z4(t,e,r)}class $y{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){if(!t)throw zy()}function W4(t,e){function n(r,s){const i=$S(t,s,e);return qy(i!==null),i}return n}function H4(t,e){function n(r,s){const i=B4(t,e,s);return qy(i!==null),i}return n}function $4(t,e){function n(r,s){const i=$S(t,s,e);return qy(i!==null),j4(i,s,t.host,t._protocol)}return n}function Yy(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=t4():s=e4():n.getStatus()===402?s=ZF(t.bucket):n.getStatus()===403?s=n4(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function q4(t){const e=Yy(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=JF(t.path)),i.serverResponse=s.serverResponse,i}return n}function Y4(t,e,n,r,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=e.bucketOnlyServerUrl(),a=Rd(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new $y(a,l,H4(t,e.bucket),c);return h.urlParams=i,h.errorHandler=Yy(e),h}function G4(t,e,n){const r=e.fullServerUrl(),s=Rd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new $y(s,i,$4(t,n),o);return a.errorHandler=q4(e),a}function K4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Q4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=K4(null,e)),r}function X4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let R=0;R<2;R++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Q4(e,r,s),h=U4(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=Jr.getBlob(d,r,f);if(m===null)throw l4();const v={name:c.fullPath},E=Rd(i,t.host,t._protocol),b="POST",y=t.maxUploadRetryTime,w=new $y(E,b,W4(t,n),y);return w.urlParams=v,w.headers=o,w.body=m.uploadData(),w.errorHandler=Yy(e),w}class J4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ci.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ci.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ci.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ia("cannot .send() more than once");if(Ls(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ia("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ia("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ia("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ia("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Z4 extends J4{initXhr(){this.xhr_.responseType="text"}}function Gy(){return new Z4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this._service=e,n instanceof Mt?this._location=n:this._location=Mt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ei(e,n)}get root(){const e=new Mt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WS(this._location.path)}get storage(){return this._service}get parent(){const e=D4(this._location.path);if(e===null)return null;const n=new Mt(this._location.bucket,e);return new Ei(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw h4(e)}}function ej(t,e,n){t._throwIfRoot("uploadBytes");const r=X4(t.storage,t._location,HS(),new Jr(e,!0),n);return t.storage.makeRequestWithTokens(r,Gy).then(s=>({metadata:s,ref:t}))}function tj(t){const e={prefixes:[],items:[]};return qS(t,e).then(()=>e)}async function qS(t,e,n){const s=await nj(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await qS(t,e,s.nextPageToken)}function nj(t,e){e!=null&&typeof e.maxResults=="number"&&Dm("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Y4(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Gy)}function rj(t){t._throwIfRoot("getDownloadURL");const e=G4(t.storage,t._location,HS());return t.storage.makeRequestWithTokens(e,Gy).then(n=>{if(n===null)throw c4();return n})}function sj(t,e){const n=O4(t._location.path,e),r=new Mt(t._location.bucket,n);return new Ei(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){return/^[A-Za-z]+:\/\//.test(t)}function oj(t,e){return new Ei(t,e)}function YS(t,e){if(t instanceof Ky){const n=t;if(n._bucket==null)throw a4();const r=new Ei(n,n._bucket);return e!=null?YS(r,e):r}else return e!==void 0?sj(t,e):t}function aj(t,e){if(e&&ij(e)){if(t instanceof Ky)return oj(t,e);throw Nm("To use ref(service, url), the first argument must be a Storage instance.")}else return YS(t,e)}function dx(t,e){const n=e==null?void 0:e[VS];return n==null?null:Mt.makeFromBucketSpec(n,t)}function lj(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ls(e);s&&(Kg(`https://${t.host}/b`),Qg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:gI(i,t.app.options.projectId))}class Ky{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=LS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QF,this._maxUploadRetryTime=XF,this._requests=new Set,s!=null?this._bucket=Mt.makeFromBucketSpec(s,this._host):this._bucket=dx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mt.makeFromBucketSpec(this._url,e):this._bucket=dx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ei(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new d4(FS());{const o=T4(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const fx="@firebase/storage",px="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="storage";function cj(t,e,n){return t=nt(t),ej(t,e,n)}function uj(t){return t=nt(t),tj(t)}function KS(t){return t=nt(t),rj(t)}function QS(t,e){return t=nt(t),aj(t,e)}function hj(t=Zg(),e){t=nt(t);const r=dd(t,GS).getImmediate({identifier:e}),s=fI("storage");return s&&dj(r,...s),r}function dj(t,e,n,r={}){lj(t,e,n,r)}function fj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ky(n,r,s,e,Si)}function pj(){yi(new bs(GS,fj,"PUBLIC").setMultipleInstances(!0)),Qn(fx,px,""),Qn(fx,px,"esm2020")}pj();const mj={apiKey:"AIzaSyDskYJol705ucTtdbE3zZIBpgJRVsqt_aY",authDomain:"water-velocity-project.firebaseapp.com",projectId:"water-velocity-project",storageBucket:"water-velocity-project.firebasestorage.app",messagingSenderId:"478499917558",appId:"1:478499917558:web:5d941d13e4ca875f2126d7",measurementId:"G-LLSY5LFLE0"},Qy=U0().length?U0()[0]:vI(mj),$i=TM(Qy),Me=LF(Qy),XS=hj(Qy),JS=O.createContext(void 0),gj=({children:t})=>{const[e,n]=O.useState(null),[r,s]=O.useState(!0);O.useEffect(()=>{const c=hO($i,async h=>{if(!h){try{await rO($i)}catch(f){console.error("Anonymous sign-in failed",f),n(null),s(!1)}return}const d={uid:h.uid,email:h.email||"guest",role:"user",token:await h.getIdToken()};n(d),s(!1)});return()=>c()},[]);const i=async(c,h)=>{const d=await lO($i,c,h),f={uid:d.user.uid,email:d.user.email||c,role:"user",token:await d.user.getIdToken()};n(f)},o=async(c,h,d)=>{const f=await aO($i,c,h),m={uid:f.user.uid,email:f.user.email||c,role:d,token:await f.user.getIdToken()};n(m)},a=()=>{dO($i).catch(()=>{}),n(null)},l=O.useMemo(()=>({user:e,loading:r,login:i,register:o,logout:a}),[e,r]);return x.jsx(JS.Provider,{value:l,children:t})},Xy=()=>{const t=O.useContext(JS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},yj=[{to:"/",label:"Overview"},{to:"/live",label:"Live Feed"},{to:"/velocity",label:"Velocity Analytics"},{to:"/alerts",label:"Alerts"},{to:"/notifications",label:"Notifications"},{to:"/sites",label:"Sites & Health"},{to:"/datasets",label:"Datasets"},{to:"/model",label:"Model"}],_j=()=>{const{logout:t,user:e}=Xy();return x.jsxs("aside",{className:"w-64 h-screen sticky top-0 flex flex-col border-r-4 border-slate-900 bg-white shadow-[6px_6px_0_#0f172a]",children:[x.jsxs("div",{className:"p-6 border-b-4 border-slate-900",children:[x.jsx("h1",{className:"text-xl font-bold text-slate-900 uppercase tracking-tight",children:"Water Velocity"}),x.jsx("p",{className:"text-xs text-slate-600",children:"Vision Flood Monitor"})]}),x.jsx("nav",{className:"flex-1 p-4 space-y-2",children:yj.map(n=>x.jsx(IN,{to:n.to,className:({isActive:r})=>`block px-3 py-2 rounded-md text-sm font-semibold border-2 border-slate-900 transition-all ${r?"bg-sky-200 text-slate-900 shadow-[4px_4px_0_#0f172a] translate-x-1":"bg-white text-slate-800 hover:-translate-y-0.5 hover:shadow-[4px_4px_0_#0f172a]"}`,children:n.label},n.to))}),x.jsxs("div",{className:"p-4 border-t-4 border-slate-900 text-sm text-slate-700 bg-slate-50",children:[x.jsx("p",{className:"mb-2 font-semibold",children:(e==null?void 0:e.email)||"guest@anon"}),x.jsx("button",{onClick:t,className:"w-full rounded-md border-2 border-slate-900 px-3 py-2 text-sm font-semibold hover:shadow-[3px_3px_0_#0f172a]",children:"Sign out"})]})]})},vj=()=>{const{user:t,loading:e}=Xy();return e?x.jsx("div",{className:"h-screen flex items-center justify-center text-slate-600",children:"Loading..."}):t?x.jsxs("div",{className:"flex min-h-screen bg-transparent",children:[x.jsx(_j,{}),x.jsx("main",{className:"flex-1 p-8 overflow-y-auto",children:x.jsx(hN,{})})]}):x.jsx(uN,{to:"/auth",replace:!0})},wj={default:"bg-slate-100 text-slate-800",success:"bg-emerald-100 text-emerald-800",danger:"bg-rose-100 text-rose-800",warning:"bg-amber-100 text-amber-800"},Fi=({title:t,value:e,hint:n,tone:r="default"})=>x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("div",{className:"text-sm text-slate-500 mb-1",children:t}),x.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:e}),n&&x.jsx("div",{className:`mt-2 inline-flex px-2 py-1 rounded-md text-xs ${wj[r]}`,children:n})]});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function pc(t){return t+.5|0}const rs=(t,e,n)=>Math.max(Math.min(t,n),e);function Wa(t){return rs(pc(t*2.55),0,255)}function xs(t){return rs(pc(t*255),0,255)}function mr(t){return rs(pc(t/2.55)/100,0,1)}function mx(t){return rs(pc(t*100),0,100)}const on={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Om=[..."0123456789ABCDEF"],xj=t=>Om[t&15],Ej=t=>Om[(t&240)>>4]+Om[t&15],nu=t=>(t&240)>>4===(t&15),Tj=t=>nu(t.r)&&nu(t.g)&&nu(t.b)&&nu(t.a);function bj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&on[t[1]]*17,g:255&on[t[2]]*17,b:255&on[t[3]]*17,a:e===5?on[t[4]]*17:255}:(e===7||e===9)&&(n={r:on[t[1]]<<4|on[t[2]],g:on[t[3]]<<4|on[t[4]],b:on[t[5]]<<4|on[t[6]],a:e===9?on[t[7]]<<4|on[t[8]]:255})),n}const Ij=(t,e)=>t<255?e(t):"";function Sj(t){var e=Tj(t)?xj:Ej;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Ij(t.a,e):void 0}const kj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ZS(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Pj(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Aj(t,e,n){const r=ZS(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function Cj(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Jy(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,h;return i!==o&&(h=i-o,c=a>.5?h/(2-i-o):h/(i+o),l=Cj(n,r,s,h,i),l=l*60+.5),[l|0,c||0,a]}function Zy(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(xs)}function e_(t,e,n){return Zy(ZS,t,e,n)}function Rj(t,e,n){return Zy(Aj,t,e,n)}function Nj(t,e,n){return Zy(Pj,t,e,n)}function ek(t){return(t%360+360)%360}function Dj(t){const e=kj.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Wa(+e[5]):xs(+e[5]));const s=ek(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Rj(s,i,o):e[1]==="hsv"?r=Nj(s,i,o):r=e_(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function Oj(t,e){var n=Jy(t);n[0]=ek(n[0]+e),n=e_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Mj(t){if(!t)return;const e=Jy(t),n=e[0],r=mx(e[1]),s=mx(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${mr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const gx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},yx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Lj(){const t={},e=Object.keys(yx),n=Object.keys(gx);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,gx[i]);i=parseInt(yx[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let ru;function Vj(t){ru||(ru=Lj(),ru.transparent=[0,0,0,0]);const e=ru[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Fj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function jj(t){const e=Fj.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Wa(o):rs(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Wa(r):rs(r,0,255)),s=255&(e[4]?Wa(s):rs(s,0,255)),i=255&(e[6]?Wa(i):rs(i,0,255)),{r,g:s,b:i,a:n}}}function Uj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${mr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Kf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ji=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function zj(t,e,n){const r=ji(mr(t.r)),s=ji(mr(t.g)),i=ji(mr(t.b));return{r:xs(Kf(r+n*(ji(mr(e.r))-r))),g:xs(Kf(s+n*(ji(mr(e.g))-s))),b:xs(Kf(i+n*(ji(mr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function su(t,e,n){if(t){let r=Jy(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=e_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function tk(t,e){return t&&Object.assign(e||{},t)}function _x(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=xs(t[3]))):(e=tk(t,{r:0,g:0,b:0,a:1}),e.a=xs(e.a)),e}function Bj(t){return t.charAt(0)==="r"?jj(t):Dj(t)}class $l{constructor(e){if(e instanceof $l)return e;const n=typeof e;let r;n==="object"?r=_x(e):n==="string"&&(r=bj(e)||Vj(e)||Bj(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=tk(this._rgb);return e&&(e.a=mr(e.a)),e}set rgb(e){this._rgb=_x(e)}rgbString(){return this._valid?Uj(this._rgb):void 0}hexString(){return this._valid?Sj(this._rgb):void 0}hslString(){return this._valid?Mj(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=zj(this._rgb,e._rgb,n)),this}clone(){return new $l(this.rgb)}alpha(e){return this._rgb.a=xs(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=pc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return su(this._rgb,2,e),this}darken(e){return su(this._rgb,2,-e),this}saturate(e){return su(this._rgb,1,e),this}desaturate(e){return su(this._rgb,1,-e),this}rotate(e){return Oj(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ur(){}const Wj=(()=>{let t=0;return()=>t++})();function Ie(t){return t==null}function dt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function de(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ct(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Fn(t,e){return Ct(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}const Hj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function _e(t,e,n,r){let s,i,o;if(dt(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(de(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Oh(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Mh(t){if(dt(t))return t.map(Mh);if(de(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Mh(t[n[s]]);return e}return t}function nk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $j(t,e,n,r){if(!nk(t))return;const s=e[t],i=n[t];de(s)&&de(i)?ql(s,i,r):e[t]=Mh(i)}function ql(t,e,n){const r=dt(e)?e:[e],s=r.length;if(!de(t))return t;n=n||{};const i=n.merger||$j;let o;for(let a=0;a<s;++a){if(o=r[a],!de(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)i(l[c],t,o,n)}return t}function ll(t,e){return ql(t,e,{merger:qj})}function qj(t,e,n){if(!nk(t))return;const r=e[t],s=n[t];de(r)&&de(s)?ll(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Mh(s))}const vx={"":t=>t,x:t=>t.x,y:t=>t.y};function Yj(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Gj(t){const e=Yj(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Lh(t,e){return(vx[e]||(vx[e]=Gj(e)))(t)}function t_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Vh=t=>typeof t<"u",Rs=t=>typeof t=="function",wx=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Kj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const kt=Math.PI,An=2*kt,Qj=An+kt,Fh=Number.POSITIVE_INFINITY,Xj=kt/180,In=kt/2,qs=kt/4,xx=kt*2/3,rk=Math.log10,Mo=Math.sign;function cl(t,e,n){return Math.abs(t-e)<n}function Ex(t){const e=Math.round(t);t=cl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(rk(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Jj(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function Zj(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Yl(t){return!Zj(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function e3(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function t3(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function ii(t){return t*(kt/180)}function n3(t){return t*(180/kt)}function Tx(t){if(!Ct(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function r3(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*kt&&(i+=An),{angle:i,distance:s}}function Mm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function s3(t,e){return(t-e+Qj)%An-kt}function Wn(t){return(t%An+An)%An}function sk(t,e,n,r){const s=Wn(t),i=Wn(e),o=Wn(n),a=Wn(i-s),l=Wn(o-s),c=Wn(s-i),h=Wn(s-o);return s===i||s===o||r&&i===o||a>l&&c<h}function dn(t,e,n){return Math.max(e,Math.min(n,t))}function i3(t){return dn(t,-32768,32767)}function io(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function n_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const oi=(t,e,n,r)=>n_(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),o3=(t,e,n)=>n_(t,n,r=>t[r][e]>=n);function a3(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const ik=["push","pop","shift","splice","unshift"];function l3(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ik.forEach(n=>{const r="_onData"+t_(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function bx(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(ik.forEach(i=>{delete t[i]}),delete t._chartjs)}function c3(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ok=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function ak(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,ok.call(window,()=>{r=!1,t.apply(e,n)}))}}function u3(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const lk=t=>t==="start"?"left":t==="end"?"right":"center",Xt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,h3=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function d3(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(s=Math.min(oi(l,h,d).lo,n?r:oi(e,h,o.getPixelForValue(d)).lo),c){const E=l.slice(0,s+1).reverse().findIndex(b=>!Ie(b[a.axis]));s-=Math.max(0,E)}s=dn(s,0,r-1)}if(v){let E=Math.max(oi(l,o.axis,f,!0).hi+1,n?0:oi(e,h,o.getPixelForValue(f),!0).hi+1);if(c){const b=l.slice(E-1).findIndex(y=>!Ie(y[a.axis]));E+=Math.max(0,b)}i=dn(E,s,r)-s}else i=r-s}return{start:s,count:i}}function f3(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const iu=t=>t===0||t===1,Ix=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*An/n)),Sx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*An/n)+1,ul={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*In)+1,easeOutSine:t=>Math.sin(t*In),easeInOutSine:t=>-.5*(Math.cos(kt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>iu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>iu(t)?t:Ix(t,.075,.3),easeOutElastic:t=>iu(t)?t:Sx(t,.075,.3),easeInOutElastic(t){return iu(t)?t:t<.5?.5*Ix(t*2,.1125,.45):.5+.5*Sx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ul.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ul.easeInBounce(t*2)*.5:ul.easeOutBounce(t*2-1)*.5+.5};function r_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function kx(t){return r_(t)?t:new $l(t)}function Qf(t){return r_(t)?t:new $l(t).saturate(.5).darken(.1).hexString()}const p3=["x","y","borderWidth","radius","tension"],m3=["color","borderColor","backgroundColor"];function g3(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:m3},numbers:{type:"number",properties:p3}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function y3(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Px=new Map;function _3(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Px.get(n);return r||(r=new Intl.NumberFormat(t,e),Px.set(n,r)),r}function ck(t,e,n){return _3(e,n).format(t)}const v3={values(t){return dt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=w3(t,n)}const o=rk(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ck(t,r,l)}};function w3(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var uk={formatters:v3};function x3(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ti=Object.create(null),Lm=Object.create(null);function hl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Xf(t,e,n){return typeof e=="string"?ql(hl(t,e),n):ql(hl(t,""),e)}class E3{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Qf(s.backgroundColor),this.hoverBorderColor=(r,s)=>Qf(s.borderColor),this.hoverColor=(r,s)=>Qf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Xf(this,e,n)}get(e){return hl(this,e)}describe(e,n){return Xf(Lm,e,n)}override(e,n){return Xf(Ti,e,n)}route(e,n,r,s){const i=hl(this,e),o=hl(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return de(l)?Object.assign({},c,l):ue(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ge=new E3({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[g3,y3,x3]);function T3(t){return!t||Ie(t.size)||Ie(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ax(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Ys(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Cx(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Vm(t,e,n,r){hk(t,e,n,r,null)}function hk(t,e,n,r,s){let i,o,a,l,c,h,d,f;const m=e.pointStyle,v=e.rotation,E=e.radius;let b=(v||0)*Xj;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(b),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),m){default:s?t.ellipse(n,r,s/2,E,0,0,An):t.arc(n,r,E,0,An),t.closePath();break;case"triangle":h=s?s/2:E,t.moveTo(n+Math.sin(b)*h,r-Math.cos(b)*E),b+=xx,t.lineTo(n+Math.sin(b)*h,r-Math.cos(b)*E),b+=xx,t.lineTo(n+Math.sin(b)*h,r-Math.cos(b)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(b+qs)*l,d=Math.cos(b+qs)*(s?s/2-c:l),a=Math.sin(b+qs)*l,f=Math.sin(b+qs)*(s?s/2-c:l),t.arc(n-d,r-a,c,b-kt,b-In),t.arc(n+f,r-o,c,b-In,b),t.arc(n+d,r+a,c,b,b+In),t.arc(n-f,r+o,c,b+In,b+kt),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*E,h=s?s/2:l,t.rect(n-h,r-l,2*h,2*l);break}b+=qs;case"rectRot":d=Math.cos(b)*(s?s/2:E),o=Math.cos(b)*E,a=Math.sin(b)*E,f=Math.sin(b)*(s?s/2:E),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":b+=qs;case"cross":d=Math.cos(b)*(s?s/2:E),o=Math.cos(b)*E,a=Math.sin(b)*E,f=Math.sin(b)*(s?s/2:E),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(b)*(s?s/2:E),o=Math.cos(b)*E,a=Math.sin(b)*E,f=Math.sin(b)*(s?s/2:E),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),b+=qs,d=Math.cos(b)*(s?s/2:E),o=Math.cos(b)*E,a=Math.sin(b)*E,f=Math.sin(b)*(s?s/2:E),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=s?s/2:Math.cos(b)*E,a=Math.sin(b)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(b)*(s?s/2:E),r+Math.sin(b)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Nd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Dd(t){t.restore()}function b3(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function I3(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function S3(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ie(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function k3(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function P3(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function jh(t,e,n,r,s,i={}){const o=dt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,S3(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&P3(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ie(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),k3(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function Fm(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*kt,kt,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,kt,In,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,In,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-In,!0),t.lineTo(n+o.topLeft,r)}const A3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,C3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function R3(t,e){const n=(""+t).match(A3);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const N3=t=>+t||0;function dk(t,e){const n={},r=de(e),s=r?Object.keys(e):e,i=de(t)?r?o=>ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=N3(i(o));return n}function D3(t){return dk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function dl(t){return dk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function On(t){const e=D3(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function $t(t,e){t=t||{},e=e||Ge.font;let n=ue(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ue(t.style,e.style);r&&!(""+r).match(C3)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ue(t.family,e.family),lineHeight:R3(ue(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ue(t.weight,e.weight),string:""};return s.string=T3(s),s}function ou(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function O3(t,e,n){const{min:r,max:s}=t,i=Hj(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Ri(t,e){return Object.assign(Object.create(t),e)}function s_(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=gk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>s_([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return pk(a,l,()=>B3(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Nx(a).includes(l)},ownKeys(a){return Nx(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Lo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:fk(t,r),setContext:i=>Lo(t,i,n,r),override:i=>Lo(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return pk(i,o,()=>L3(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function fk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Rs(n)?n:()=>n,isIndexable:Rs(r)?r:()=>r}}const M3=(t,e)=>t?t+t_(e):e,i_=(t,e)=>de(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function L3(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Rs(a)&&o.isScriptable(e)&&(a=V3(e,a,t,n)),dt(a)&&a.length&&(a=F3(e,a,t,o.isIndexable)),i_(e,a)&&(a=Lo(a,s,i&&i[e],o)),a}function V3(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),i_(t,l)&&(l=o_(s._scopes,s,t,l)),l}function F3(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(de(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=o_(c,s,t,h);e.push(Lo(d,i,o&&o[t],a))}}return e}function mk(t,e,n){return Rs(t)?t(e,n):t}const j3=(t,e)=>t===!0?e:typeof t=="string"?Lh(e,t):void 0;function U3(t,e,n,r,s){for(const i of e){const o=j3(n,i);if(o){t.add(o);const a=mk(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function o_(t,e,n,r){const s=e._rootScopes,i=mk(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Rx(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Rx(a,o,i,l,r),l===null)?!1:s_(Array.from(a),[""],s,i,()=>z3(e,n,r))}function Rx(t,e,n,r,s){for(;n;)n=U3(t,e,n,r,s);return n}function z3(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return dt(s)&&de(n)?n:s||{}}function B3(t,e,n,r){let s;for(const i of e)if(s=gk(M3(i,t),n),typeof s<"u")return i_(t,s)?o_(n,r,t,s):s}function gk(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Nx(t){let e=t._keys;return e||(e=t._keys=W3(t._scopes)),e}function W3(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const H3=Number.EPSILON||1e-14,Vo=(t,e)=>e<t.length&&!t[e].skip&&t[e],yk=t=>t==="x"?"y":"x";function $3(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Mm(i,s),l=Mm(o,i);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,f=r*h;return{previous:{x:i.x-d*(o.x-s.x),y:i.y-d*(o.y-s.y)},next:{x:i.x+f*(o.x-s.x),y:i.y+f*(o.y-s.y)}}}function q3(t,e,n){const r=t.length;let s,i,o,a,l,c=Vo(t,0);for(let h=0;h<r-1;++h)if(l=c,c=Vo(t,h+1),!(!l||!c)){if(cl(e[h],0,H3)){n[h]=n[h+1]=0;continue}s=n[h]/e[h],i=n[h+1]/e[h],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=s*o*e[h],n[h+1]=i*o*e[h])}}function Y3(t,e,n="x"){const r=yk(n),s=t.length;let i,o,a,l=Vo(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Vo(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(i=(h-o[n])/3,a[`cp1${n}`]=h-i,a[`cp1${r}`]=d-i*e[c]),l&&(i=(l[n]-h)/3,a[`cp2${n}`]=h+i,a[`cp2${r}`]=d+i*e[c])}}function G3(t,e="x"){const n=yk(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Vo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Vo(t,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[n]-l[n])/h:0}i[o]=a?c?Mo(s[o-1])!==Mo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}q3(t,s,i),Y3(t,i,e)}function au(t,e,n){return Math.max(Math.min(t,n),e)}function K3(t,e){let n,r,s,i,o,a=Gl(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Gl(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=au(s.cp1x,e.left,e.right),s.cp1y=au(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=au(s.cp2x,e.left,e.right),s.cp2y=au(s.cp2y,e.top,e.bottom)))}function Q3(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")G3(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=$3(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&K3(t,n)}function a_(){return typeof window<"u"&&typeof document<"u"}function l_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Uh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Od=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function X3(t,e){return Od(t).getPropertyValue(e)}const J3=["top","right","bottom","left"];function ui(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=J3[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Z3=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function eU(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(Z3(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Js(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Od(n),i=s.boxSizing==="border-box",o=ui(s,"padding"),a=ui(s,"border","width"),{x:l,y:c,box:h}=eU(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:v}=e;return i&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*n.width/r),y:Math.round((c-f)/v*n.height/r)}}function tU(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&l_(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Od(i),l=ui(a,"border","width"),c=ui(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Uh(a.maxWidth,i,"clientWidth"),s=Uh(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Fh,maxHeight:s||Fh}}const ss=t=>Math.round(t*10)/10;function nU(t,e,n,r){const s=Od(t),i=ui(s,"margin"),o=Uh(s.maxWidth,t,"clientWidth")||Fh,a=Uh(s.maxHeight,t,"clientHeight")||Fh,l=tU(t,e,n);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const f=ui(s,"border","width"),m=ui(s,"padding");c-=m.width+f.width,h-=m.height+f.height}return c=Math.max(0,c-i.width),h=Math.max(0,r?c/r:h-i.height),c=ss(Math.min(c,o,l.maxWidth)),h=ss(Math.min(h,a,l.maxHeight)),c&&!h&&(h=ss(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=ss(Math.floor(h*r))),{width:c,height:h}}function Dx(t,e,n){const r=e||1,s=ss(t.height*r),i=ss(t.width*r);t.height=ss(t.height),t.width=ss(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const rU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};a_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Ox(t,e){const n=X3(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Zs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function sU(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function iU(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Zs(t,s,n),a=Zs(s,i,n),l=Zs(i,e,n),c=Zs(o,a,n),h=Zs(a,l,n);return Zs(c,h,n)}const oU=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},aU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function wo(t,e,n){return t?oU(e,n):aU()}function _k(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function vk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wk(t){return t==="angle"?{between:sk,compare:s3,normalize:Wn}:{between:io,compare:(e,n)=>e-n,normalize:e=>e}}function Mx({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function lU(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=wk(r),l=e.length;let{start:c,end:h,loop:d}=t,f,m;if(d){for(c+=l,h+=l,f=0,m=l;f<m&&o(a(e[c%l][r]),s,i);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function xk(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=wk(r),{start:h,end:d,loop:f,style:m}=lU(t,e,n),v=[];let E=!1,b=null,y,w,T;const R=()=>l(s,T,y)&&a(s,T)!==0,D=()=>a(i,y)===0||l(i,T,y),L=()=>E||R(),I=()=>!E||D();for(let _=h,k=h;_<=d;++_)w=e[_%o],!w.skip&&(y=c(w[r]),y!==T&&(E=l(y,s,i),b===null&&L()&&(b=a(y,s)===0?_:k),b!==null&&I()&&(v.push(Mx({start:b,end:_,loop:f,count:o,style:m})),b=null),k=_,T=y));return b!==null&&v.push(Mx({start:b,end:d,loop:f,count:o,style:m})),v}function Ek(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=xk(r[s],t.points,e);i.length&&n.push(...i)}return n}function cU(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function uU(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function hU(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=cU(n,s,i,r);if(r===!0)return Lx(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return Lx(t,uU(n,o,l,c),n,e)}function Lx(t,e,n,r){return!r||!r.setContext||!n?e:dU(t,e,n,r)}function dU(t,e,n,r){const s=t._chart.getContext(),i=Vx(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=i,d=e[0].start,f=d;function m(v,E,b,y){const w=a?-1:1;if(v!==E){for(v+=l;n[v%l].skip;)v-=w;for(;n[E%l].skip;)E+=w;v%l!==E%l&&(c.push({start:v%l,end:E%l,loop:b,style:y}),h=y,d=E%l)}}for(const v of e){d=a?d:v.start;let E=n[d%l],b;for(f=d+1;f<=v.end;f++){const y=n[f%l];b=Vx(r.setContext(Ri(s,{type:"segment",p0:E,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),fU(b,h)&&m(d,f-1,v.loop,h),E=y,h=b}d<f-1&&m(d,f-1,v.loop,h)}return c}function Vx(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function fU(t,e){if(!e)return!1;const n=[],r=function(s,i){return r_(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function lu(t,e,n){return t.options.clip?t[n]:e[n]}function pU(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:lu(n,e,"left"),right:lu(n,e,"right"),top:lu(r,e,"top"),bottom:lu(r,e,"bottom")}:e}function Tk(t,e){const n=e._clip;if(n.disabled)return!1;const r=pU(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ok.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var hr=new mU;const Fx="transparent",gU={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=kx(t||Fx),s=r.valid&&kx(e||Fx);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class yU{constructor(e,n,r,s){const i=n[r];s=ou([e.to,s,i,e.from]);const o=ou([e.from,i,s]);this._active=!0,this._fn=e.fn||gU[e.type||typeof o],this._easing=ul[e.easing]||ul.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=ou([e.to,n,s,e.from]),this._from=ou([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class bk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!de(e))return;const n=Object.keys(Ge.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!de(i))return;const o={};for(const a of n)o[a]=i[a];(dt(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=vU(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&_U(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const h=n[c];let d=i[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}i[c]=d=new yU(f,e,c,h),s.push(d)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return hr.add(this._chart,r),!0}}function _U(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function vU(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function jx(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function wU(t,e,n){if(n===!1)return!1;const r=jx(t,n),s=jx(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function xU(t){let e,n,r,s;return de(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Ik(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Ux(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],Ct(c)&&(i||e===0||Mo(e)===Mo(c))&&(e+=c)}return!h&&!r.all?0:e}function EU(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[i]:t[h]};return a}function Jf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function TU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function bU(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function IU(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function zx(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Bx(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,h=TU(i,o,r),d=e.length;let f;for(let m=0;m<d;++m){const v=e[m],{[l]:E,[c]:b}=v,y=v._stacks||(v._stacks={});f=y[c]=IU(s,h,E),f[a]=b,f._top=zx(f,o,!0,r.type),f._bottom=zx(f,o,!1,r.type);const w=f._visualValues||(f._visualValues={});w[a]=b}}function Zf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function SU(t,e){return Ri(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function kU(t,e,n){return Ri(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Sa(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const ep=t=>t==="reset"||t==="none",Wx=(t,e)=>e?t:Object.assign({},t),PU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ik(n,!0),values:null};class fl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Jf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(d,f,m,v)=>d==="x"?f:d==="r"?v:m,i=n.xAxisID=ue(r.xAxisID,Zf(e,"x")),o=n.yAxisID=ue(r.yAxisID,Zf(e,"y")),a=n.rAxisID=ue(r.rAxisID,Zf(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),h=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&bx(this._data,this),e._stacked&&Sa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(de(n)){const s=this._cachedMeta;this._data=EU(n,s)}else if(r!==n){if(r){bx(r,this);const s=this._cachedMeta;Sa(s),s._parsed=[]}n&&Object.isExtensible(n)&&l3(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Jf(n.vScale,n),n.stack!==r.stack&&(s=!0,Sa(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Bx(this,n._parsed),n._stacked=Jf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{dt(s[e])?f=this.parseArrayData(r,s,e,n):de(s[e])?f=this.parseObjectData(r,s,e,n):f=this.parsePrimitiveData(r,s,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),c=d);r._sorted=l}o&&Bx(this,f)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),h=i===o,d=new Array(s);let f,m,v;for(f=0,m=s;f<m;++f)v=f+r,d[f]={[a]:h||i.parse(c[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,h,d;for(l=0,c=s;l<c;++l)h=l+r,d=n[h],a[l]={x:i.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,d,f,m;for(h=0,d=s;h<d;++h)f=h+r,m=n[f],c[h]={x:i.parse(Lh(m,a),f),y:o.parse(Lh(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:Ik(s,!0),values:n._stacks[e.axis]._visualValues};return Ux(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=Ux(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=PU(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=bU(a);let f,m;function v(){m=s[f];const E=m[a.axis];return!Ct(m[e.axis])||h>E||d<E}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Ct(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=xU(ue(this.options.clip,wU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,i,a,l),h=a;h<a+l;++h){const d=s[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=kU(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=SU(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Vh(r);if(a)return Wx(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Ge.elements[e]),v=()=>this.getContext(r,s,n),E=c.resolveNamedOptions(f,m,v,d);return E.$shared&&(E.$shared=l,i[o]=Object.freeze(Wx(E,l))),E}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,r,n))}const c=new bk(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ep(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){ep(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!ep(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Sa(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}U(fl,"defaults",{}),U(fl,"datasetElementType",null),U(fl,"dataElementType",null);class Fu extends fl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=d3(n,s,o);this._drawStart=a,this._drawCount=l,f3(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,s),f=o.axis,m=a.axis,{spanGaps:v,segment:E}=this.options,b=Yl(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||s==="none",w=n+r,T=e.length;let R=n>0&&this.getParsed(n-1);for(let D=0;D<T;++D){const L=e[D],I=y?L:{};if(D<n||D>=w){I.skip=!0;continue}const _=this.getParsed(D),k=Ie(_[m]),P=I[f]=o.getPixelForValue(_[f],D),C=I[m]=i||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],D);I.skip=isNaN(P)||isNaN(C)||k,I.stop=D>0&&Math.abs(_[f]-R[f])>b,E&&(I.parsed=_,I.raw=c.data[D]),d&&(I.options=h||this.resolveDataElementOptions(D,L.active?"active":s)),y||this.updateElement(L,D,I,s),R=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}U(Fu,"id","line"),U(Fu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),U(Fu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Gs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class c_{constructor(e){U(this,"options");this.options=e||{}}static override(e){Object.assign(c_.prototype,e)}init(){}formats(){return Gs()}parse(){return Gs()}format(){return Gs()}add(){return Gs()}diff(){return Gs()}startOf(){return Gs()}endOf(){return Gs()}}var Sk={_date:c_};function AU(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?o3:oi;if(r){if(s._sharedOptions){const h=i[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(i,e,n-d),m=c(i,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=c(i,e,n);if(l){const{vScale:d}=s._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(E=>!Ie(E[d.axis]));h.lo-=Math.max(0,m);const v=f.slice(h.hi).findIndex(E=>!Ie(E[d.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:i.length-1}}function Md(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:h}=i[a],{lo:d,hi:f}=AU(i[a],e,o,s);for(let m=d;m<=f;++m){const v=h[m];v.skip||r(v,c,m)}}}function CU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function tp(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Md(t,n,e,function(a,l,c){!s&&!Gl(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function RU(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=r3(o,{x:e.x,y:e.y});sk(d,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return Md(t,n,e,i),s}function NU(t,e,n,r,s,i){let o=[];const a=CU(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const m=h.inRange(e.x,e.y,s);if(r&&!m)return;const v=h.getCenterPoint(s);if(!(!!i||t.isPointInArea(v))&&!m)return;const b=a(e,v);b<l?(o=[{element:h,datasetIndex:d,index:f}],l=b):b===l&&o.push({element:h,datasetIndex:d,index:f})}return Md(t,n,e,c),o}function np(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?RU(t,e,n,s):NU(t,e,n,r,s,i)}function Hx(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Md(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var DU={modes:{index(t,e,n,r){const s=Js(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?tp(t,s,i,r,o):np(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const s=Js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?tp(t,s,i,r,o):np(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const s=Js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return tp(t,s,i,r,o)},nearest(t,e,n,r){const s=Js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return np(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Js(e,t);return Hx(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Js(e,t);return Hx(t,s,"y",n.intersect,r)}}};const kk=["left","top","right","bottom"];function ka(t,e){return t.filter(n=>n.pos===e)}function $x(t,e){return t.filter(n=>kk.indexOf(n.pos)===-1&&n.box.axis===e)}function Pa(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function OU(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function MU(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!kk.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function LU(t,e){const n=MU(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=h?h*s:l&&e.availableHeight)}return n}function VU(t){const e=OU(t),n=Pa(e.filter(c=>c.box.fullSize),!0),r=Pa(ka(e,"left"),!0),s=Pa(ka(e,"right")),i=Pa(ka(e,"top"),!0),o=Pa(ka(e,"bottom")),a=$x(e,"x"),l=$x(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:ka(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function qx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Pk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function FU(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!de(s)){n.size&&(t[s]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[s]+=n.size}i.getPadding&&Pk(o,i.getPadding());const a=Math.max(0,e.outerWidth-qx(o,t,"left","right")),l=Math.max(0,e.outerHeight-qx(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function jU(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function UU(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Ha(t,e,n,r){const s=[];let i,o,a,l,c,h;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,UU(a.horizontal,e));const{same:d,other:f}=FU(e,n,a,r);c|=d&&s.length,h=h||f,l.fullSize||s.push(a)}return c&&Ha(s,e,n,r)||h}function cu(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Yx(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;Vh(c.start)&&(o=c.start),l.fullSize?cu(l,s.left,o,n.outerWidth-s.right-s.left,f):cu(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;Vh(c.start)&&(i=c.start),l.fullSize?cu(l,i,s.top,f,n.outerHeight-s.bottom-s.top):cu(l,i,e.top+c.placed,f,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var is={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=On(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=VU(t.boxes),l=a.vertical,c=a.horizontal;_e(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,b)=>b.box.options&&b.box.options.display===!1?E:E+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},s);Pk(f,On(r));const m=Object.assign({maxPadding:f,w:i,h:o,x:s.left,y:s.top},s),v=LU(l.concat(c),d);Ha(a.fullSize,m,d,v),Ha(l,m,d,v),Ha(c,m,d,v)&&Ha(l,m,d,v),jU(m),Yx(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,Yx(a.rightAndBottom,m,d,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},_e(a.chartArea,E=>{const b=E.box;Object.assign(b,t.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Ak{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class zU extends Ak{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ju="$chartjs",BU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Gx=t=>t===null||t==="";function WU(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[ju]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Gx(s)){const i=Ox(t,"width");i!==void 0&&(t.width=i)}if(Gx(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Ox(t,"height");i!==void 0&&(t.height=i)}return t}const Ck=rU?{passive:!0}:!1;function HU(t,e,n){t&&t.addEventListener(e,n,Ck)}function $U(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ck)}function qU(t,e){const n=BU[t.type]||t.type,{x:r,y:s}=Js(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function zh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function YU(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||zh(a.addedNodes,r),o=o&&!zh(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function GU(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||zh(a.removedNodes,r),o=o&&!zh(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Kl=new Map;let Kx=0;function Rk(){const t=window.devicePixelRatio;t!==Kx&&(Kx=t,Kl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function KU(t,e){Kl.size||window.addEventListener("resize",Rk),Kl.set(t,e)}function QU(t){Kl.delete(t),Kl.size||window.removeEventListener("resize",Rk)}function XU(t,e,n){const r=t.canvas,s=r&&l_(r);if(!s)return;const i=ak((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||i(c,h)});return o.observe(s),KU(t,i),o}function rp(t,e,n){n&&n.disconnect(),e==="resize"&&QU(t)}function JU(t,e,n){const r=t.canvas,s=ak(i=>{t.ctx!==null&&n(qU(i,t))},t);return HU(r,e,s),s}class ZU extends Ak{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(WU(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[ju])return!1;const r=n[ju].initial;["height","width"].forEach(i=>{const o=r[i];Ie(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[ju],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:YU,detach:GU,resize:XU}[n]||JU;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:rp,detach:rp,resize:rp}[n]||$U)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return nU(e,n,r,s)}isAttached(e){const n=e&&l_(e);return!!(n&&n.isConnected)}}function e6(t){return!a_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?zU:ZU}class Ns{constructor(){U(this,"x");U(this,"y");U(this,"active",!1);U(this,"options");U(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Yl(this.x)&&Yl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}U(Ns,"defaults",{}),U(Ns,"defaultRoutes");function t6(t,e){const n=t.options.ticks,r=n6(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?s6(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return i6(e,c,i,o/s),c;const h=r6(i,e,s);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(uu(e,c,h,Ie(m)?0:a-m,a),d=0,f=o-1;d<f;d++)uu(e,c,h,i[d],i[d+1]);return uu(e,c,h,l,Ie(m)?e.length:l+m),c}return uu(e,c,h),c}function n6(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function r6(t,e,n){const r=o6(t),s=e.length/n;if(!r)return Math.max(s,1);const i=Jj(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function s6(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function i6(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function uu(t,e,n,r,s){const i=ue(r,0),o=Math.min(ue(s,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),h=i;h<0;)a++,h=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(i+a*n))}function o6(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const a6=t=>t==="left"?"right":t==="right"?"left":t,Qx=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Xx=(t,e)=>Math.min(e||t,t);function Jx(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function l6(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function c6(t,e){_e(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Aa(t){return t.drawTicks?t.tickLength:0}function Zx(t,e){if(!t.display)return 0;const n=$t(t.font,e),r=On(t.padding);return(dt(t.text)?t.text.length:1)*n.lineHeight+r.height}function u6(t,e){return Ri(t,{scale:e,type:"scale"})}function h6(t,e,n){return Ri(t,{tick:n,index:e,type:"tick"})}function d6(t,e,n){let r=lk(t);return(n&&e!=="right"||!n&&e==="right")&&(r=a6(r)),r}function f6(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,m,v;const E=o-s,b=a-i;if(t.isHorizontal()){if(m=Xt(r,i,a),de(n)){const y=Object.keys(n)[0],w=n[y];v=h[y].getPixelForValue(w)+E-e}else n==="center"?v=(c.bottom+c.top)/2+E-e:v=Qx(t,n,e);f=a-i}else{if(de(n)){const y=Object.keys(n)[0],w=n[y];m=h[y].getPixelForValue(w)-b+e}else n==="center"?m=(c.left+c.right)/2-b+e:m=Qx(t,n,e);v=Xt(r,o,s),d=n==="left"?-In:In}return{titleX:m,titleY:v,maxWidth:f,rotation:d}}class Jo extends Ns{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Fn(e,Number.POSITIVE_INFINITY),n=Fn(n,Number.NEGATIVE_INFINITY),r=Fn(r,Number.POSITIVE_INFINITY),s=Fn(s,Number.NEGATIVE_INFINITY),{min:Fn(e,r),max:Fn(n,s),minDefined:Ct(e),maxDefined:Ct(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Fn(n,Fn(r,n)),max:Fn(r,Fn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=O3(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Jx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=t6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Pe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Xx(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=dn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),d+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-Aa(e.grid)-n.padding-Zx(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=n3(Math.min(Math.asin(dn((h.highest.height+6)/a,-1,1)),Math.asin(dn(l/c,-1,1))-Math.asin(dn(f/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Zx(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Aa(i)+l):(e.height=this.maxHeight,e.width=Aa(i)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),m=r.padding*2,v=ii(this.labelRotation),E=Math.cos(v),b=Math.sin(v);if(a){const y=r.mirror?0:b*d.width+E*f.height;e.height=Math.min(this.maxHeight,e.height+y+m)}else{const y=r.mirror?0:E*d.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+y+m)}this._calculatePadding(c,h,b,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=s*e.width,m=r*n.height):(f=r*e.height,m=s*n.width):i==="start"?m=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;i==="start"?(h=0,d=e.height):i==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Ie(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Jx(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Xx(n,r));let c=0,h=0,d,f,m,v,E,b,y,w,T,R,D;for(d=0;d<n;d+=l){if(v=e[d].label,E=this._resolveTickFontOptions(d),s.font=b=E.string,y=i[b]=i[b]||{data:{},gc:[]},w=E.lineHeight,T=R=0,!Ie(v)&&!dt(v))T=Ax(s,y.data,y.gc,T,v),R=w;else if(dt(v))for(f=0,m=v.length;f<m;++f)D=v[f],!Ie(D)&&!dt(D)&&(T=Ax(s,y.data,y.gc,T,D),R+=w);o.push(T),a.push(R),c=Math.max(T,c),h=Math.max(R,h)}c6(i,n);const L=o.indexOf(c),I=a.indexOf(h),_=k=>({width:o[k]||0,height:a[k]||0});return{first:_(0),last:_(n-1),widest:_(L),highest:_(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return i3(this._alignToPixels?Ys(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=h6(this.getContext(),e,r))}return this.$context||(this.$context=u6(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ii(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Aa(i),m=[],v=a.setContext(this.getContext()),E=v.display?v.width:0,b=E/2,y=function(we){return Ys(r,we,E)};let w,T,R,D,L,I,_,k,P,C,N,A;if(o==="top")w=y(this.bottom),I=this.bottom-f,k=w-b,C=y(e.top)+b,A=e.bottom;else if(o==="bottom")w=y(this.top),C=e.top,A=y(e.bottom)-b,I=w+b,k=this.top+f;else if(o==="left")w=y(this.right),L=this.right-f,_=w-b,P=y(e.left)+b,N=e.right;else if(o==="right")w=y(this.left),P=e.left,N=y(e.right)-b,L=w+b,_=this.left+f;else if(n==="x"){if(o==="center")w=y((e.top+e.bottom)/2+.5);else if(de(o)){const we=Object.keys(o)[0],Re=o[we];w=y(this.chart.scales[we].getPixelForValue(Re))}C=e.top,A=e.bottom,I=w+b,k=I+f}else if(n==="y"){if(o==="center")w=y((e.left+e.right)/2);else if(de(o)){const we=Object.keys(o)[0],Re=o[we];w=y(this.chart.scales[we].getPixelForValue(Re))}L=w-b,_=L-f,P=e.left,N=e.right}const ie=ue(s.ticks.maxTicksLimit,d),ce=Math.max(1,Math.ceil(d/ie));for(T=0;T<d;T+=ce){const we=this.getContext(T),Re=i.setContext(we),H=a.setContext(we),K=Re.lineWidth,z=Re.color,ne=H.dash||[],Z=H.dashOffset,ge=Re.tickWidth,Ee=Re.tickColor,Kt=Re.tickBorderDash||[],rt=Re.tickBorderDashOffset;R=l6(this,T,l),R!==void 0&&(D=Ys(r,R,K),c?L=_=P=N=D:I=k=C=A=D,m.push({tx1:L,ty1:I,tx2:_,ty2:k,x1:P,y1:C,x2:N,y2:A,width:K,color:z,borderDash:ne,borderDashOffset:Z,tickWidth:ge,tickColor:Ee,tickBorderDash:Kt,tickBorderDashOffset:rt}))}return this._ticksLength=d,this._borderValue=w,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=i,f=Aa(r.grid),m=f+h,v=d?-h:m,E=-ii(this.labelRotation),b=[];let y,w,T,R,D,L,I,_,k,P,C,N,A="middle";if(s==="top")L=this.bottom-v,I=this._getXAxisLabelAlignment();else if(s==="bottom")L=this.top+v,I=this._getXAxisLabelAlignment();else if(s==="left"){const ce=this._getYAxisLabelAlignment(f);I=ce.textAlign,D=ce.x}else if(s==="right"){const ce=this._getYAxisLabelAlignment(f);I=ce.textAlign,D=ce.x}else if(n==="x"){if(s==="center")L=(e.top+e.bottom)/2+m;else if(de(s)){const ce=Object.keys(s)[0],we=s[ce];L=this.chart.scales[ce].getPixelForValue(we)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")D=(e.left+e.right)/2-m;else if(de(s)){const ce=Object.keys(s)[0],we=s[ce];D=this.chart.scales[ce].getPixelForValue(we)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const ie=this._getLabelSizes();for(y=0,w=a.length;y<w;++y){T=a[y],R=T.label;const ce=i.setContext(this.getContext(y));_=this.getPixelForTick(y)+i.labelOffset,k=this._resolveTickFontOptions(y),P=k.lineHeight,C=dt(R)?R.length:1;const we=C/2,Re=ce.color,H=ce.textStrokeColor,K=ce.textStrokeWidth;let z=I;o?(D=_,I==="inner"&&(y===w-1?z=this.options.reverse?"left":"right":y===0?z=this.options.reverse?"right":"left":z="center"),s==="top"?c==="near"||E!==0?N=-C*P+P/2:c==="center"?N=-ie.highest.height/2-we*P+P:N=-ie.highest.height+P/2:c==="near"||E!==0?N=P/2:c==="center"?N=ie.highest.height/2-we*P:N=ie.highest.height-C*P,d&&(N*=-1),E!==0&&!ce.showLabelBackdrop&&(D+=P/2*Math.sin(E))):(L=_,N=(1-C)*P/2);let ne;if(ce.showLabelBackdrop){const Z=On(ce.backdropPadding),ge=ie.heights[y],Ee=ie.widths[y];let Kt=N-Z.top,rt=0-Z.left;switch(A){case"middle":Kt-=ge/2;break;case"bottom":Kt-=ge;break}switch(I){case"center":rt-=Ee/2;break;case"right":rt-=Ee;break;case"inner":y===w-1?rt-=Ee:y>0&&(rt-=Ee/2);break}ne={left:rt,top:Kt,width:Ee+Z.width,height:ge+Z.height,color:ce.backdropColor}}b.push({label:R,font:k,textOffset:N,options:{rotation:E,color:Re,strokeColor:H,strokeWidth:K,textAlign:z,textBaseline:A,translation:[D,L],backdrop:ne}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ii(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,h;return n==="left"?s?(h=this.right+i,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?s?(h=this.left+i,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Ys(e,this.left,o)-o/2,h=Ys(e,this.right,a)+a/2,d=f=l):(d=Ys(e,this.top,o)-o/2,f=Ys(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Nd(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,h=o.textOffset;jh(r,c,0,h,l,a)}s&&Dd(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=$t(r.font),o=On(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||de(n)?(l+=o.bottom,dt(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=f6(this,l,n,a);jh(e,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:f,textAlign:d6(a,n,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ue(e.grid&&e.grid.z,-1),s=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Jo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return $t(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class hu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;g6(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,p6(e,o,r),this.override&&Ge.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in Ge[s]&&(delete Ge[s][r],this.override&&delete Ti[r])}}function p6(t,e,n){const r=ql(Object.create(null),[n?Ge.get(n):{},Ge.get(e),t.defaults]);Ge.set(e,r),t.defaultRoutes&&m6(e,t.defaultRoutes),t.descriptors&&Ge.describe(e,t.descriptors)}function m6(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ge.route(i,s,l,a)})}function g6(t){return"id"in t&&"defaults"in t}class y6{constructor(){this.controllers=new hu(fl,"datasets",!0),this.elements=new hu(Ns,"elements"),this.plugins=new hu(Object,"plugins"),this.scales=new hu(Jo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):_e(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=t_(e);Pe(r["before"+s],[],r),n[e](r),Pe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var zn=new y6;class _6{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Pe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Ie(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=ue(r.options&&r.options.plugins,{}),i=v6(r);return s===!1&&!n?[]:x6(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function v6(t){const e={},n=[],r=Object.keys(zn.plugins.items);for(let i=0;i<r.length;i++)n.push(zn.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function w6(t,e){return!e&&t===!1?null:t===!0?{}:t}function x6(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=w6(r[l],s);c!==null&&i.push({plugin:a,options:E6(t.config,{plugin:a,local:n[l]},c,o)})}return i}function E6(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jm(t,e){const n=Ge.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function T6(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function b6(t,e){return t===e?"_index_":"_value_"}function eE(t){if(t==="x"||t==="y"||t==="r")return t}function I6(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Um(t,...e){if(eE(t))return t;for(const n of e){const r=n.axis||I6(n.position)||t.length>1&&eE(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function tE(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function S6(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return tE(t,"x",n[0])||tE(t,"y",n[0])}return{}}function k6(t,e){const n=Ti[t.type]||{scales:{}},r=e.scales||{},s=jm(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!de(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Um(o,a,S6(o,t),Ge.scales[a.type]),c=b6(l,s),h=n.scales||{};i[o]=ll(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||jm(a,e),h=(Ti[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=T6(d,l),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),ll(i[m],[{axis:f},r[m],h[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];ll(a,[Ge.scales[a.type],Ge.scale])}),i}function Nk(t){const e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=k6(t,e)}function Dk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function P6(t){return t=t||{},t.data=Dk(t.data),Nk(t),t}const nE=new Map,Ok=new Set;function du(t,e){let n=nE.get(t);return n||(n=e(),nE.set(t,n),Ok.add(n)),n}const Ca=(t,e,n)=>{const r=Lh(e,n);r!==void 0&&t.add(r)};class A6{constructor(e){this._config=P6(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Dk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Nk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return du(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return du(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return du(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return du(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Ca(l,e,d))),h.forEach(d=>Ca(l,s,d)),h.forEach(d=>Ca(l,Ti[i]||{},d)),h.forEach(d=>Ca(l,Ge,d)),h.forEach(d=>Ca(l,Lm,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Ok.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ti[n]||{},Ge.datasets[n]||{},{type:n},Ge,Lm]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=rE(this._resolverCache,e,s);let l=o;if(R6(o,n)){i.$shared=!1,r=Rs(r)?r():r;const c=this.createResolver(e,r,a);l=Lo(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=rE(this._resolverCache,e,r);return de(n)?Lo(i,n,void 0,s):i}}function rE(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:s_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const C6=t=>de(t)&&Object.getOwnPropertyNames(t).some(e=>Rs(t[e]));function R6(t,e){const{isScriptable:n,isIndexable:r}=fk(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Rs(a)||C6(a))||o&&dt(a))return!0}return!1}var N6="4.5.1";const D6=["top","bottom","left","right","chartArea"];function sE(t,e){return t==="top"||t==="bottom"||D6.indexOf(t)===-1&&e==="x"}function iE(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function oE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Pe(n&&n.onComplete,[t],e)}function O6(t){const e=t.chart,n=e.options.animation;Pe(n&&n.onProgress,[t],e)}function Mk(t){return a_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Uu={},aE=t=>{const e=Mk(t);return Object.values(Uu).filter(n=>n.canvas===e).pop()};function M6(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function L6(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Wr;let Ld=(Wr=class{static register(...e){zn.add(...e),lE()}static unregister(...e){zn.remove(...e),lE()}constructor(e,n){const r=this.config=new A6(n),s=Mk(e),i=aE(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||e6(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Wj(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=u3(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Uu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}hr.listen(this,"complete",oE),hr.listen(this,"progress",O6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Ie(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return zn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Dx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Cx(this.canvas,this.ctx),this}stop(){return hr.stop(this),this}resize(e,n){hr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Dx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Pe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};_e(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Um(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),_e(i,o=>{const a=o.options,l=a.id,c=Um(l,a),h=ue(a.type,o.dtype);(a.position===void 0||sE(a.position,c)!==sE(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const f=zn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),_e(s,(o,a)=>{o||delete r[a]}),_e(r,o=>{is.configure(this,o,o.options),is.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(iE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||jm(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=zn.getController(a),{datasetElementType:c,dataElementType:h}=Ge.datasets[a];Object.assign(l,{dataElementType:zn.getElement(h),datasetElementType:c&&zn.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){_e(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&i.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||_e(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(iE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){_e(this.scales,e=>{is.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!wx(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;M6(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!wx(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;is.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],_e(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Rs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hr.has(this)?this.attached&&!hr.running(this)&&hr.start(this):(this.draw(),oE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=Tk(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Nd(n,s),e.controller.draw(),s&&Dd(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Gl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=DU.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ri(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Vh(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),hr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Cx(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Uu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};_e(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){_e(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},_e(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Oh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=Kj(e),c=L6(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Pe(i.onHover,[e,a,this],this),l&&Pe(i.onClick,[e,a,this],this));const h=!Oh(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},U(Wr,"defaults",Ge),U(Wr,"instances",Uu),U(Wr,"overrides",Ti),U(Wr,"registry",zn),U(Wr,"version",N6),U(Wr,"getChart",aE),Wr);function lE(){return _e(Ld.instances,t=>t._plugins.invalidate())}function Lk(t,e,n=e){t.lineCap=ue(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(n.borderDash,e.borderDash)),t.lineDashOffset=ue(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(n.borderWidth,e.borderWidth),t.strokeStyle=ue(n.borderColor,e.borderColor)}function V6(t,e,n){t.lineTo(n.x,n.y)}function F6(t){return t.stepped?b3:t.tension||t.cubicInterpolationMode==="monotone"?I3:V6}function Vk(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),h=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function j6(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=Vk(s,n,r),h=F6(i);let{move:d=!0,reverse:f}=r||{},m,v,E;for(m=0;m<=c;++m)v=s[(a+(f?c-m:m))%o],!v.skip&&(d?(t.moveTo(v.x,v.y),d=!1):h(t,E,v,f,i.stepped),E=v);return l&&(v=s[(a+(f?c:0))%o],h(t,E,v,f,i.stepped)),!!l}function U6(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=Vk(s,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,f,m,v,E,b,y;const w=R=>(o+(c?a-R:R))%i,T=()=>{E!==b&&(t.lineTo(h,b),t.lineTo(h,E),t.lineTo(h,y))};for(l&&(m=s[w(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=s[w(f)],m.skip)continue;const R=m.x,D=m.y,L=R|0;L===v?(D<E?E=D:D>b&&(b=D),h=(d*h+R)/++d):(T(),t.lineTo(R,D),v=L,d=0,E=b=D),y=D}T()}function zm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?U6:j6}function z6(t){return t.stepped?sU:t.tension||t.cubicInterpolationMode==="monotone"?iU:Zs}function B6(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),Lk(t,e.options),t.stroke(s)}function W6(t,e,n,r){const{segments:s,options:i}=e,o=zm(e);for(const a of s)Lk(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const H6=typeof Path2D=="function";function $6(t,e,n,r){H6&&!e.options.segment?B6(t,e,n,r):W6(t,e,n,r)}class os extends Ns{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;Q3(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=Ek(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=z6(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],m=i[d],v=i[f];if(m===v){a.push(m);continue}const E=Math.abs((s-m[n])/(v[n]-m[n])),b=l(m,v,E,r.stepped);b[n]=e[n],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,n,r){return zm(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=zm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),$6(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}U(os,"id","line"),U(os,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),U(os,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),U(os,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function cE(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class zu extends Ns{constructor(n){super();U(this,"parsed");U(this,"skip");U(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return cE(this,n,"x",r)}inYRange(n,r){return cE(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Gl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Vm(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}U(zu,"id","point"),U(zu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),U(zu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function q6(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Vd(l,c,s);const h=Bm(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:s[l],end:s[c]});continue}const d=Ek(e,h);for(const f of d){const m=Bm(n,i[f.start],i[f.end],f.loop),v=xk(a,s,m);for(const E of v)o.push({source:E,target:f,start:{[n]:uE(h,m,"start",Math.max)},end:{[n]:uE(h,m,"end",Math.min)}})}}return o}function Bm(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=Wn(s),i=Wn(i)),{property:t,start:s,end:i}}function Y6(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Vd(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function Vd(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function uE(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function Fk(t,e){let n=[],r=!1;return dt(t)?(r=!0,n=t):n=Y6(t,e),n.length?new os({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function hE(t){return t&&t.fill!==!1}function G6(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Ct(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function K6(t,e,n){const r=Z6(t);if(de(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Ct(s)&&Math.floor(s)===s?Q6(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Q6(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function X6(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:de(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function J6(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:de(t)?r=t.value:r=e.getBaseValue(),r}function Z6(t){const e=t.options,n=e.fill;let r=ue(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function e5(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=t5(e,n);a.push(Fk({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let h=c.start;h<=c.end;h++)n5(s,o[h],a)}return new os({points:s,options:{}})}function t5(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function n5(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=r5(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function r5(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const h=i[c],d=o[h.start][n],f=o[h.end][n];if(io(s,d,f)){a=s===d,l=s===f;break}}return{first:a,last:l,point:r}}class jk{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:An},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function s5(t){const{chart:e,fill:n,line:r}=t;if(Ct(n))return i5(e,n);if(n==="stack")return e5(t);if(n==="shape")return!0;const s=o5(t);return s instanceof jk?s:Fk(s,r)}function i5(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function o5(t){return(t.scale||{}).getPointPositionForValue?l5(t):a5(t)}function a5(t){const{scale:e={},fill:n}=t,r=X6(n,e);if(Ct(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function l5(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=J6(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new jk({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function sp(t,e,n){const r=s5(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,h=c.fill,d=c.backgroundColor,{above:f=d,below:m=d}=h||{},v=s.getDatasetMeta(i),E=Tk(s,v);r&&o.points.length&&(Nd(t,n),c5(t,{line:o,target:r,above:f,below:m,area:n,scale:a,axis:l,clip:E}),Dd(t))}function c5(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let h=i;i!==s&&(c==="x"?(dE(t,r,o.top),ip(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),dE(t,r,o.bottom)):c==="y"&&(fE(t,r,o.left),ip(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),fE(t,r,o.right),h=s)),ip(t,{line:n,target:r,color:h,scale:a,property:c,clip:l}),t.restore()}function dE(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,h=s[l],d=s[Vd(l,c,s)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function fE(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,h=s[l],d=s[Vd(l,c,s)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(n,h.y),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,d.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function ip(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=q6(n,r,s);for(const{source:c,target:h,start:d,end:f}of l){const{style:{backgroundColor:m=i}={}}=c,v=r!==!0;t.save(),t.fillStyle=m,u5(t,o,a,v&&Bm(s,d,f)),t.beginPath();const E=!!n.pathSegment(t,c);let b;if(v){E?t.closePath():pE(t,r,f,s);const y=!!r.pathSegment(t,h,{move:E,reverse:!0});b=E&&y,b||pE(t,r,d,s)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function u5(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,h,d;i==="x"?(l=o,c=s.top,h=a,d=s.bottom):(l=s.left,c=o,h=s.right,d=a),t.beginPath(),n&&(l=Math.max(l,n.left),h=Math.min(h,n.right),c=Math.max(c,n.top),d=Math.min(d,n.bottom)),t.rect(l,c,h-l,d-c),t.clip()}}function pE(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var h5={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof os&&(l={visible:t.isDatasetVisible(o),index:o,fill:K6(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=G6(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&sp(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;hE(i)&&sp(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!hE(r)||n.drawTime!=="beforeDatasetDraw"||sp(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const mE=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},d5=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class gE extends Ns{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Pe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=$t(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=mE(r,i);let c,h;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let d=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((v,E)=>{const b=r+n/2+i.measureText(v.text).width;(E===0||c[c.length-1]+b+2*a>o)&&(d+=h,c[c.length-(E>0?0:1)]=0,m+=h,f++),l[E]={left:0,top:m,row:f,width:b,height:s},c[c.length-1]+=b+a}),d}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,v=0,E=0;return this.legendItems.forEach((b,y)=>{const{itemWidth:w,itemHeight:T}=f5(r,n,i,b,s);y>0&&m+T+2*a>h&&(d+=f+a,c.push({width:f,height:m}),v+=f+a,E++,f=m=0),l[y]={left:v,top:m,col:E,width:w,height:T},f=Math.max(f,w),m+=T+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=wo(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Xt(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Xt(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Xt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Xt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Nd(e,this),this._draw(),Dd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=Ge.color,l=wo(e.rtl,this.left,this.width),c=$t(o.font),{padding:h}=o,d=c.size,f=d/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:v,boxHeight:E,itemHeight:b}=mE(o,d),y=function(L,I,_){if(isNaN(v)||v<=0||isNaN(E)||E<0)return;s.save();const k=ue(_.lineWidth,1);if(s.fillStyle=ue(_.fillStyle,a),s.lineCap=ue(_.lineCap,"butt"),s.lineDashOffset=ue(_.lineDashOffset,0),s.lineJoin=ue(_.lineJoin,"miter"),s.lineWidth=k,s.strokeStyle=ue(_.strokeStyle,a),s.setLineDash(ue(_.lineDash,[])),o.usePointStyle){const P={radius:E*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:k},C=l.xPlus(L,v/2),N=I+f;hk(s,P,C,N,o.pointStyleWidth&&v)}else{const P=I+Math.max((d-E)/2,0),C=l.leftForLtr(L,v),N=dl(_.borderRadius);s.beginPath(),Object.values(N).some(A=>A!==0)?Fm(s,{x:C,y:P,w:v,h:E,radius:N}):s.rect(C,P,v,E),s.fill(),k!==0&&s.stroke()}s.restore()},w=function(L,I,_){jh(s,_.text,L,I+b/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},T=this.isHorizontal(),R=this._computeTitleHeight();T?m={x:Xt(i,this.left+h,this.right-r[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:Xt(i,this.top+R+h,this.bottom-n[0].height),line:0},_k(this.ctx,e.textDirection);const D=b+h;this.legendItems.forEach((L,I)=>{s.strokeStyle=L.fontColor,s.fillStyle=L.fontColor;const _=s.measureText(L.text).width,k=l.textAlign(L.textAlign||(L.textAlign=o.textAlign)),P=v+f+_;let C=m.x,N=m.y;l.setWidth(this.width),T?I>0&&C+P+h>this.right&&(N=m.y+=D,m.line++,C=m.x=Xt(i,this.left+h,this.right-r[m.line])):I>0&&N+D>this.bottom&&(C=m.x=C+n[m.line].width+h,m.line++,N=m.y=Xt(i,this.top+R+h,this.bottom-n[m.line].height));const A=l.x(C);if(y(A,N,L),C=h3(k,C+v+f,T?C+P:this.right,e.rtl),w(l.x(C),N,L),T)m.x+=P+h;else if(typeof L.text!="string"){const ie=c.lineHeight;m.y+=Uk(L,ie)+h}else m.y+=D}),vk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=$t(n.font),s=On(n.padding);if(!n.display)return;const i=wo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=Xt(e.align,d,this.right-f);else{const v=this.columnSizes.reduce((E,b)=>Math.max(E,b.height),0);h=c+Xt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=Xt(a,d,d+f);o.textAlign=i.textAlign(lk(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,jh(o,n.text,m,h,r)}_computeTitleHeight(){const e=this.options.title,n=$t(e.font),r=On(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(io(e,this.left,this.right)&&io(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],io(e,s.left,s.left+s.width)&&io(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!g5(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=d5(s,r);s&&!i&&Pe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Pe(n.onHover,[e,r,this],this)}else r&&Pe(n.onClick,[e,r,this],this)}}function f5(t,e,n,r,s){const i=p5(r,t,e,n),o=m5(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function p5(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function m5(t,e,n){let r=t;return typeof e.text!="string"&&(r=Uk(e,n)),r}function Uk(t,e){const n=t.text?t.text.length:0;return e*n}function g5(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var y5={id:"legend",_element:gE,start(t,e,n){const r=t.legend=new gE({ctx:t.ctx,options:n,chart:t});is.configure(t,r,n),is.addBox(t,r)},stop(t){is.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;is.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=On(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const $a={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Mm(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function jn(t,e){return e&&(dt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function dr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function _5(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function yE(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=$t(e.bodyFont),c=$t(e.titleFont),h=$t(e.footerFont),d=i.length,f=s.length,m=r.length,v=On(e.padding);let E=v.height,b=0,y=r.reduce((R,D)=>R+D.before.length+D.lines.length+D.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,d&&(E+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*R+(y-m)*l.lineHeight+(y-1)*e.bodySpacing}f&&(E+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let w=0;const T=function(R){b=Math.max(b,n.measureText(R).width+w)};return n.save(),n.font=c.string,_e(t.title,T),n.font=l.string,_e(t.beforeBody.concat(t.afterBody),T),w=e.displayColors?o+2+e.boxPadding:0,_e(r,R=>{_e(R.before,T),_e(R.lines,T),_e(R.after,T)}),w=0,n.font=h.string,_e(t.footer,T),n.restore(),b+=v.width,{width:b,height:E}}function v5(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function w5(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function x5(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),w5(c,t,e,n)&&(c="center"),c}function _E(t,e,n){const r=n.yAlign||e.yAlign||v5(t,n);return{xAlign:n.xAlign||e.xAlign||x5(t,e,n,r),yAlign:r}}function E5(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function T5(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function vE(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=dl(o);let v=E5(e,a);const E=T5(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,f)+s:a==="right"&&(v+=Math.max(d,m)+s),{x:dn(v,0,r.width-e.width),y:dn(E,0,r.height-e.height)}}function fu(t,e,n){const r=On(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function wE(t){return jn([],dr(t))}function b5(t,e,n){return Ri(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function xE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const zk={beforeTitle:ur,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ur,beforeBody:ur,beforeLabel:ur,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ie(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ur,afterBody:ur,beforeFooter:ur,footer:ur,afterFooter:ur};function jt(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?zk[e].call(n,r):s}class Wm extends Ns{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new bk(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=b5(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=jt(r,"beforeTitle",this,e),i=jt(r,"title",this,e),o=jt(r,"afterTitle",this,e);let a=[];return a=jn(a,dr(s)),a=jn(a,dr(i)),a=jn(a,dr(o)),a}getBeforeBody(e,n){return wE(jt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return _e(e,i=>{const o={before:[],lines:[],after:[]},a=xE(r,i);jn(o.before,dr(jt(a,"beforeLabel",this,i))),jn(o.lines,jt(a,"label",this,i)),jn(o.after,dr(jt(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return wE(jt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=jt(r,"beforeFooter",this,e),i=jt(r,"footer",this,e),o=jt(r,"afterFooter",this,e);let a=[];return a=jn(a,dr(s)),a=jn(a,dr(i)),a=jn(a,dr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(_5(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),_e(a,h=>{const d=xE(e.callbacks,h);s.push(jt(d,"labelColor",this,h)),i.push(jt(d,"labelPointStyle",this,h)),o.push(jt(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=$a[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=yE(this,r),c=Object.assign({},a,l),h=_E(this.chart,r,c),d=vE(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=dl(a),{x:f,y:m}=e,{width:v,height:E}=n;let b,y,w,T,R,D;return i==="center"?(R=m+E/2,s==="left"?(b=f,y=b-o,T=R+o,D=R-o):(b=f+v,y=b+o,T=R-o,D=R+o),w=b):(s==="left"?y=f+Math.max(l,h)+o:s==="right"?y=f+v-Math.max(c,d)-o:y=this.caretX,i==="top"?(T=m,R=T-o,b=y-o,w=y+o):(T=m+E,R=T+o,b=y+o,w=y-o),D=T),{x1:b,x2:y,x3:w,y1:T,y2:R,y3:D}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=wo(r.rtl,this.x,this.width);for(e.x=fu(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=$t(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,h=$t(i.bodyFont),d=fu(this,"left",i),f=s.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(i.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=s.leftForLtr(f,c)+c/2,y=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Vm(e,E,b,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Vm(e,E,b,y)}else{e.lineWidth=de(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=s.leftForLtr(f,c),b=s.leftForLtr(s.xPlus(f,1),c-2),y=dl(o.borderRadius);Object.values(y).some(w=>w!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Fm(e,{x:E,y:v,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Fm(e,{x:b,y:v+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(E,v,c,l),e.strokeRect(E,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=$t(r.bodyFont);let f=d.lineHeight,m=0;const v=wo(r.rtl,this.x,this.width),E=function(_){n.fillText(_,v.x(e.x+m),e.y+f/2),e.y+=f+i},b=v.textAlign(o);let y,w,T,R,D,L,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=fu(this,b,r),n.fillStyle=r.bodyColor,_e(this.beforeBody,E),m=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,L=s.length;R<L;++R){for(y=s[R],w=this.labelTextColors[R],n.fillStyle=w,_e(y.before,E),T=y.lines,a&&T.length&&(this._drawColorBox(n,e,R,v,r),f=Math.max(d.lineHeight,l)),D=0,I=T.length;D<I;++D)E(T[D]),f=d.lineHeight;_e(y.after,E)}m=0,f=d.lineHeight,_e(this.afterBody,E),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=wo(r.rtl,this.x,this.width);for(e.x=fu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=$t(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:v}=dl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+h-v),n.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=$a[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=yE(this,e),l=Object.assign({},o,this._size),c=_E(n,e,l),h=vE(e,l,c,n);(s._to!==h.x||i._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=On(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),_k(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),vk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Oh(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Oh(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=$a[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}U(Wm,"positioners",$a);var I5={id:"tooltip",_element:Wm,positioners:$a,afterInit(t,e,n){n&&(t.tooltip=new Wm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:zk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const S5=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function k5(t,e,n,r){const s=t.indexOf(e);if(s===-1)return S5(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const P5=(t,e)=>t===null?null:dn(Math.round(t),0,e);function EE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Hm extends Jo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ie(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:k5(r,e,ue(n,e),this._addedLabels),P5(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return EE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}U(Hm,"id","category"),U(Hm,"defaults",{ticks:{callback:EE}});function A5(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=i||1,v=h-1,{min:E,max:b}=e,y=!Ie(o),w=!Ie(a),T=!Ie(c),R=(b-E)/(d+1);let D=Ex((b-E)/v/m)*m,L,I,_,k;if(D<1e-14&&!y&&!w)return[{value:E},{value:b}];k=Math.ceil(b/D)-Math.floor(E/D),k>v&&(D=Ex(k*D/v/m)*m),Ie(l)||(L=Math.pow(10,l),D=Math.ceil(D*L)/L),s==="ticks"?(I=Math.floor(E/D)*D,_=Math.ceil(b/D)*D):(I=E,_=b),y&&w&&i&&e3((a-o)/i,D/1e3)?(k=Math.round(Math.min((a-o)/D,h)),D=(a-o)/k,I=o,_=a):T?(I=y?o:I,_=w?a:_,k=c-1,D=(_-I)/k):(k=(_-I)/D,cl(k,Math.round(k),D/1e3)?k=Math.round(k):k=Math.ceil(k));const P=Math.max(Tx(D),Tx(I));L=Math.pow(10,Ie(l)?P:l),I=Math.round(I*L)/L,_=Math.round(_*L)/L;let C=0;for(y&&(f&&I!==o?(n.push({value:o}),I<o&&C++,cl(Math.round((I+C*D)*L)/L,o,TE(o,R,t))&&C++):I<o&&C++);C<k;++C){const N=Math.round((I+C*D)*L)/L;if(w&&N>a)break;n.push({value:N})}return w&&f&&_!==a?n.length&&cl(n[n.length-1].value,a,TE(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!w||_===a)&&n.push({value:_}),n}function TE(t,e,{horizontal:n,minRotation:r}){const s=ii(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class C5 extends Jo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ie(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Mo(s),c=Mo(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=A5(s,i);return e.bounds==="ticks"&&t3(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return ck(e,this.chart.options.locale,this.options.ticks.format)}}class $m extends C5{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ct(e)?e:0,this.max=Ct(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ii(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}U($m,"id","linear"),U($m,"defaults",{ticks:{callback:uk.formatters.numeric}});const Fd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wt=Object.keys(Fd);function bE(t,e){return t-e}function IE(t,e){if(Ie(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ct(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Yl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function SE(t,e,n,r){const s=Wt.length;for(let i=Wt.indexOf(t);i<s-1;++i){const o=Fd[Wt[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Wt[i]}return Wt[s-1]}function R5(t,e,n,r,s){for(let i=Wt.length-1;i>=Wt.indexOf(n);i--){const o=Wt[i];if(Fd[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Wt[n?Wt.indexOf(n):0]}function N5(t){for(let e=Wt.indexOf(t)+1,n=Wt.length;e<n;++e)if(Fd[Wt[e]].common)return Wt[e]}function kE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=n_(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function D5(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function PE(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:D5(t,r,s,n)}class Ql extends Jo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new Sk._date(e.adapters.date);s.init(n),ll(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:IE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ct(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Ct(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=a3(s,i,o);return this._unit=n.unit||(r.autoSkip?SE(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):R5(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:N5(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),PE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=dn(n,0,o),r=dn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||SE(i.minUnit,n,r,this._getLabelCapacity(n)),a=ue(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Yl(l)||l===!0,h={};let d=n,f,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<r;f=+e.add(f,a,o),m++)kE(h,f,v);return(f===r||s.bounds==="ticks"||m===1)&&kE(h,f,v),Object.keys(h).sort(bE).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Pe(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=r[n],m=c&&d&&f&&f.major;return this._adapter.format(e,s||(m?d:h))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=ii(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,PE(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(IE(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return c3(e.sort(bE))}}U(Ql,"id","time"),U(Ql,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function pu(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=oi(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=oi(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class AE extends Ql{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=pu(n,this.min),this._tableRange=pu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(pu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return pu(this._table,r*this._tableRange+this._minPos,!0)}}U(AE,"id","timeseries"),U(AE,"defaults",Ql.defaults);const Bk=6048e5,O5=864e5,mc=6e4,gc=36e5,M5=1e3,CE=Symbol.for("constructDateFrom");function We(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&CE in t?t[CE](e):t instanceof Date?new t.constructor(e):new Date(e)}function te(t,e){return We(e||t,t)}function jd(t,e,n){const r=te(t,n==null?void 0:n.in);return isNaN(e)?We((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function u_(t,e,n){const r=te(t,n==null?void 0:n.in);if(isNaN(e))return We(t,NaN);if(!e)return r;const s=r.getDate(),i=We(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const o=i.getDate();return s>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function h_(t,e,n){return We(t,+te(t)+e)}function L5(t,e,n){return h_(t,e*gc)}let V5={};function Ni(){return V5}function or(t,e){var a,l,c,h;const n=Ni(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,s=te(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Fo(t,e){return or(t,{...e,weekStartsOn:1})}function Wk(t,e){const n=te(t,e==null?void 0:e.in),r=n.getFullYear(),s=We(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Fo(s),o=We(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Fo(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Bh(t){const e=te(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Di(t,...e){const n=We.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function qm(t,e){const n=te(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function Hk(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=qm(r),o=qm(s),a=+i-Bh(i),l=+o-Bh(o);return Math.round((a-l)/O5)}function F5(t,e){const n=Wk(t,e),r=We(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Fo(r)}function j5(t,e,n){const r=te(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*mc),r}function U5(t,e,n){return u_(t,e*3,n)}function z5(t,e,n){return h_(t,e*1e3)}function B5(t,e,n){return jd(t,e*7,n)}function W5(t,e,n){return u_(t,e*12,n)}function pl(t,e){const n=+te(t)-+te(e);return n<0?-1:n>0?1:n}function H5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $k(t){return!(!H5(t)&&typeof t!="number"||isNaN(+te(t)))}function $5(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function q5(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e);return r.getFullYear()-s.getFullYear()}function qk(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=RE(r,s),o=Math.abs(Hk(r,s));r.setDate(r.getDate()-i*o);const a=+(RE(r,s)===-i),l=i*(o-a);return l===0?0:l}function RE(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function yc(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Y5(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=(+r-+s)/gc;return yc(n==null?void 0:n.roundingMethod)(i)}function d_(t,e){return+te(t)-+te(e)}function G5(t,e,n){const r=d_(t,e)/mc;return yc(n==null?void 0:n.roundingMethod)(r)}function Yk(t,e){const n=te(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function Gk(t,e){const n=te(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function K5(t,e){const n=te(t,e==null?void 0:e.in);return+Yk(n,e)==+Gk(n,e)}function Kk(t,e,n){const[r,s,i]=Di(n==null?void 0:n.in,t,t,e),o=pl(s,i),a=Math.abs($5(s,i));if(a<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*a);let l=pl(s,i)===-o;K5(r)&&a===1&&pl(r,i)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Q5(t,e,n){const r=Kk(t,e,n)/3;return yc(n==null?void 0:n.roundingMethod)(r)}function X5(t,e,n){const r=d_(t,e)/1e3;return yc(n==null?void 0:n.roundingMethod)(r)}function J5(t,e,n){const r=qk(t,e,n)/7;return yc(n==null?void 0:n.roundingMethod)(r)}function Z5(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=pl(r,s),o=Math.abs(q5(r,s));r.setFullYear(1584),s.setFullYear(1584);const a=pl(r,s)===-i,l=i*(o-+a);return l===0?0:l}function e9(t,e){const n=te(t,e==null?void 0:e.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function t9(t,e){const n=te(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function n9(t,e){const n=te(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Qk(t,e){const n=te(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function r9(t,e){const n=te(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function s9(t,e){var a,l;const n=Ni(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,s=te(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function i9(t,e){const n=te(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function o9(t,e){const n=te(t,e==null?void 0:e.in),r=n.getMonth(),s=r-r%3+3;return n.setMonth(s,0),n.setHours(23,59,59,999),n}function a9(t,e){const n=te(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const l9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},c9=(t,e,n)=>{let r;const s=l9[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function op(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const u9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},h9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},d9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},f9={date:op({formats:u9,defaultWidth:"full"}),time:op({formats:h9,defaultWidth:"full"}),dateTime:op({formats:d9,defaultWidth:"full"})},p9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},m9=(t,e,n,r)=>p9[t];function Ra(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const g9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},y9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},v9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},w9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},x9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},E9=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},T9={ordinalNumber:E9,era:Ra({values:g9,defaultWidth:"wide"}),quarter:Ra({values:y9,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ra({values:_9,defaultWidth:"wide"}),day:Ra({values:v9,defaultWidth:"wide"}),dayPeriod:Ra({values:w9,defaultWidth:"wide",formattingValues:x9,defaultFormattingWidth:"wide"})};function Na(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?I9(a,d=>d.test(o)):b9(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}function b9(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function I9(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function S9(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const k9=/^(\d+)(th|st|nd|rd)?/i,P9=/\d+/i,A9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},C9={any:[/^b/i,/^(a|c)/i]},R9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},N9={any:[/1/i,/2/i,/3/i,/4/i]},D9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},O9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},M9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},V9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},F9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},j9={ordinalNumber:S9({matchPattern:k9,parsePattern:P9,valueCallback:t=>parseInt(t,10)}),era:Na({matchPatterns:A9,defaultMatchWidth:"wide",parsePatterns:C9,defaultParseWidth:"any"}),quarter:Na({matchPatterns:R9,defaultMatchWidth:"wide",parsePatterns:N9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Na({matchPatterns:D9,defaultMatchWidth:"wide",parsePatterns:O9,defaultParseWidth:"any"}),day:Na({matchPatterns:M9,defaultMatchWidth:"wide",parsePatterns:L9,defaultParseWidth:"any"}),dayPeriod:Na({matchPatterns:V9,defaultMatchWidth:"any",parsePatterns:F9,defaultParseWidth:"any"})},Xk={code:"en-US",formatDistance:c9,formatLong:f9,formatRelative:m9,localize:T9,match:j9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function U9(t,e){const n=te(t,e==null?void 0:e.in);return Hk(n,Qk(n))+1}function Jk(t,e){const n=te(t,e==null?void 0:e.in),r=+Fo(n)-+F5(n);return Math.round(r/Bk)+1}function f_(t,e){var h,d,f,m;const n=te(t,e==null?void 0:e.in),r=n.getFullYear(),s=Ni(),i=(e==null?void 0:e.firstWeekContainsDate)??((d=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=We((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=or(o,e),l=We((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=or(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function z9(t,e){var a,l,c,h;const n=Ni(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,s=f_(t,e),i=We((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),or(i,e)}function Zk(t,e){const n=te(t,e==null?void 0:e.in),r=+or(n,e)-+z9(n,e);return Math.round(r/Bk)+1}function ye(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Br={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ye(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ye(n+1,2)},d(t,e){return ye(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ye(t.getHours()%12||12,e.length)},H(t,e){return ye(t.getHours(),e.length)},m(t,e){return ye(t.getMinutes(),e.length)},s(t,e){return ye(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ye(s,e.length)}},Ui={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},NE={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Br.y(t,e)},Y:function(t,e,n,r){const s=f_(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return ye(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ye(i,e.length)},R:function(t,e){const n=Wk(t);return ye(n,e.length)},u:function(t,e){const n=t.getFullYear();return ye(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ye(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ye(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Br.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ye(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Zk(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ye(s,e.length)},I:function(t,e,n){const r=Jk(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ye(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Br.d(t,e)},D:function(t,e,n){const r=U9(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ye(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ye(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ye(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ye(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ui.noon:r===0?s=Ui.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ui.evening:r>=12?s=Ui.afternoon:r>=4?s=Ui.morning:s=Ui.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Br.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Br.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ye(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ye(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Br.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Br.s(t,e)},S:function(t,e){return Br.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return OE(r);case"XXXX":case"XX":return ei(r);case"XXXXX":case"XXX":default:return ei(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return OE(r);case"xxxx":case"xx":return ei(r);case"xxxxx":case"xxx":default:return ei(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+DE(r,":");case"OOOO":default:return"GMT"+ei(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+DE(r,":");case"zzzz":default:return"GMT"+ei(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ye(r,e.length)},T:function(t,e,n){return ye(+t,e.length)}};function DE(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+ye(i,2)}function OE(t,e){return t%60===0?(t>0?"-":"+")+ye(Math.abs(t)/60,2):ei(t,e)}function ei(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=ye(Math.trunc(r/60),2),i=ye(r%60,2);return n+s+e+i}const ME=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},eP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},B9=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return ME(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",ME(r,e)).replace("{{time}}",eP(s,e))},Ym={p:eP,P:B9},W9=/^D+$/,H9=/^Y+$/,$9=["D","DD","YY","YYYY"];function tP(t){return W9.test(t)}function nP(t){return H9.test(t)}function Gm(t,e,n){const r=q9(t,e,n);if(console.warn(r),$9.includes(t))throw new RangeError(r)}function q9(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Y9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,G9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,K9=/^'([^]*?)'?$/,Q9=/''/g,X9=/[a-zA-Z]/;function J9(t,e,n){var h,d,f,m,v,E,b,y;const r=Ni(),s=(n==null?void 0:n.locale)??r.locale??Xk,i=(n==null?void 0:n.firstWeekContainsDate)??((d=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((y=(b=r.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,a=te(t,n==null?void 0:n.in);if(!$k(a))throw new RangeError("Invalid time value");let l=e.match(G9).map(w=>{const T=w[0];if(T==="p"||T==="P"){const R=Ym[T];return R(w,s.formatLong)}return w}).join("").match(Y9).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const T=w[0];if(T==="'")return{isToken:!1,value:Z9(w)};if(NE[T])return{isToken:!0,value:w};if(T.match(X9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(w=>{if(!w.isToken)return w.value;const T=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&nP(T)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&tP(T))&&Gm(T,e,String(t));const R=NE[T[0]];return R(a,T,s.localize,c)}).join("")}function Z9(t){const e=t.match(K9);return e?e[1].replace(Q9,"'"):t}function ez(){return Object.assign({},Ni())}function tz(t,e){const n=te(t,e==null?void 0:e.in).getDay();return n===0?7:n}function nz(t,e){const n=rz(e)?new e(0):We(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function rz(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const sz=10;class rP{constructor(){U(this,"subPriority",0)}validate(e,n){return!0}}class iz extends rP{constructor(e,n,r,s,i){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class oz extends rP{constructor(n,r){super();U(this,"priority",sz);U(this,"subPriority",-1);this.context=n||(s=>We(r,s))}set(n,r){return r.timestampIsSet?n:We(n,nz(n,this.context))}}class pe{run(e,n,r,s){const i=this.parse(e,n,r,s);return i?{setter:new iz(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,n,r){return!0}}class az extends pe{constructor(){super(...arguments);U(this,"priority",140);U(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const Ke={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},$n={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Qe(t,e){return t&&{value:e(t.value),rest:t.rest}}function Oe(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function qn(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*gc+i*mc+o*M5),rest:e.slice(n[0].length)}}function sP(t){return Oe(Ke.anyDigitsSigned,t)}function He(t,e){switch(t){case 1:return Oe(Ke.singleDigit,e);case 2:return Oe(Ke.twoDigits,e);case 3:return Oe(Ke.threeDigits,e);case 4:return Oe(Ke.fourDigits,e);default:return Oe(new RegExp("^\\d{1,"+t+"}"),e)}}function Wh(t,e){switch(t){case 1:return Oe(Ke.singleDigitSigned,e);case 2:return Oe(Ke.twoDigitsSigned,e);case 3:return Oe(Ke.threeDigitsSigned,e);case 4:return Oe(Ke.fourDigitsSigned,e);default:return Oe(new RegExp("^-?\\d{1,"+t+"}"),e)}}function p_(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function iP(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const i=r+50,o=Math.trunc(i/100)*100,a=t>=i%100;s=t+o-(a?100:0)}return n?s:1-s}function oP(t){return t%400===0||t%4===0&&t%100!==0}class lz extends pe{constructor(){super(...arguments);U(this,"priority",130);U(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Qe(He(4,n),i);case"yo":return Qe(s.ordinalNumber(n,{unit:"year"}),i);default:return Qe(He(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const i=n.getFullYear();if(s.isTwoDigitYear){const a=iP(s.year,i);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class cz extends pe{constructor(){super(...arguments);U(this,"priority",130);U(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Qe(He(4,n),i);case"Yo":return Qe(s.ordinalNumber(n,{unit:"year"}),i);default:return Qe(He(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,i){const o=f_(n,i);if(s.isTwoDigitYear){const l=iP(s.year,o);return n.setFullYear(l,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),or(n,i)}const a=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(a,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),or(n,i)}}class uz extends pe{constructor(){super(...arguments);U(this,"priority",130);U(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Wh(r==="R"?4:r.length,n)}set(n,r,s){const i=We(n,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Fo(i)}}class hz extends pe{constructor(){super(...arguments);U(this,"priority",130);U(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Wh(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class dz extends pe{constructor(){super(...arguments);U(this,"priority",120);U(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return He(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class fz extends pe{constructor(){super(...arguments);U(this,"priority",120);U(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return He(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class pz extends pe{constructor(){super(...arguments);U(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);U(this,"priority",110)}parse(n,r,s){const i=o=>o-1;switch(r){case"M":return Qe(Oe(Ke.month,n),i);case"MM":return Qe(He(2,n),i);case"Mo":return Qe(s.ordinalNumber(n,{unit:"month"}),i);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class mz extends pe{constructor(){super(...arguments);U(this,"priority",110);U(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const i=o=>o-1;switch(r){case"L":return Qe(Oe(Ke.month,n),i);case"LL":return Qe(He(2,n),i);case"Lo":return Qe(s.ordinalNumber(n,{unit:"month"}),i);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function gz(t,e,n){const r=te(t,n==null?void 0:n.in),s=Zk(r,n)-e;return r.setDate(r.getDate()-s*7),te(r,n==null?void 0:n.in)}class yz extends pe{constructor(){super(...arguments);U(this,"priority",100);U(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return Oe(Ke.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return He(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,i){return or(gz(n,s,i),i)}}function _z(t,e,n){const r=te(t,n==null?void 0:n.in),s=Jk(r,n)-e;return r.setDate(r.getDate()-s*7),r}class vz extends pe{constructor(){super(...arguments);U(this,"priority",100);U(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return Oe(Ke.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return He(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return Fo(_z(n,s))}}const wz=[31,28,31,30,31,30,31,31,30,31,30,31],xz=[31,29,31,30,31,30,31,31,30,31,30,31];class Ez extends pe{constructor(){super(...arguments);U(this,"priority",90);U(this,"subPriority",1);U(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return Oe(Ke.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return He(r.length,n)}}validate(n,r){const s=n.getFullYear(),i=oP(s),o=n.getMonth();return i?r>=1&&r<=xz[o]:r>=1&&r<=wz[o]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class Tz extends pe{constructor(){super(...arguments);U(this,"priority",90);U(this,"subpriority",1);U(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return Oe(Ke.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return He(r.length,n)}}validate(n,r){const s=n.getFullYear();return oP(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function m_(t,e,n){var d,f,m,v;const r=Ni(),s=(n==null?void 0:n.weekStartsOn)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??0,i=te(t,n==null?void 0:n.in),o=i.getDay(),l=(e%7+7)%7,c=7-s,h=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return jd(i,h,n)}class bz extends pe{constructor(){super(...arguments);U(this,"priority",90);U(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=m_(n,s,i),n.setHours(0,0,0,0),n}}class Iz extends pe{constructor(){super(...arguments);U(this,"priority",90);U(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Qe(He(r.length,n),o);case"eo":return Qe(s.ordinalNumber(n,{unit:"day"}),o);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=m_(n,s,i),n.setHours(0,0,0,0),n}}class Sz extends pe{constructor(){super(...arguments);U(this,"priority",90);U(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Qe(He(r.length,n),o);case"co":return Qe(s.ordinalNumber(n,{unit:"day"}),o);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=m_(n,s,i),n.setHours(0,0,0,0),n}}function kz(t,e,n){const r=te(t,n==null?void 0:n.in),s=tz(r,n),i=e-s;return jd(r,i,n)}class Pz extends pe{constructor(){super(...arguments);U(this,"priority",90);U(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return He(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return Qe(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return Qe(s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Qe(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Qe(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=kz(n,s),n.setHours(0,0,0,0),n}}class Az extends pe{constructor(){super(...arguments);U(this,"priority",80);U(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(p_(s),0,0,0),n}}class Cz extends pe{constructor(){super(...arguments);U(this,"priority",80);U(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(p_(s),0,0,0),n}}class Rz extends pe{constructor(){super(...arguments);U(this,"priority",80);U(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(p_(s),0,0,0),n}}class Nz extends pe{constructor(){super(...arguments);U(this,"priority",70);U(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return Oe(Ke.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return He(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const i=n.getHours()>=12;return i&&s<12?n.setHours(s+12,0,0,0):!i&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class Dz extends pe{constructor(){super(...arguments);U(this,"priority",70);U(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return Oe(Ke.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return He(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class Oz extends pe{constructor(){super(...arguments);U(this,"priority",70);U(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return Oe(Ke.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return He(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class Mz extends pe{constructor(){super(...arguments);U(this,"priority",70);U(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return Oe(Ke.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return He(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const i=s<=24?s%24:s;return n.setHours(i,0,0,0),n}}class Lz extends pe{constructor(){super(...arguments);U(this,"priority",60);U(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return Oe(Ke.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return He(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class Vz extends pe{constructor(){super(...arguments);U(this,"priority",50);U(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return Oe(Ke.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return He(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class Fz extends pe{constructor(){super(...arguments);U(this,"priority",30);U(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return Qe(He(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class jz extends pe{constructor(){super(...arguments);U(this,"priority",10);U(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return qn($n.basicOptionalMinutes,n);case"XX":return qn($n.basic,n);case"XXXX":return qn($n.basicOptionalSeconds,n);case"XXXXX":return qn($n.extendedOptionalSeconds,n);case"XXX":default:return qn($n.extended,n)}}set(n,r,s){return r.timestampIsSet?n:We(n,n.getTime()-Bh(n)-s)}}class Uz extends pe{constructor(){super(...arguments);U(this,"priority",10);U(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return qn($n.basicOptionalMinutes,n);case"xx":return qn($n.basic,n);case"xxxx":return qn($n.basicOptionalSeconds,n);case"xxxxx":return qn($n.extendedOptionalSeconds,n);case"xxx":default:return qn($n.extended,n)}}set(n,r,s){return r.timestampIsSet?n:We(n,n.getTime()-Bh(n)-s)}}class zz extends pe{constructor(){super(...arguments);U(this,"priority",40);U(this,"incompatibleTokens","*")}parse(n){return sP(n)}set(n,r,s){return[We(n,s*1e3),{timestampIsSet:!0}]}}class Bz extends pe{constructor(){super(...arguments);U(this,"priority",20);U(this,"incompatibleTokens","*")}parse(n){return sP(n)}set(n,r,s){return[We(n,s),{timestampIsSet:!0}]}}const Wz={G:new az,y:new lz,Y:new cz,R:new uz,u:new hz,Q:new dz,q:new fz,M:new pz,L:new mz,w:new yz,I:new vz,d:new Ez,D:new Tz,E:new bz,e:new Iz,c:new Sz,i:new Pz,a:new Az,b:new Cz,B:new Rz,h:new Nz,H:new Dz,K:new Oz,k:new Mz,m:new Lz,s:new Vz,S:new Fz,X:new jz,x:new Uz,t:new zz,T:new Bz},Hz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$z=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qz=/^'([^]*?)'?$/,Yz=/''/g,Gz=/\S/,Kz=/[a-zA-Z]/;function Qz(t,e,n,r){var b,y,w,T,R,D,L,I;const s=()=>We((r==null?void 0:r.in)||n,NaN),i=ez(),o=(r==null?void 0:r.locale)??i.locale??Xk,a=(r==null?void 0:r.firstWeekContainsDate)??((y=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((T=(w=i.locale)==null?void 0:w.options)==null?void 0:T.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((D=(R=r==null?void 0:r.locale)==null?void 0:R.options)==null?void 0:D.weekStartsOn)??i.weekStartsOn??((I=(L=i.locale)==null?void 0:L.options)==null?void 0:I.weekStartsOn)??0;if(!e)return t?s():te(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},h=[new oz(r==null?void 0:r.in,n)],d=e.match($z).map(_=>{const k=_[0];if(k in Ym){const P=Ym[k];return P(_,o.formatLong)}return _}).join("").match(Hz),f=[];for(let _ of d){!(r!=null&&r.useAdditionalWeekYearTokens)&&nP(_)&&Gm(_,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&tP(_)&&Gm(_,e,t);const k=_[0],P=Wz[k];if(P){const{incompatibleTokens:C}=P;if(Array.isArray(C)){const A=f.find(ie=>C.includes(ie.token)||ie.token===k);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${_}\` at the same time`)}else if(P.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);f.push({token:k,fullToken:_});const N=P.run(t,_,o.match,c);if(!N)return s();h.push(N.setter),t=N.rest}else{if(k.match(Kz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");if(_==="''"?_="'":k==="'"&&(_=Xz(_)),t.indexOf(_)===0)t=t.slice(_.length);else return s()}}if(t.length>0&&Gz.test(t))return s();const m=h.map(_=>_.priority).sort((_,k)=>k-_).filter((_,k,P)=>P.indexOf(_)===k).map(_=>h.filter(k=>k.priority===_).sort((k,P)=>P.subPriority-k.subPriority)).map(_=>_[0]);let v=te(n,r==null?void 0:r.in);if(isNaN(+v))return s();const E={};for(const _ of m){if(!_.validate(v,c))return s();const k=_.set(v,E,c);Array.isArray(k)?(v=k[0],Object.assign(E,k[1])):v=k}return v}function Xz(t){return t.match(qz)[1].replace(Yz,"'")}function Jz(t,e){const n=te(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Zz(t,e){const n=te(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function eB(t,e){const n=te(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function tB(t,e){const n=()=>We(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,s=iB(t);let i;if(s.date){const c=oB(s.date,r);i=aB(c.restDateString,c.year)}if(!i||isNaN(+i))return n();const o=+i;let a=0,l;if(s.time&&(a=lB(s.time),isNaN(a)))return n();if(s.timezone){if(l=cB(s.timezone),isNaN(l))return n()}else{const c=new Date(o+a),h=te(0,e==null?void 0:e.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return te(o+a+l,e==null?void 0:e.in)}const mu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},nB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,rB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,sB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function iB(t){const e={},n=t.split(mu.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],mu.timeZoneDelimiter.test(e.date)&&(e.date=t.split(mu.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=mu.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function oB(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function aB(t,e){if(e===null)return new Date(NaN);const n=t.match(nB);if(!n)return new Date(NaN);const r=!!n[4],s=Da(n[1]),i=Da(n[2])-1,o=Da(n[3]),a=Da(n[4]),l=Da(n[5])-1;if(r)return pB(e,a,l)?uB(e,a,l):new Date(NaN);{const c=new Date(0);return!dB(e,i,o)||!fB(e,s)?new Date(NaN):(c.setUTCFullYear(e,i,Math.max(s,o)),c)}}function Da(t){return t?parseInt(t):1}function lB(t){const e=t.match(rB);if(!e)return NaN;const n=ap(e[1]),r=ap(e[2]),s=ap(e[3]);return mB(n,r,s)?n*gc+r*mc+s*1e3:NaN}function ap(t){return t&&parseFloat(t.replace(",","."))||0}function cB(t){if(t==="Z")return 0;const e=t.match(sB);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return gB(r,s)?n*(r*gc+s*mc):NaN}function uB(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const hB=[31,null,31,30,31,30,31,31,30,31,30,31];function aP(t){return t%400===0||t%4===0&&t%100!==0}function dB(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(hB[e]||(aP(t)?29:28))}function fB(t,e){return e>=1&&e<=(aP(t)?366:365)}function pB(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function mB(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function gB(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const yB={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Sk._date.override({_id:"date-fns",formats:function(){return yB},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=te(t):n==="string"&&(typeof e=="string"?t=Qz(t,e,new Date,this.options):t=tB(t,this.options)),$k(t)?t.getTime():null},format:function(t,e){return J9(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return h_(t,e);case"second":return z5(t,e);case"minute":return j5(t,e);case"hour":return L5(t,e);case"day":return jd(t,e);case"week":return B5(t,e);case"month":return u_(t,e);case"quarter":return U5(t,e);case"year":return W5(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return d_(t,e);case"second":return X5(t,e);case"minute":return G5(t,e);case"hour":return Y5(t,e);case"day":return qk(t,e);case"week":return J5(t,e);case"month":return Kk(t,e);case"quarter":return Q5(t,e);case"year":return Z5(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return eB(t);case"minute":return Zz(t);case"hour":return Jz(t);case"day":return qm(t);case"week":return or(t);case"isoWeek":return or(t,{weekStartsOn:+n});case"month":return t9(t);case"quarter":return e9(t);case"year":return Qk(t);default:return t}},endOf:function(t,e){switch(e){case"second":return a9(t);case"minute":return i9(t);case"hour":return r9(t);case"day":return Yk(t);case"week":return s9(t);case"month":return Gk(t);case"quarter":return o9(t);case"year":return n9(t);default:return t}}});const lP="label";function LE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function _B(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function cP(t,e){t.labels=e}function uP(t,e,n=lP){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function vB(t,e=lP){const n={labels:[],datasets:[]};return cP(n,t.labels),uP(n,t.datasets,e),n}function wB(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,m=O.useRef(null),v=O.useRef(null),E=()=>{m.current&&(v.current=new Ld(m.current,{type:o,data:vB(a,i),options:l&&{...l},plugins:c}),LE(e,v.current))},b=()=>{LE(e,null),v.current&&(v.current.destroy(),v.current=null)};return O.useEffect(()=>{!s&&v.current&&l&&_B(v.current,l)},[s,l]),O.useEffect(()=>{!s&&v.current&&cP(v.current.config.data,a.labels)},[s,a.labels]),O.useEffect(()=>{!s&&v.current&&a.datasets&&uP(v.current.config.data,a.datasets,i)},[s,a.datasets]),O.useEffect(()=>{v.current&&(s?(b(),setTimeout(E)):v.current.update(d))},[s,l,a.labels,a.datasets,d]),O.useEffect(()=>{v.current&&(b(),setTimeout(E))},[o]),O.useEffect(()=>(E(),()=>b()),[]),x.jsx("canvas",{ref:m,role:"img",height:n,width:r,...f,children:h})}const xB=O.forwardRef(wB);function EB(t,e){return Ld.register(e),O.forwardRef((n,r)=>x.jsx(xB,{...n,ref:r,type:t}))}const TB=EB("line",Fu);Ld.register(Hm,$m,zu,os,I5,y5,Ql,h5);const hP=({data:t})=>{const e={labels:t.map(r=>r.timestamp),datasets:[{label:"Velocity (m/s)",data:t.map(r=>r.velocity),borderColor:"#0EA5E9",backgroundColor:"rgba(14,165,233,0.1)",tension:.3,fill:!0,pointRadius:2}]},n={responsive:!0,plugins:{legend:{position:"top"},tooltip:{intersect:!1,mode:"index"}},scales:{x:{type:"time",time:{unit:"minute"}},y:{title:{display:!0,text:"m/s"}}}};return x.jsx(TB,{options:n,data:e})},Zo=({columns:t,rows:e})=>x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"min-w-full text-left text-sm",children:[x.jsx("thead",{children:x.jsx("tr",{className:"text-slate-600",children:t.map(n=>x.jsx("th",{className:"px-3 py-2 border-b border-slate-200 font-medium",children:n.header},n.header))})}),x.jsxs("tbody",{children:[e.map((n,r)=>x.jsx("tr",{className:"border-b border-slate-100",children:t.map(s=>x.jsx("td",{className:"px-3 py-2 text-slate-800",children:s.accessor(n)},s.header))},r)),e.length===0&&x.jsx("tr",{children:x.jsx("td",{colSpan:t.length,className:"px-3 py-4 text-center text-slate-500",children:"No data"})})]})]})}),bB=()=>{var t;return(t=$i.currentUser)==null?void 0:t.uid},gn=()=>bB()||"guest",tn=()=>new Date().toISOString(),yn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2),Hh=async(t,e,n=15e3)=>{const r=QS(XS,t),s=new AbortController,i=setTimeout(()=>s.abort("upload-timeout"),n);try{return await Promise.race([cj(r,e,{contentType:e.type}),new Promise((a,l)=>s.signal.addEventListener("abort",()=>l(new Error("Upload timed out"))))]),await KS(r)}finally{clearTimeout(i)}},VE=async(t,e)=>{const r=(await Dn(lr(Xe(Me,t),cr(e,"desc"),Xo(1)))).docs.at(0);return r?r.data():null},FE={upload:async t=>{const e=yn(),n=`videos/${e}-${t.name}`,r=await Hh(n,t,6e4),s={id:e,name:t.name,url:r,storagePath:n,contentType:t.type,size:t.size,createdAt:tn(),userId:gn()};return await ir(Xe(Me,"videos"),s),{data:{data:s}}},list:async()=>({data:{data:(await Dn(lr(Xe(Me,"videos"),cr("createdAt","desc")))).docs.map(n=>n.data())}})},Bu={upload:async t=>{const e=yn(),n=`datasets/${e}-${t.name}`,r=await Hh(n,t,45e3),s={id:e,name:t.name,url:r,storagePath:n,contentType:t.type,size:t.size,createdAt:tn(),userId:gn()};return await ir(Xe(Me,"datasets"),s),{data:{data:s}}},list:async()=>({data:{data:(await Dn(lr(Xe(Me,"datasets"),cr("createdAt","desc")))).docs.map(n=>n.data())}})},Km={create:async(t,e,n)=>{const s={id:yn(),velocity:t,source:e,timestamp:n||tn(),userId:gn()};return await ir(Xe(Me,"velocity_logs"),s),{data:{data:s}}},list:async()=>({data:{data:(await Dn(lr(Xe(Me,"velocity_logs"),cr("timestamp","desc"),Xo(200)))).docs.map(n=>n.data())}})},Xl={create:async(t,e,n)=>{const s={id:yn(),threshold:t,velocity:e,status:n,triggeredAt:tn(),userId:gn()};if(await ir(Xe(Me,"alerts"),s),n==="danger")try{await ir(Xe(Me,"notifications"),{id:yn(),type:"municipality_alert",message:`High flood alert: velocity ${e} m/s (threshold ${t} m/s)`,channel:"simulated",delivered:!0,createdAt:tn(),userId:gn()}),console.info("Simulated notification dispatched to municipality")}catch(i){console.error("Notification write failed",i)}return{data:{data:s}}},list:async()=>({data:{data:(await Dn(lr(Xe(Me,"alerts"),cr("triggeredAt","desc"),Xo(200)))).docs.map(n=>n.data())}})},$h={velocity:async(t,e)=>{const n=await VE("models","uploadedAt"),r=await VE("datasets","createdAt");let s=+"2.5";const i=void 0;let o=i?Number(i):s*1.5;n&&(s*=.95,o*=.95),r!=null&&r.size&&r.size>3e6&&(s*=.9,o*=.9);let a="normal";t>=o?a="danger":t>=s&&(a="warning");const l=Math.min(1,Math.max(0,t/o)),c={velocity:t,source:e,label:a,score:l,thresholds:{warn:s,danger:o},explanation:`Heuristic: warn >= ${s.toFixed(2)} m/s, danger >= ${o.toFixed(2)} m/s${n?` | model: ${n.name}`:""}${r?` | dataset: ${r.name}`:""}`};try{await ir(Xe(Me,"inference_logs"),{id:yn(),...c,...n?{modelId:n.id}:{},...r?{datasetId:r.id}:{},userId:gn(),createdAt:tn()})}catch(h){console.error("Inference log write failed",h)}if(a==="warning")try{await Xl.create(s,t,"warning")}catch(h){console.error("Alert write failed (warning)",h)}if(a==="danger")try{await Xl.create(o,t,"danger")}catch(h){console.error("Alert write failed (danger)",h)}return{data:{data:c}}}},lp={upload:async(t,e,n)=>{const r=yn(),s=e||`v-${new Date().toISOString()}`,i=`models/${r}-${t.name}`,o=await Hh(i,t),a={id:r,name:t.name,version:s,status:"staged",uploadedAt:tn(),sourceUrl:o,mainFilePath:i,notes:n,userId:gn()};return await lx(Rm(Me,"models",r),a),{data:{data:a}}},uploadBundle:async(t,e,n)=>{var c;const r=yn(),s=e||`v-${new Date().toISOString()}`,i=[".onnx",".json",".bin",".tflite"],o=[];for(const h of t){const d=h.webkitRelativePath||h.name,f=`models/${r}/${d}`,m=await Hh(f,h);o.push({name:h.name,path:f,size:h.size,contentType:h.type,url:m})}const a=o.find(h=>i.some(d=>h.name.toLowerCase().endsWith(d)))||o[0],l={id:r,name:(a==null?void 0:a.name)||((c=t[0])==null?void 0:c.name)||"bundle",version:s,status:"staged",uploadedAt:tn(),sourceUrl:a==null?void 0:a.url,mainFilePath:a==null?void 0:a.path,files:o.map(({url:h,...d})=>d),notes:n,userId:gn()};return await lx(Rm(Me,"models",r),l),{data:{data:l}}},list:async()=>{try{const e=(await Dn(lr(Xe(Me,"models"),cr("uploadedAt","desc")))).docs.map(n=>n.data());if(e.length)return{data:{data:e}}}catch(t){console.error("Model list failed (ordered), retrying unordered",t)}try{const e=(await Dn(Xe(Me,"models"))).docs.map(n=>n.data());if(e.length)return{data:{data:e}}}catch(t){console.error("Model list failed (unordered)",t)}try{const t=QS(XS,"models"),e=await uj(t);return{data:{data:await Promise.all(e.items.map(async r=>{const s=await KS(r),i=r.name;return{id:r.fullPath,name:i,version:"unknown",status:"staged",uploadedAt:tn(),sourceUrl:s,mainFilePath:r.fullPath}}))}}}catch(t){return console.error("Storage fallback list failed",t),{data:{data:[]}}}}},Qm={create:async(t,e="simulated",n="test")=>{const s={id:yn(),type:n,message:t,channel:e,delivered:!0,createdAt:tn(),userId:gn()};return await ir(Xe(Me,"notifications"),s),{data:{data:s}}},list:async()=>({data:{data:(await Dn(lr(Xe(Me,"notifications"),cr("createdAt","desc"),Xo(200)))).docs.map(n=>n.data())}})},jE={seed:async()=>{const t=yn(),e={id:t,name:`Site ${t.slice(0,4)}`,location:"Sample River Bend",lat:0,lon:0,status:"online",alertStatus:"normal",lastVelocity:Math.random()*3,lastWaterLevel:.4+Math.random()*.6,lastRainRate:Math.random()*10,lastHeartbeat:tn(),userId:gn()};return await ir(Xe(Me,"sites"),e),{data:{data:e}}},list:async()=>({data:{data:(await Dn(lr(Xe(Me,"sites"),cr("lastHeartbeat","desc")))).docs.map(n=>n.data())}})},dP={create:async(t,e,n)=>{const s={id:yn(),siteId:e,level:t,timestamp:n||tn(),userId:gn()};return await ir(Xe(Me,"water_levels"),s),{data:{data:s}}},list:async()=>({data:{data:(await Dn(lr(Xe(Me,"water_levels"),cr("timestamp","desc"),Xo(200)))).docs.map(n=>n.data())}})},fP={create:async(t,e,n)=>{const s={id:yn(),siteId:e,rate:t,timestamp:n||tn(),userId:gn()};return await ir(Xe(Me,"rain_logs"),s),{data:{data:s}}},list:async()=>({data:{data:(await Dn(lr(Xe(Me,"rain_logs"),cr("timestamp","desc"),Xo(200)))).docs.map(n=>n.data())}})},IB=()=>{var b,y,w;const[t,e]=O.useState([]),[n,r]=O.useState([]),[s,i]=O.useState([]),[o,a]=O.useState([]),[l,c]=O.useState(!1);O.useEffect(()=>{(async()=>{c(!0);try{const[R,D,L,I]=await Promise.all([Km.list(),Xl.list(),dP.list(),fP.list()]);e(R.data.data||[]),r(D.data.data||[]),i(L.data.data||[]),a(I.data.data||[])}catch(R){console.error(R)}finally{c(!1)}})()},[]);const h=((b=t.at(0))==null?void 0:b.velocity)??0,d=((y=s.at(0))==null?void 0:y.level)??0,f=((w=o.at(0))==null?void 0:w.rate)??0,m=h>0?"Online":"Offline",v=O.useMemo(()=>n.length===0?"Normal":n[0].status,[n]),E=O.useMemo(()=>{const T=h,R=d,D=f,L=T*.5+R*.3+D*.2;return L>6?"danger":L>3?"warning":"normal"},[h,d,f]);return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Overview"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Realtime snapshot of water velocity system"})]}),l&&x.jsx("span",{className:"text-sm text-slate-500",children:"Refreshing..."})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsx(Fi,{title:"System Status",value:m,hint:"Derived from latest reading",tone:m==="Online"?"success":"warning"}),x.jsx(Fi,{title:"Latest Velocity",value:`${h.toFixed(2)} m/s`}),x.jsx(Fi,{title:"Alert State",value:v,hint:"Most recent alert",tone:v==="danger"?"danger":v==="warning"?"warning":"default"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsx(Fi,{title:"Water Level",value:`${d.toFixed(2)} m`,hint:"Latest water level"}),x.jsx(Fi,{title:"Rainfall",value:`${f.toFixed(1)} mm/hr`,hint:"Latest rain rate"}),x.jsx(Fi,{title:"Fused Risk",value:E,hint:"Velocity + water + rain",tone:E==="danger"?"danger":E==="warning"?"warning":"default"})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Velocity over time"}),x.jsx("span",{className:"text-xs text-slate-500",children:"Recent 50 readings"})]}),x.jsx(hP,{data:t.slice(0,50).reverse()})]}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Recent alerts"}),x.jsx("span",{className:"text-xs text-slate-500",children:"Last 5"})]}),x.jsx(Zo,{columns:[{header:"Status",accessor:T=>T.status},{header:"Velocity",accessor:T=>`${T.velocity} m/s`},{header:"Threshold",accessor:T=>`${T.threshold} m/s`},{header:"At",accessor:T=>new Date(T.triggeredAt).toLocaleString()}],rows:n.slice(0,5)})]})]})]})},g_=({label:t,accept:e,multiple:n,allowDirectory:r,onChange:s,onChangeFiles:i})=>x.jsxs("label",{className:"flex flex-col items-center justify-center border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-sky-400 cursor-pointer bg-white",children:[x.jsx("p",{className:"text-sm text-slate-700",children:t}),x.jsxs("p",{className:"text-xs text-slate-500",children:["Click to choose file",n||r?"s/folder":""]}),x.jsx("input",{type:"file",accept:e,className:"hidden",multiple:n,...r?{webkitdirectory:"",directory:""}:{},onChange:o=>{const a=o.target.files?Array.from(o.target.files):[];a.length!==0&&(i?i(a):s&&s(a[0]))}})]}),SB=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!1),[s,i]=O.useState(null),[o,a]=O.useState(""),[l,c]=O.useState(""),[h,d]=O.useState(!1),f=O.useRef(null),m=O.useRef(null),v=async()=>{try{const w=(await FE.list()).data.data||[];e(w),i(w[0]||null)}catch(y){console.error(y)}};O.useEffect(()=>{v()},[]),O.useEffect(()=>{const y=m.current,w=f.current;if(!y||!w)return;const T=()=>{y.width=w.clientWidth,y.height=w.clientHeight};T();const R=()=>T();window.addEventListener("resize",R);let D=0;const L=()=>{const I=y.getContext("2d");if(!I)return;I.clearRect(0,0,y.width,y.height);const _=Date.now()/1e3,k=18;for(let P=0;P<k;P++){const C=P*73%y.width+Math.sin(_+P)*20,N=P*37%y.height+Math.cos(_*.5+P)*10,A=30+P*11%40,ie=(_*.6+P)%(Math.PI*2),ce=C+Math.cos(ie)*A,we=N+Math.sin(ie)*A,Re=A>50;I.strokeStyle=Re?"rgba(244, 63, 94, 0.8)":"rgba(56, 189, 248, 0.8)",I.lineWidth=Re?2.4:1.4,I.beginPath(),I.moveTo(C,N),I.lineTo(ce,we),I.stroke()}D=requestAnimationFrame(L)};return D=requestAnimationFrame(L),()=>{window.removeEventListener("resize",R),cancelAnimationFrame(D)}},[s]);const E=async y=>{var w,T;a(""),c(""),r(!0);try{await FE.upload(y);const R=Math.min(6,Math.max(.3,y.size/1e6));await $h.velocity(R,"video-upload"),await v(),c("Uploaded and analyzed. Check alerts/notifications if thresholds were hit.")}catch(R){a((R==null?void 0:R.message)||((T=(w=R==null?void 0:R.response)==null?void 0:w.data)==null?void 0:T.message)||"Upload failed")}finally{r(!1)}},b=async()=>{var y,w;if(s){d(!0),a("");try{const T=Math.max(.1,Math.random()*4.5);await $h.velocity(T,"neuromorphic-camera-demo")}catch(T){a(((w=(y=T==null?void 0:T.response)==null?void 0:y.data)==null?void 0:w.message)||"Inference failed")}finally{d(!1)}}};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Live Feed"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Manage video inputs and playback"})]}),x.jsx("span",{className:"text-xs text-slate-400",children:"// TODO: Camera stream integration"})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsx("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-black aspect-video overflow-hidden",children:s?x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("video",{ref:f,src:s.url,controls:!0,className:"w-full h-full object-contain bg-black"}),x.jsx("canvas",{ref:m,className:"absolute inset-0 pointer-events-none mix-blend-screen"})]}):x.jsx("div",{className:"h-full flex items-center justify-center text-slate-200",children:"No video selected"})}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(g_,{label:n?"Uploading...":"Upload video (mp4/avi)",accept:"video/mp4,video/x-msvideo,video/avi",onChange:E}),o&&x.jsx("p",{className:"text-sm text-rose-600",children:o}),l&&x.jsx("p",{className:"text-sm text-emerald-600",children:l}),x.jsx("button",{disabled:!s||h,onClick:b,className:"w-full rounded-md border-2 border-slate-900 bg-amber-200 text-slate-900 py-2 text-sm font-semibold hover:shadow-[4px_4px_0_#0f172a] disabled:opacity-50",children:h?"Estimating...":"Estimate velocity (neuromorphic demo)"}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white divide-y divide-slate-100",children:[t.map(y=>x.jsxs("button",{className:`w-full text-left px-4 py-3 text-sm hover:bg-slate-50 ${(s==null?void 0:s.id)===y.id?"bg-slate-100":""}`,onClick:()=>i(y),children:[x.jsx("div",{className:"font-medium text-slate-900",children:y.name}),x.jsx("div",{className:"text-xs text-slate-500",children:new Date(y.createdAt).toLocaleString()})]},y.id)),t.length===0&&x.jsx("p",{className:"p-4 text-sm text-slate-500",children:"No uploads yet"})]})]})]})]})},kB=()=>{const[t,e]=O.useState([]),[n,r]=O.useState("0"),[s,i]=O.useState("sensor"),[o,a]=O.useState(""),[l,c]=O.useState("0.0"),[h,d]=O.useState("0.0"),[f,m]=O.useState(""),v=async()=>{try{const y=await Km.list();e(y.data.data||[])}catch(y){console.error(y)}};O.useEffect(()=>{v()},[]);const E=async y=>{var T,R;y.preventDefault(),a("");const w=Number(n);if(Number.isNaN(w)){a("Velocity must be numeric");return}try{await Km.create(w,s),r("0"),await v()}catch(D){a(((R=(T=D==null?void 0:D.response)==null?void 0:T.data)==null?void 0:R.message)||"Failed to record")}},b=async y=>{var R,D;y.preventDefault(),m("");const w=Number(l),T=Number(h);if(Number.isNaN(w)||Number.isNaN(T)){m("Values must be numeric");return}try{await Promise.all([dP.create(w),fP.create(T)]),c("0.0"),d("0.0"),await v()}catch(L){m(((D=(R=L==null?void 0:L.response)==null?void 0:R.data)==null?void 0:D.message)||"Failed to record sensor data")}};return x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Velocity Analytics"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Track readings and trends"})]})}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsx("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:x.jsx(hP,{data:t.slice(0,100).reverse()})}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Add reading"}),x.jsxs("form",{className:"space-y-3",onSubmit:E,children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Velocity (m/s)"}),x.jsx("input",{value:n,onChange:y=>r(y.target.value),type:"number",step:"0.01",className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Source"}),x.jsxs("select",{value:s,onChange:y=>i(y.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[x.jsx("option",{value:"sensor",children:"Sensor"}),x.jsx("option",{value:"camera",children:"Camera"}),x.jsx("option",{value:"upload",children:"Upload"})]})]}),o&&x.jsx("p",{className:"text-sm text-rose-600",children:o}),x.jsx("button",{type:"submit",className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700",children:"Save reading"})]})]}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Sensor fusion inputs"}),x.jsxs("form",{className:"space-y-3",onSubmit:b,children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Water level (m)"}),x.jsx("input",{value:l,onChange:y=>c(y.target.value),type:"number",step:"0.01",className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Rainfall (mm/hr)"}),x.jsx("input",{value:h,onChange:y=>d(y.target.value),type:"number",step:"0.1",className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),f&&x.jsx("p",{className:"text-sm text-rose-600",children:f}),x.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white rounded-md py-2 font-medium hover:bg-emerald-700",children:"Save sensor data"})]})]})]}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Reading log"}),x.jsxs("span",{className:"text-xs text-slate-500",children:["Latest ",t.length]})]}),x.jsx(Zo,{columns:[{header:"Timestamp",accessor:y=>new Date(y.timestamp).toLocaleString()},{header:"Velocity",accessor:y=>`${y.velocity} m/s`},{header:"Source",accessor:y=>y.source}],rows:t})]})]})},PB=()=>{const[t,e]=O.useState([]),[n,r]=O.useState("2.5"),[s,i]=O.useState("0"),[o,a]=O.useState("warning"),[l,c]=O.useState(""),h=async()=>{try{const f=await Xl.list();e(f.data.data||[])}catch(f){console.error(f)}};O.useEffect(()=>{h()},[]);const d=async f=>{var m,v;f.preventDefault(),c("");try{await Xl.create(Number(n),Number(s),o),await h()}catch(E){c(((v=(m=E==null?void 0:E.response)==null?void 0:m.data)==null?void 0:v.message)||"Failed to save alert")}};return x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Alerts"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Threshold management and alert history"})]})}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"lg:col-span-1 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Set threshold"}),x.jsxs("form",{className:"space-y-3",onSubmit:d,children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Velocity threshold (m/s)"}),x.jsx("input",{type:"number",step:"0.1",value:n,onChange:f=>r(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Sample velocity (optional)"}),x.jsx("input",{type:"number",step:"0.1",value:s,onChange:f=>i(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Status"}),x.jsxs("select",{value:o,onChange:f=>a(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[x.jsx("option",{value:"normal",children:"Normal"}),x.jsx("option",{value:"warning",children:"Warning"}),x.jsx("option",{value:"danger",children:"Danger"})]})]}),l&&x.jsx("p",{className:"text-sm text-rose-600",children:l}),x.jsx("button",{type:"submit",className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700",children:"Save alert"})]})]}),x.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"History"}),x.jsx("span",{className:"text-xs text-slate-500",children:"Recent entries"})]}),x.jsx(Zo,{columns:[{header:"Triggered",accessor:f=>new Date(f.triggeredAt).toLocaleString()},{header:"Velocity",accessor:f=>`${f.velocity} m/s`},{header:"Threshold",accessor:f=>`${f.threshold} m/s`},{header:"Status",accessor:f=>f.status}],rows:t})]})]})]})},AB=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!1),[s,i]=O.useState(!1),[o,a]=O.useState(""),l=async()=>{try{const d=await Bu.list();e(d.data.data||[])}catch(d){console.error(d)}};O.useEffect(()=>{l()},[]);const c=async d=>{var f,m;a(""),r(!0);try{await Bu.upload(d),await l()}catch(v){a(((m=(f=v==null?void 0:v.response)==null?void 0:f.data)==null?void 0:m.message)||"Upload failed")}finally{r(!1)}},h=async()=>{a(""),i(!0);try{const d="hf-internal-testing/fixtures_image_utils",f=`https://huggingface.co/api/datasets/${d}/tree/main`,m=await fetch(f).then(T=>{if(!T.ok)throw new Error("Failed to fetch dataset tree");return T.json()}),E=(Array.isArray(m)?m:[]).find(T=>T.type==="file"&&/\.(png|jpg|jpeg)$/i.test(T.path));if(!E)throw new Error("No image asset found in dataset");const b=`https://huggingface.co/datasets/${d}/resolve/main/${E.path}`,y=await fetch(b).then(T=>{if(!T.ok)throw new Error("Failed to fetch sample file");return T.blob()}),w=new File([y],E.path.split("/").pop()||"sample.png",{type:y.type});await Bu.upload(w),await l()}catch(d){a((d==null?void 0:d.message)||"Import failed")}finally{i(!1)}};return x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Datasets"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Upload and manage training datasets"})]})}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[x.jsx(g_,{label:n?"Uploading...":"Upload CSV / ZIP / video",accept:".csv,text/csv,.zip,video/*",onChange:c}),o&&x.jsx("p",{className:"text-sm text-rose-600",children:o}),x.jsx("button",{disabled:s,onClick:h,className:"w-full rounded-md border-2 border-slate-900 bg-amber-200 text-slate-900 py-2 text-sm font-semibold hover:shadow-[4px_4px_0_#0f172a] disabled:opacity-50",children:s?"Importing":"Import HF sample dataset"}),x.jsxs("div",{className:"rounded-lg border-2 border-slate-900 bg-white p-3 shadow-[4px_4px_0_#0f172a] text-sm text-slate-800 space-y-1",children:[x.jsx("div",{className:"font-semibold text-slate-900",children:"Public resources"}),x.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-slate-700",children:[x.jsx("li",{children:x.jsx("a",{className:"underline",href:"https://github.com/neuromorphs/ATIS-data",target:"_blank",rel:"noreferrer",children:"ATIS neuromorphic water sequences"})}),x.jsx("li",{children:x.jsx("a",{className:"underline",href:"https://data.mendeley.com/datasets/7d24kz8x6c",target:"_blank",rel:"noreferrer",children:"Flooded river video set (Mendeley)"})}),x.jsx("li",{children:x.jsx("a",{className:"underline",href:"https://huggingface.co/datasets/hf-internal-testing/fixtures_image_utils",target:"_blank",rel:"noreferrer",children:"Hugging Face sample image fixtures (for testing loaders)"})})]}),x.jsx("p",{className:"text-xs text-slate-600",children:"Download externally, then upload here to keep everything in Firebase Storage."})]})]}),x.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Uploaded datasets"}),x.jsx("span",{className:"text-xs text-slate-500",children:"Stored in Firebase Storage"})]}),x.jsx(Zo,{columns:[{header:"Name",accessor:d=>d.name},{header:"Size",accessor:d=>d.size?`${(d.size/1024/1024).toFixed(2)} MB`:"n/a"},{header:"Added",accessor:d=>new Date(d.createdAt).toLocaleString()}],rows:t})]})]})]})},CB=()=>{var Re,H,K;const[t,e]=O.useState("0"),[n,r]=O.useState("sensor"),[s,i]=O.useState(null),[o,a]=O.useState(!1),[l,c]=O.useState(""),[h,d]=O.useState([]),[f,m]=O.useState(""),[v,E]=O.useState(!1),[b,y]=O.useState(""),[w,T]=O.useState(""),[R,D]=O.useState([]),[L,I]=O.useState(""),[_,k]=O.useState(""),[P,C]=O.useState(!1),N=async z=>{var Z,ge;z.preventDefault(),c(""),i(null);const ne=Number(t);if(Number.isNaN(ne)){c("Velocity must be numeric");return}a(!0);try{const Ee=await $h.velocity(ne,n);i(Ee.data.data)}catch(Ee){c(((ge=(Z=Ee==null?void 0:Ee.response)==null?void 0:Z.data)==null?void 0:ge.message)||"Inference failed")}finally{a(!1)}},A=async()=>{var z,ne;try{const Z=await lp.list();d(Z.data.data||[]),m("")}catch(Z){console.error(Z),m(((ne=(z=Z==null?void 0:Z.response)==null?void 0:z.data)==null?void 0:ne.message)||"Failed to load models")}},ie=async()=>{try{const z=await Bu.list();D(z.data.data||[])}catch(z){console.error(z)}};O.useEffect(()=>{A(),ie()},[]);const ce=async z=>{var ne,Z;if(c(""),z.length!==0){E(!0);try{z.length===1?await lp.upload(z[0],b||void 0,w||void 0):await lp.uploadBundle(z,b||void 0,w||void 0),y(""),T(""),await A()}catch(ge){c(((Z=(ne=ge==null?void 0:ge.response)==null?void 0:ne.data)==null?void 0:Z.message)||"Model upload failed")}finally{E(!1)}}},we=async()=>{var ne,Z;if(!L){k("Pick a dataset first.");return}const z=R.find(ge=>ge.id===L);if(!z){k("Dataset not found.");return}k(""),C(!0);try{const ge=Math.max(.5,(z.size||5e5)/1e6*2.5);await $h.velocity(ge,"dataset-analysis"),await Qm.create(`Dataset ${z.name} analyzed: est velocity ${ge.toFixed(2)} m/s`,"simulated","dataset_report"),k("Report logged (inference + notification).")}catch(ge){k(((Z=(ne=ge==null?void 0:ge.response)==null?void 0:ne.data)==null?void 0:Z.message)||"Analysis failed")}finally{C(!1)}};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Model"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Manage models and run inference (heuristic fallback)"})]}),x.jsx("span",{className:"text-xs text-slate-400",children:"// TODO: Replace with trained ONNX model"})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Run inference"}),x.jsxs("form",{className:"space-y-3",onSubmit:N,children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Velocity (m/s)"}),x.jsx("input",{type:"number",step:"0.01",value:t,onChange:z=>e(z.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Source"}),x.jsxs("select",{value:n,onChange:z=>r(z.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[x.jsx("option",{value:"sensor",children:"Sensor"}),x.jsx("option",{value:"camera",children:"Camera"}),x.jsx("option",{value:"upload",children:"Upload"})]})]}),l&&x.jsx("p",{className:"text-sm text-rose-600",children:l}),x.jsx("button",{type:"submit",disabled:o,className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700 disabled:opacity-50",children:o?"Running...":"Run inference"})]})]}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm space-y-3",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Model status"}),x.jsxs("ul",{className:"space-y-1 text-sm text-slate-700",children:[x.jsxs("li",{children:[x.jsx("span",{className:"font-medium",children:"Active:"})," ",((Re=h[0])==null?void 0:Re.name)||"Heuristic"]}),x.jsxs("li",{children:[x.jsx("span",{className:"font-medium",children:"Version:"})," ",((H=h[0])==null?void 0:H.version)||"0.1.0 (heuristic)"]}),x.jsxs("li",{children:[x.jsx("span",{className:"font-medium",children:"Source:"})," ",(K=h[0])!=null&&K.sourceUrl?"Uploaded":"Heuristic rules"]})]}),s&&x.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3 text-sm text-slate-800",children:[x.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:"Latest inference"}),x.jsxs("div",{children:["Label: ",x.jsx("span",{className:"font-medium uppercase",children:s.label})]}),x.jsxs("div",{children:["Velocity: ",s.velocity," m/s (source: ",s.source,")"]}),x.jsxs("div",{children:["Score: ",(s.score*100).toFixed(1),"%"]}),x.jsxs("div",{children:["Thresholds: warn ",s.thresholds.warn," / danger ",s.thresholds.danger," m/s"]}),x.jsx("div",{className:"text-xs text-slate-500 mt-1",children:s.explanation})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"space-y-3 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Upload model artifact"}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Version (optional)"}),x.jsx("input",{value:b,onChange:z=>y(z.target.value),placeholder:"v1.0.0",className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Notes (optional)"}),x.jsx("textarea",{value:w,onChange:z=>T(z.target.value),rows:3,className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),x.jsx(g_,{label:v?"Uploading...":"Upload model file or folder",accept:".onnx,.json,.bin,.zip,.tflite",multiple:!0,allowDirectory:!0,onChangeFiles:ce})]}),x.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Model registry"}),x.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-500",children:[x.jsx("span",{children:"Newest first"}),x.jsx("button",{onClick:A,className:"rounded-md border border-slate-300 px-2 py-1 text-xs hover:bg-slate-100",children:"Refresh"})]})]}),f&&x.jsx("p",{className:"text-sm text-rose-600 mb-2",children:f}),x.jsx(Zo,{columns:[{header:"Name",accessor:z=>z.name},{header:"Version",accessor:z=>z.version},{header:"Status",accessor:z=>z.status},{header:"Uploaded",accessor:z=>new Date(z.uploadedAt).toLocaleString()},{header:"Main file",accessor:z=>z.mainFilePath||"n/a"},{header:"Files",accessor:z=>z.files?z.files.length:z.sourceUrl?1:0},{header:"Source",accessor:z=>z.sourceUrl?"Storage":"Heuristic"}],rows:h})]}),x.jsxs("div",{className:"rounded-lg border-2 border-slate-900 bg-white p-4 shadow-[4px_4px_0_#0f172a] space-y-2 text-sm text-slate-800",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Public model references"}),x.jsx("p",{children:"Start with lightweight demos; download externally then upload:"}),x.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[x.jsx("li",{children:x.jsx("a",{className:"underline",href:"https://github.com/isl-org/MiDaS",target:"_blank",rel:"noreferrer",children:"MiDaS depth (for water surface cues)"})}),x.jsx("li",{children:x.jsx("a",{className:"underline",href:"https://github.com/google-research/google-research/tree/master/optical_flow",target:"_blank",rel:"noreferrer",children:"Lightweight optical flow demos"})}),x.jsx("li",{children:x.jsx("a",{className:"underline",href:"https://huggingface.co/spaces/akhaliq/raft-small-onnx",target:"_blank",rel:"noreferrer",children:"RAFT-small ONNX demo (optical flow)"})})]}),x.jsx("p",{className:"text-xs text-slate-600",children:"Tip: export to ONNX/TFJS, then upload to register in Firebase."})]})]}),x.jsxs("div",{className:"rounded-lg border-2 border-slate-900 bg-white p-4 shadow-[4px_4px_0_#0f172a] space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Dataset-driven analysis"}),x.jsx("span",{className:"text-xs text-slate-500",children:"Logs inference + notification"})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[x.jsxs("div",{className:"lg:col-span-2",children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Dataset"}),x.jsxs("select",{value:L,onChange:z=>I(z.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[x.jsx("option",{value:"",children:"Select a dataset"}),R.map(z=>x.jsxs("option",{value:z.id,children:[z.name," ",z.size?`(${(z.size/1024/1024).toFixed(2)} MB)`:""]},z.id))]})]}),x.jsx("div",{className:"flex items-end",children:x.jsx("button",{onClick:we,disabled:P,className:"w-full rounded-md border-2 border-slate-900 bg-emerald-200 text-slate-900 py-2 text-sm font-semibold hover:shadow-[4px_4px_0_#0f172a] disabled:opacity-50",children:P?"Analyzing":"Run analysis"})})]}),_&&x.jsx("p",{className:"text-sm text-slate-700",children:_})]})]})},RB=()=>{const{login:t,register:e}=Xy(),n=Gg(),[r,s]=O.useState("login"),[i,o]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState("user"),[d,f]=O.useState(""),[m,v]=O.useState(!1),E=async b=>{var y,w;b.preventDefault(),f(""),v(!0);try{r==="login"?await t(i,a):await e(i,a,c),n("/")}catch(T){f(((w=(y=T==null?void 0:T.response)==null?void 0:y.data)==null?void 0:w.message)||"Authentication failed")}finally{v(!1)}};return x.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{background:"repeating-linear-gradient(45deg, #fef4dd, #fef4dd 10px, #f9e0ff 10px, #f9e0ff 20px)"},children:x.jsxs("div",{className:"bg-white border-4 border-slate-900 shadow-[8px_8px_0_#0f172a] rounded-xl p-8 w-full max-w-md",children:[x.jsx("h1",{className:"text-2xl font-semibold text-slate-900 mb-1",children:"Water Velocity"}),x.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Secure dashboard access"}),x.jsxs("div",{className:"flex mb-6 border-2 border-slate-900 rounded-md overflow-hidden text-sm",children:[x.jsx("button",{className:`flex-1 py-2 font-semibold ${r==="login"?"bg-sky-200 text-slate-900":"bg-white"}`,onClick:()=>s("login"),children:"Login"}),x.jsx("button",{className:`flex-1 py-2 font-semibold ${r==="register"?"bg-sky-200 text-slate-900":"bg-white"}`,onClick:()=>s("register"),children:"Register"})]}),x.jsxs("form",{className:"space-y-4",onSubmit:E,children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Email"}),x.jsx("input",{value:i,onChange:b=>o(b.target.value),type:"email",required:!0,className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Password"}),x.jsx("input",{value:a,onChange:b=>l(b.target.value),type:"password",required:!0,className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),r==="register"&&x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Role"}),x.jsxs("select",{value:c,onChange:b=>h(b.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[x.jsx("option",{value:"user",children:"User"}),x.jsx("option",{value:"admin",children:"Admin"})]})]}),d&&x.jsx("p",{className:"text-sm text-red-600",children:d}),x.jsx("button",{type:"submit",disabled:m,className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700 disabled:opacity-50",children:m?"Working...":r==="login"?"Login":"Register"})]})]})})},NB=()=>{const[t,e]=O.useState([]),[n,r]=O.useState("Simulated alert to municipality"),[s,i]=O.useState("simulated"),[o,a]=O.useState(!1),[l,c]=O.useState(""),h=async()=>{try{const f=await Qm.list();e(f.data.data||[])}catch(f){console.error(f)}};O.useEffect(()=>{h()},[]);const d=async f=>{var m,v;f.preventDefault(),c(""),a(!0);try{await Qm.create(n,s,"manual"),await h()}catch(E){c(((v=(m=E==null?void 0:E.response)==null?void 0:m.data)==null?void 0:v.message)||"Failed to send")}finally{a(!1)}};return x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Notifications"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Simulated municipality dispatch log"})]})}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"lg:col-span-1 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Simulate send"}),x.jsxs("form",{className:"space-y-3",onSubmit:d,children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Message"}),x.jsx("textarea",{value:n,onChange:f=>r(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",rows:3})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Channel"}),x.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[x.jsx("option",{value:"simulated",children:"Simulated"}),x.jsx("option",{value:"webhook",children:"Webhook"}),x.jsx("option",{value:"email",children:"Email"}),x.jsx("option",{value:"sms",children:"SMS"})]})]}),l&&x.jsx("p",{className:"text-sm text-rose-600",children:l}),x.jsx("button",{type:"submit",disabled:o,className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700 disabled:opacity-50",children:o?"Sending...":"Send simulated notification"})]})]}),x.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Dispatch history"}),x.jsx("span",{className:"text-xs text-slate-500",children:"Newest first"})]}),x.jsx(Zo,{columns:[{header:"Created",accessor:f=>new Date(f.createdAt).toLocaleString()},{header:"Type",accessor:f=>f.type},{header:"Channel",accessor:f=>f.channel},{header:"Delivered",accessor:f=>f.delivered?"Yes":"No"},{header:"Message",accessor:f=>f.message}],rows:t})]})]})]})},DB=t=>{const e=t*37%100;return{top:`${20+e%60}%`,left:`${10+e*3%80}%`}},OB=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!1),[s,i]=O.useState(""),o=async()=>{try{const c=await jE.list();e(c.data.data||[])}catch(c){console.error(c)}};O.useEffect(()=>{o()},[]);const a=async()=>{var c,h;i(""),r(!0);try{await jE.seed(),await o()}catch(d){i(((h=(c=d==null?void 0:d.response)==null?void 0:c.data)==null?void 0:h.message)||"Failed to seed")}finally{r(!1)}},l=O.useMemo(()=>{const c=t.length,h=t.filter(f=>f.status==="online").length,d=t.filter(f=>f.alertStatus==="danger").length;return{total:c,online:h,danger:d}},[t]);return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Sites & Health"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Locations, status, and freshness"})]}),x.jsxs("div",{className:"space-x-2",children:[x.jsx("button",{onClick:o,className:"rounded-md border border-slate-300 px-3 py-2 text-sm hover:bg-slate-100",children:"Refresh"}),x.jsx("button",{onClick:a,disabled:n,className:"rounded-md border border-sky-500 px-3 py-2 text-sm text-white bg-sky-600 hover:bg-sky-700 disabled:opacity-50",children:n?"Seeding...":"Add sample site"})]})]}),s&&x.jsx("p",{className:"text-sm text-rose-600",children:s}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("div",{className:"text-sm text-slate-500",children:"Total sites"}),x.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:l.total})]}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("div",{className:"text-sm text-slate-500",children:"Online"}),x.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:l.online})]}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsx("div",{className:"text-sm text-slate-500",children:"Danger alerts"}),x.jsx("div",{className:"text-2xl font-semibold text-rose-600",children:l.danger})]})]}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 p-4 shadow-sm text-white relative overflow-hidden",style:{minHeight:"320px"},children:[x.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.3) 1px, transparent 0)",backgroundSize:"24px 24px"}}),x.jsxs("div",{className:"relative z-10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"Map view (schematic)"}),x.jsx("span",{className:"text-xs text-slate-300",children:"Markers sized by velocity"})]}),x.jsxs("div",{className:"relative w-full",style:{height:"260px"},children:[t.map((c,h)=>{const d=DB(h+c.id.length),f=12+Math.min(20,(c.lastVelocity||0)*6),m=c.alertStatus==="danger"?"bg-rose-500":c.alertStatus==="warning"?"bg-amber-400":"bg-emerald-400";return x.jsx("div",{className:`absolute rounded-full border border-white/70 shadow-lg text-[10px] text-white flex items-center justify-center ${m}`,style:{width:`${f}px`,height:`${f}px`,top:d.top,left:d.left},title:`${c.name} | ${c.alertStatus}`},c.id)}),t.length===0&&x.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-300 text-sm",children:"No sites yet. Add a sample site."})]})]})]}),x.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Site details"}),x.jsx("span",{className:"text-xs text-slate-500",children:"Most recent heartbeat first"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[t.map(c=>{var h,d,f;return x.jsxs("div",{className:"rounded-md border border-slate-200 p-3 bg-slate-50",children:[x.jsxs("div",{className:"flex items-center justify-between mb-1",children:[x.jsx("div",{className:"font-semibold text-slate-900",children:c.name}),x.jsx("span",{className:`text-xs px-2 py-1 rounded-md ${c.alertStatus==="danger"?"bg-rose-100 text-rose-700":c.alertStatus==="warning"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:c.alertStatus})]}),x.jsx("div",{className:"text-xs text-slate-600 mb-2",children:c.location}),x.jsxs("div",{className:"text-sm text-slate-800",children:["Velocity: ",((h=c.lastVelocity)==null?void 0:h.toFixed(2))??""," m/s"]}),x.jsxs("div",{className:"text-sm text-slate-800",children:["Water level: ",((d=c.lastWaterLevel)==null?void 0:d.toFixed(2))??""," m"]}),x.jsxs("div",{className:"text-sm text-slate-800",children:["Rain: ",((f=c.lastRainRate)==null?void 0:f.toFixed(1))??""," mm/hr"]}),x.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Last heartbeat: ",c.lastHeartbeat?new Date(c.lastHeartbeat).toLocaleString():"n/a"]})]},c.id)}),t.length===0&&x.jsx("div",{className:"text-sm text-slate-500",children:"No sites yet."})]})]})]})},MB=()=>x.jsxs(fN,{children:[x.jsx(vn,{path:"/auth",element:x.jsx(RB,{})}),x.jsxs(vn,{element:x.jsx(vj,{}),children:[x.jsx(vn,{path:"/",element:x.jsx(IB,{})}),x.jsx(vn,{path:"/live",element:x.jsx(SB,{})}),x.jsx(vn,{path:"/velocity",element:x.jsx(kB,{})}),x.jsx(vn,{path:"/alerts",element:x.jsx(PB,{})}),x.jsx(vn,{path:"/notifications",element:x.jsx(NB,{})}),x.jsx(vn,{path:"/datasets",element:x.jsx(AB,{})}),x.jsx(vn,{path:"/model",element:x.jsx(CB,{})}),x.jsx(vn,{path:"/sites",element:x.jsx(OB,{})})]})]});cp.createRoot(document.getElementById("root")).render(x.jsx(QE.StrictMode,{children:x.jsx(xN,{children:x.jsx(gj,{children:x.jsx(MB,{})})})}));
